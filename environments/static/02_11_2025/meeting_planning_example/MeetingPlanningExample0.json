{
    "name": "MeetingPlanningExample0",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "route_planner",
            "calendar_evaluator",
            "orchestrator"
        ],
        "route_planner": {
            "private_information": [
                "Expert in San Francisco intra-city travel estimation using walking and rideshare times.",
                "Knows directional travel times can differ.",
                "Can enumerate alternative timelines with travel, waiting, and meeting segments."
            ],
            "goal": "Propose several feasible day plans that respect travel times and availability windows so that the visitor can meet Stephanie for at least 120 minutes."
        },
        "calendar_evaluator": {
            "private_information": [
                "Optimizes to meet as many friends as possible; when the set of friends is fixed, prioritizes meeting duration and schedule robustness.",
                "Prefers earlier feasible starts, buffer time before and after meetings, and minimal total travel.",
                "Ensures hard constraints are always respected."
            ],
            "goal": "Evaluate and rank the candidate schedules, selecting the one that best maximizes meetings (friends met), then meeting duration, then robustness and lower travel time."
        },
        "orchestrator": {
            "private_information": [
                "Coordinates plans from the other agents into a single coherent plan.",
                "Translates the final decision into a PDDL domain and problem suitable for the FastDownwards solver.",
                "Compiles time using a numeric fluent and non-durative actions to remain compatible with classical planning."
            ],
            "goal": "Integrate the analyzed schedules and produce a final PDDL domain and problem that enforces meeting Stephanie for at least 120 minutes within her availability, starting at Marina District at 09:00, with directional travel times."
        }
    },
    "environment": {
        "init": {
            "time_unit_minutes": 1,
            "start_time": "09:00",
            "planning_horizon_end": "14:00",
            "locations": [
                "marina_district",
                "mission_district"
            ]
        },
        "public_information": [
            "You arrive at Marina District at 09:00.",
            "Friends to meet: Stephanie at Mission District.",
            "Stephanie is available at Mission District from 10:30 to 13:30.",
            "You want to meet Stephanie for a minimum of 120 minutes.",
            "Travel times (in minutes): Marina District -> Mission District: 20; Mission District -> Marina District: 19.",
            "Goal: Consider various different schedules and pick the best one to optimize meeting objectives."
        ]
    },
    "workflow": {
        "route_planner": {
            "propose_routes": {
                "input": [],
                "output": "routes_proposal",
                "system_prompt": "You are a local route planner. Generate multiple feasible itineraries given start at Marina District at 09:00, directional travel times (Marina->Mission: 20 minutes; Mission->Marina: 19 minutes), Stephanie at Mission from 10:30 to 13:30, and the requirement to meet Stephanie for at least 120 minutes. Use a 1-minute granularity if needed. Do not produce PDDL; instead, output a compact JSON with key 'candidates' where each candidate has: id, description, segments (ordered list with type in {travel, wait, meet}, start, end, duration_minutes, from, to), feasibility_notes, and expected meeting_minutes_with_stephanie. Include 3 to 5 diverse options that cover traveling early then waiting, traveling just-in-time, and any alternative timing that still meets the 120-minute minimum.",
                "prompt": "Your name is route_planner. Public facts: {environment->public_information}. Your knowledge: {agents->route_planner->private_information}. Global goal: {agents->route_planner->goal}. Produce 3 to 5 feasible schedule candidates that respect all hard constraints and clearly show when the visitor travels, waits, and meets Stephanie. Do not emit PDDL; return only the JSON structure requested."
            }
        },
        "calendar_evaluator": {
            "score_schedules": {
                "input": [
                    "routes_proposal"
                ],
                "output": "schedules_evaluation",
                "system_prompt": "You are a scheduling analyst. Rank the candidate itineraries by: 1) number of friends met (primary; all candidates may tie if only Stephanie is available), 2) meeting_minutes_with_stephanie (higher is better, must be at least 120), 3) robustness (buffer before first meeting and after last meeting within availability), 4) total travel time (lower is better), 5) earliest finish time. Do not produce PDDL. Output a JSON object with: 'scores' (list of {id, friends_met, meeting_minutes_with_stephanie, buffer_before_window, buffer_after_window, total_travel_minutes, finish_time, score, notes}) and 'best_id' with a short 'rationale' explaining the choice.",
                "prompt": "Your name is calendar_evaluator. Public facts: {environment->public_information}. Your knowledge: {agents->calendar_evaluator->private_information}. Evaluate these candidate schedules: {routes_proposal}. Ensure hard constraints are respected; if any candidate violates them, mark it infeasible and penalize accordingly. Return only the requested JSON."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "routes_proposal",
                    "schedules_evaluation"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert planner. Produce a PDDL domain and a PDDL problem designed for the FastDownwards solver. Use classical (non-durative) actions with numeric fluents to encode time as an integer in minutes since 09:00 and meeting duration accumulation. Provide actions for waiting one minute, traveling between Marina and Mission that increase time by the directional travel time, and meeting Stephanie one minute at a time within her availability window. Enforce that meeting with Stephanie accrues at least 120 minutes within [10:30, 13:30]. The visitor starts at Marina at time 0 (i.e., 09:00). Enclose the domain in <domain></domain> and the problem in <problem></problem> tags.",
                "prompt": "There are candidate schedules and an evaluation selecting a best plan. Candidates: {routes_proposal}. Evaluation: {schedules_evaluation}. Integrate this information and produce a final PDDL that captures: locations {marina, mission}, a single agent 'visitor', numeric fluent (now) for minutes since 09:00, numeric fluent (met-stephanie) for minutes of meeting accrued, 0-ary numeric functions (open-stephanie) and (close-stephanie) for availability bounds, and a function (tt ?from ?to) for directional travel times. Predicates should track the visitor's location (at ?l). Actions: wait-1 (increase (now) by 1), travel (?from ?to) with precondition (at ?from) and effect set (at ?to) and (increase (now) by (tt ?from ?to)), meet-1 with preconditions (at mission) and (>= (now) (open-stephanie)) and (< (now) (close-stephanie)), and effect (increase (met-stephanie) 1). The goal is (>= (met-stephanie) 120). Provide concrete objects marina and mission, initialize (tt marina mission) = 20 and (tt mission marina) = 19, set (open-stephanie) = 90 and (close-stephanie) = 210. Do not include durative actions. Enclose the PDDL in the specified tags."
            }
        },
        "constraints": [
            "route_planner.propose_routes->calendar_evaluator.score_schedules",
            "route_planner.propose_routes->orchestrator.pddl",
            "calendar_evaluator.score_schedules->orchestrator.pddl"
        ]
    }
}