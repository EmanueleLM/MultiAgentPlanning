{
    "name": "MeetingPlanningExample22",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "traveler",
            "map_expert",
            "calendar_planner",
            "orchestrator"
        ],
        "traveler": {
            "private_information": [
                "I am visiting San Francisco for one day.",
                "I am physically at Presidio at 09:00.",
                "I want to meet as many friends as possible while ensuring I can meet Andrew for at least 105 minutes."
            ],
            "goal": "Generate several feasible day schedules that start at Presidio at 09:00, respect travel times, and satisfy meeting constraints, then prepare them for orchestration."
        },
        "map_expert": {
            "private_information": [
                "I know directed travel times between locations.",
                "I can represent travel times as a directed adjacency list with minutes as weights."
            ],
            "goal": "Provide a clean, minimal travel time matrix for the known locations and highlight any asymmetry (e.g., Presidio to Union Square differs from Union Square to Presidio)."
        },
        "calendar_planner": {
            "private_information": [
                "I manage time windows for friends\u2019 availability.",
                "I ensure constraints like minimum meeting durations are explicit."
            ],
            "goal": "List friends\u2019 availability windows and hard constraints (including Andrew\u2019s window and minimum meeting duration) in a structured, machine-usable format."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Coordinate inputs from other agents, select the best schedule that maximizes friends met while satisfying constraints, and produce a final PDDL domain and problem suitable for the FastDownward solver."
        }
    },
    "environment": {
        "init": {
            "grid_size": 4,
            "visibility": 1,
            "time_unit": "minute",
            "start_location": "Presidio",
            "start_time": "09:00",
            "locations": [
                "Presidio",
                "Union Square"
            ]
        },
        "public_information": [
            "You arrive at Presidio at 9:00AM.",
            "Andrew will be at Union Square from 11:15AM to 5:15PM.",
            "Minimum desired meeting time with Andrew is 105 minutes.",
            "Directed travel times (in minutes): Presidio -> Union Square: 22; Union Square -> Presidio: 24.",
            "Objective: Consider multiple schedules and choose the one that meets as many friends as possible while satisfying all constraints."
        ]
    },
    "workflow": {
        "traveler": {
            "candidate_schedules": {
                "input": [
                    "travel_time_matrix",
                    "friend_windows"
                ],
                "output": "candidate_schedules",
                "system_prompt": "You are a pragmatic day-planning specialist. You design several feasible itineraries given travel times and availability windows, without emitting PDDL. You verify feasibility against start location and time, travel durations, and minimum meeting durations.",
                "prompt": "Your name is traveler. Here is the public information: {environment->public_information}. You have the start location and time in the environment init: {environment->init}. You will receive travel times as a directed matrix and friends\u2019 availability windows. Produce 3 to 5 distinct feasible schedules for the day that start at Presidio at 09:00. Each schedule should list ordered activities with start_time, end_time, location, travel segments, and meeting blocks, ensuring Andrew is met for at least 105 minutes within 11:15-17:15 and that travel times are respected (22 minutes Presidio->Union Square and 24 minutes Union Square->Presidio). Return a compact JSON array named schedules with fields: name, stops (each with type in {travel, meet}, location_from, location_to, depart_time, arrive_time, friend (if meet), duration_minutes), total_travel_minutes, total_meeting_minutes, friends_met, and brief_rationale. Do not emit PDDL."
            }
        },
        "map_expert": {
            "travel_time_matrix": {
                "input": [],
                "output": "travel_time_matrix",
                "system_prompt": "You are a mapping and travel-time expert. You provide directed travel times between known locations as clean JSON and call out asymmetries. Do not emit PDDL.",
                "prompt": "Your name is map_expert. Use the public information to build a directed travel-time matrix in minutes. Include only locations present in the environment init. Return JSON with keys: locations (array), edges (array of {from, to, minutes}). Ensure the following: Presidio->Union Square is 22 minutes and Union Square->Presidio is 24 minutes. If any travel times are unknown, omit them rather than guessing."
            }
        },
        "calendar_planner": {
            "friend_availability": {
                "input": [],
                "output": "friend_windows",
                "system_prompt": "You are a calendar and constraints specialist. You enumerate availability windows and minimum durations in structured JSON. Do not emit PDDL.",
                "prompt": "Your name is calendar_planner. From the public information, construct a JSON object listing friends and their availability windows in 24h format, along with required minimum meeting durations in minutes. Include Andrew at Union Square available from 11:15 to 17:15 with a minimum meeting duration of 105 minutes. If any other friends are unknown, do not invent them; include only those publicly provided."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "candidate_schedules",
                    "travel_time_matrix",
                    "friend_windows"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert with PDDL problems and FastDownward. You must output a PDDL domain and a PDDL problem that encode a day-planning problem with time discretized in minutes, actions for travel and meeting, and constraints ensuring Andrew is met for at least 105 minutes during his window. Use a single agent (the traveler). Ensure FastDownward-compatible PDDL (STRIPS with numeric fluents or ADL where appropriate). Enclose the PDDL domain between <domain></domain> and the PDDL problem between <problem></problem>.",
                "prompt": "You will receive: 1) a directed travel-time matrix, 2) friends\u2019 availability windows and minimum durations, and 3) multiple candidate schedules proposed by the traveler. Select the best schedule that maximizes the number of friends met; if ties occur, minimize total travel time, then maximize total meeting time with Andrew. Then produce a PDDL domain and problem reflecting the chosen schedule and constraints. Requirements: domain should include types (location, friend, minute), predicates for current_location, met, time, at_window, and functions for time accounting; actions for travel and meet with appropriate preconditions and effects; problem should set the initial state with traveler at Presidio at 09:00, include locations and Andrew at Union Square with availability 11:15-17:15, enforce meeting Andrew for at least 105 minutes, and include the travel-time asymmetry (Presidio->UnionSquare=22, UnionSquare->Presidio=24). Include a clear goal specification consistent with maximizing friends met (at least Andrew) and satisfying the 105-minute constraint. Enclose outputs in <domain></domain> and <problem></problem> tags only."
            }
        },
        "constraints": [
            "map_expert.travel_time_matrix->traveler.candidate_schedules",
            "calendar_planner.friend_availability->traveler.candidate_schedules",
            "traveler.candidate_schedules->orchestrator.pddl",
            "map_expert.travel_time_matrix->orchestrator.pddl",
            "calendar_planner.friend_availability->orchestrator.pddl"
        ]
    }
}