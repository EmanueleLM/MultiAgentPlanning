{
    "name": "MeetingPlanningExample29",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "traveler",
            "city_mapper",
            "orchestrator"
        ],
        "traveler": {
            "private_information": [
                "I arrive at Sunset District at 09:00.",
                "I want to meet Nancy for at least 75 minutes this evening."
            ],
            "goal": "Maximize the number of friends I can meet in one day while guaranteeing a meeting with Nancy for at least 75 minutes within her availability window."
        },
        "city_mapper": {
            "private_information": [
                "I know travel times between districts.",
                "Travel time: Sunset District <-> Haight-Ashbury is 15 minutes each way."
            ],
            "goal": "Provide accurate travel-time information between districts to support feasible scheduling."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate schedule candidates and travel-time data, then produce a final PDDL domain and problem (for the Fast Downward solver) that models 15-minute time slots, travel, waiting, and a 75-minute meeting with Nancy within her availability window."
        }
    },
    "environment": {
        "init": {
            "time_unit": "15min",
            "start_location": "sunset_district",
            "arrival_time": "09:00",
            "minimum_meeting_minutes": 75,
            "meeting_target_friend": "Nancy",
            "locations": [
                "sunset_district",
                "haight_ashbury"
            ]
        },
        "public_information": [
            "Objective: You are visiting San Francisco for the day and want to meet as many friends as possible while ensuring a long meeting with Nancy.",
            "You arrive at Sunset District at 09:00.",
            "Nancy will be at Haight-Ashbury from 19:30 to 21:45.",
            "You want to meet Nancy for a minimum of 75 minutes (5 consecutive 15-minute slots).",
            "Travel distances (one-way, in minutes): Sunset District -> Haight-Ashbury: 15; Haight-Ashbury -> Sunset District: 15.",
            "Known locations: Sunset District, Haight-Ashbury.",
            "Time granularity for planning is 15 minutes per step."
        ]
    },
    "workflow": {
        "traveler": {
            "propose_schedules": {
                "input": [],
                "output": "candidate_itineraries",
                "system_prompt": "You are an expert day-planner and San Francisco local. Your task is to propose multiple feasible schedules for a single-day visit that start at 09:00 in Sunset District and ensure a 75-minute meeting (5 consecutive 15-minute slots) with Nancy at Haight-Ashbury within her availability window. Do not produce PDDL. Keep your output concise and structured.",
                "prompt": "Your name is traveler.\nPublic information:\n{environment->public_information}\nYour private knowledge:\n{agents->traveler->private_information}\nGlobal goal:\n{agents->traveler->goal}\nInstructions:\n- Use 15-minute time slots in 24-hour format (e.g., 09:00, 09:15, ...).\n- Start at Sunset District at 09:00.\n- Nancy is available at Haight-Ashbury from 19:30 to 21:45; schedule a continuous 75-minute meeting there (5 consecutive 15-minute slots).\n- Account for 15-minute travel time between Sunset and Haight.\n- Propose at least 3 different feasible schedules that could maximize friend meetings. If no other friends are specified, include flexible 'friend-slot' placeholders for potential meetings and ensure feasibility of reaching and returning if needed.\n- For each schedule, include: a name, ordered time blocks with start/end times, location, purpose (travel/wait/meet/friend-slot/meal/buffer), and a short rationale.\n- Keep the structure compact (JSON-like list of schedules)."
            }
        },
        "city_mapper": {
            "summarize_distances": {
                "input": [],
                "output": "city_travel_times",
                "system_prompt": "You are a cartographer and transportation analyst. Summarize travel times between known districts. Do not produce PDDL. Return a compact JSON-like mapping that can be consumed by a planner.",
                "prompt": "Your name is city_mapper.\nPublic information:\n{environment->public_information}\nYour private knowledge:\n{agents->city_mapper->private_information}\nGoal:\n{agents->city_mapper->goal}\nInstructions:\n- Provide symmetric travel times in minutes between the known districts.\n- Use canonical location keys: sunset_district, haight_ashbury.\n- Example shape:\n{\n  \"locations\": [\"sunset_district\", \"haight_ashbury\"],\n  \"times\": {\n    \"sunset_district\": {\"haight_ashbury\": 15},\n    \"haight_ashbury\": {\"sunset_district\": 15}\n  }\n}\n- Keep output minimal and machine-friendly."
            }
        },
        "orchestrator": {
            "synthesize_pddl": {
                "input": [
                    "candidate_itineraries",
                    "city_travel_times"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in PDDL modeling and planning for the Fast Downward solver. You will integrate high-level schedule candidates and travel-time data to produce a single coherent PDDL domain and problem that ensures feasibility and selects a schedule that maximizes meetings while satisfying a hard constraint: meet Nancy for at least 75 minutes (5 consecutive 15-minute slots) within her availability window at Haight-Ashbury.\nRequirements:\n- Target Fast Downward (classical planning). Use STRIPS-compatible constructs with typing. Avoid numeric fluents and durative actions. Use discrete time-slot objects and a successor relation to emulate time.\n- Use 15-minute slots as time objects (e.g., t0900, t0915, ..., t2145). Provide 'next' static facts to chain slots.\n- Predicates to include (at minimum):\n  - (at ?loc)\n  - (at-slot ?t)\n  - (next ?t ?t2) ; static\n  - (within-nancy-window ?t) ; for each slot where Nancy is available\n  - (at-haight ?loc) ; or use equality with typed locs\n  - (progress-p0), (progress-p1), ..., (progress-p5) ; to ensure 5 consecutive meeting steps\n- Actions to include (templates):\n  - wait: consumes (at-slot ?t) and produces (at-slot ?t2) if (next ?t ?t2)\n  - travel-sunset-haight and travel-haight-sunset: require current location and advance one slot (15 minutes) to change location accordingly\n  - meet-step-1..5: each requires (at haight_ashbury), (at-slot ?t), (within-nancy-window ?t), the current progress predicate (e.g., progress-p0), and (next ?t ?t2); effects advance to ?t2 and swap progress-p{i} to progress-p{i+1}\n- Initial state:\n  - (at sunset_district)\n  - (at-slot t0900)\n  - (progress-p0)\n  - all static (next ...) and (within-nancy-window ...) facts consistent with 19:30\u201321:45 window\n- Goal:\n  - (progress-p5) ; ensures full 75-minute meeting completed\n  - Optionally include predicates indicating visited friend slots if present in inputs to break ties toward schedules with more friends\n- Encode locations and time slots as typed objects. Keep names simple and consistent with inputs.\n- Enclose the PDDL domain between <domain></domain> and the PDDL problem between <problem></problem> tags. Output only these two tagged blocks.",
                "prompt": "Task context for orchestrator:\nPublic information:\n{environment->public_information}\nTraveler's schedule candidates:\n{candidate_itineraries}\nCity travel times:\n{city_travel_times}\nYour goal:\n{agents->orchestrator->goal}\nInstructions:\n- Integrate the inputs. If multiple candidate itineraries are feasible, prefer the one that meets the most friends (or most 'friend-slot' placeholders) while still guaranteeing the 75-minute Nancy meeting.\n- Construct a discrete-time PDDL domain and problem as specified in the system prompt. Ensure the 'next' chain covers from 09:00 to 21:45 in 15-minute steps and that (within-nancy-window ?t) is true exactly for slots starting at 19:30 through 21:30 inclusive.\n- Ensure actions are STRIPS-friendly and avoid features unsupported by Fast Downward durative/temporal planning. Time should advance only via wait/travel/meet-step actions across the 'next' relation.\n- Provide the final PDDL within <domain></domain> and <problem></problem> tags only."
            }
        },
        "constraints": [
            "traveler.propose_schedules->orchestrator.synthesize_pddl",
            "city_mapper.summarize_distances->orchestrator.synthesize_pddl"
        ]
    }
}