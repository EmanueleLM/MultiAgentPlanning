{
    "name": "TripPlanningExample10",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "route_planner",
            "constraints_checker",
            "orchestrator"
        ],
        "route_planner": {
            "private_information": [
                "Cities under consideration: Oslo (OSL), Dublin (DUB), Valencia (VLC)",
                "Available direct flights: Oslo-Dublin (both directions), Dublin-Valencia (both directions)",
                "Only direct flights are allowed between cities; no other routes",
                "Flights are considered to occur at day boundaries and do not consume a full day for the purposes of planning",
                "All three cities must be visited within the 9-day horizon"
            ],
            "goal": "Propose flight-leg-compatible city orders and transfer points that can realize the trip within 9 days using only the given direct flights."
        },
        "constraints_checker": {
            "private_information": [
                "The trip lasts exactly 9 consecutive days, labeled day 1 through day 9",
                "Desire to spend 3 days in Oslo",
                "Desire to spend 5 days in Valencia",
                "Plan to visit relatives in Valencia during days 5 through 9 inclusive",
                "Desire to spend 3 days in Dublin",
                "No city overlap is allowed on the same day",
                "Flights occur between days and do not consume a full day",
                "The starting city is flexible and must be one of the three cities"
            ],
            "goal": "Validate candidate routes and day allocations against the hard constraints, detect inconsistencies, and if infeasible propose minimal relaxations to obtain at least one feasible itinerary."
        },
        "orchestrator": {
            "private_information": [
                "Prioritize feasibility with hard constraints: 9-day horizon, direct-flight connectivity only, and being in Valencia on days 5 through 9 inclusive",
                "Treat exact day-count desires for Oslo and Dublin as preferences to satisfy if possible; otherwise consider softening them with costs",
                "Select one concrete start city and itinerary consistent with the flight graph and day assignments"
            ],
            "goal": "Produce a final PDDL domain and problem, suitable for the FastDownward solver, that encodes the 9-day trip scheduling task with allowed direct flights and required day allocations, enabling synthesis of a feasible plan."
        }
    },
    "environment": {
        "init": {
            "time_horizon_days": 9,
            "days_indexed_from": 1,
            "cities": [
                "oslo",
                "dublin",
                "valencia"
            ],
            "direct_flights": [
                [
                    "oslo",
                    "dublin"
                ],
                [
                    "dublin",
                    "oslo"
                ],
                [
                    "dublin",
                    "valencia"
                ],
                [
                    "valencia",
                    "dublin"
                ]
            ],
            "domain_hint": "TripScheduling"
        },
        "public_information": [
            "The traveler will visit three European cities: Oslo, Dublin, and Valencia.",
            "The total travel horizon is 9 days, from day 1 to day 9 inclusive.",
            "Only direct flights are taken. Available direct links are Oslo-Dublin and Dublin-Valencia in both directions.",
            "The traveler wants to spend 3 days in Oslo, 5 days in Valencia, and 3 days in Dublin.",
            "The traveler plans to visit relatives in Valencia during days 5 through 9 inclusive."
        ]
    },
    "workflow": {
        "route_planner": {
            "analyze_routes": {
                "input": [],
                "output": "routes",
                "system_prompt": "You are an expert trip route planner who analyzes flight graphs to produce feasible city visit orders under a fixed time horizon with direct flights only.",
                "prompt": "Your name is route_planner. Public information: {environment->public_information}. Your knowledge: {agents->route_planner->private_information}. Trip goal: {agents->route_planner->goal}. Think carefully about the direct flight graph and enumerate 2 to 4 candidate city sequences, including the start city, that could fit within the 9-day horizon, noting where transfers at Dublin are required. Provide your output as a concise JSON object with keys candidates, transfer_notes, and assumptions; do not produce PDDL."
            }
        },
        "constraints_checker": {
            "analyze_constraints": {
                "input": [
                    "routes"
                ],
                "output": "constraints_analysis",
                "system_prompt": "You are a scheduling constraints analyst who verifies feasibility, detects conflicts, and proposes minimal relaxations when needed.",
                "prompt": "Your name is constraints_checker. Public information: {environment->public_information}. Your knowledge: {agents->constraints_checker->private_information}. Trip goal: {agents->constraints_checker->goal}. You will receive candidate city sequences from the route_planner. For each sequence, assign days 1..9 to cities consistent with flights happening only at day boundaries. Validate hard constraints first: total of 9 days, no overlapping cities per day, relatives in Valencia during days 5..9, and allowed direct flights only. If conflicts make the plan infeasible, propose minimal relaxations that would make at least one sequence feasible and rank the options. Return a concise JSON object with keys feasible, assignments, conflicts, and relaxation_options; do not produce PDDL."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "routes",
                    "constraints_analysis"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in compiling trip scheduling into classical PDDL for the FastDownward planner. Always output a PDDL domain and a PDDL problem enclosed in <domain></domain> and <problem></problem> tags. Use a STRIPS-compatible encoding. Model days as a finite sequence and cities as objects. Include a predicate that captures being in a city on a given day, and movement actions that are permitted only along the given direct-flight edges at day boundaries. Encode hard constraints: horizon of exactly 9 days, presence in Valencia on days 5..9 inclusive, and direct flights only. If the exact 3-day desires for Oslo and Dublin can be satisfied together, encode them as hard goals; otherwise encode them as soft preferences using action costs so the problem remains solvable by FastDownward. Ensure the objects, initial state, and goal reflect one selected feasible candidate from the inputs.",
                "prompt": "You receive candidate routes and a constraints analysis. Public information: {environment->public_information}. Your knowledge: {agents->orchestrator->private_information}. Global goal: {agents->orchestrator->goal}. Inputs from route_planner: {routes}. Inputs from constraints_checker: {constraints_analysis}. Integrate them, choose a start city, and produce a final PDDL domain and problem targeting the FastDownward solver. Keep the PDDL self-contained and solvable; if necessary, include action costs to express soft preferences for the Oslo and Dublin day-count desires while enforcing hard constraints for total days, direct flights, and being in Valencia on days 5..9. Enclose the PDDL domain between <domain></domain> and the PDDL problem between <problem></problem>."
            }
        },
        "constraints": [
            "route_planner.analyze_routes->constraints_checker.analyze_constraints",
            "route_planner.analyze_routes->orchestrator.pddl",
            "constraints_checker.analyze_constraints->orchestrator.pddl"
        ]
    }
}