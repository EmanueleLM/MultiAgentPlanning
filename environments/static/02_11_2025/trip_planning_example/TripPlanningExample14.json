{
    "name": "TripPlanningExample14",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "route_planner",
            "calendar_checker",
            "orchestrator"
        ],
        "route_planner": {
            "private_information": [
                "I maintain the flight graph between the cities.",
                "Direct flights exist only between Lyon and Frankfurt, and between Frankfurt and Krakow.",
                "There is no direct flight between Lyon and Krakow.",
                "City set under consideration: Lyon (LYS), Frankfurt (FRA), Krakow (KRK)."
            ],
            "goal": "Assemble a feasible 10-day routing using only direct flights and the given flight graph, noting any necessary transfers and feasibility limitations."
        },
        "calendar_checker": {
            "private_information": [
                "Annual show in Krakow occurs on trip days 8, 9, and 10.",
                "To attend the show, the traveler must be physically in Krakow on days 8, 9, and 10.",
                "Hard requirement: Spend 7 days in Lyon across the 10-day trip.",
                "Hard requirement: Spend 3 days in Krakow across the 10-day trip.",
                "Soft preference: Visit Frankfurt for 2 days if and only if it does not violate the hard requirements."
            ],
            "goal": "Validate and codify day-by-day occupancy requirements, distinguishing hard constraints from soft preferences and identifying any conflicts."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Produce a final PDDL domain and problem for a 10-day trip that satisfies hard constraints and uses only direct flights; encode days 1-7 in Lyon and days 8-10 in Krakow, allowing movements only along direct edges, and include the Frankfurt 2-day visit only if feasible."
        }
    },
    "environment": {
        "init": {
            "trip_length": 10,
            "days_indexing": "1-based inclusive",
            "cities": [
                "lyon",
                "frankfurt",
                "krakow"
            ],
            "direct_flights": [
                [
                    "lyon",
                    "frankfurt"
                ],
                [
                    "frankfurt",
                    "lyon"
                ],
                [
                    "frankfurt",
                    "krakow"
                ],
                [
                    "krakow",
                    "frankfurt"
                ]
            ]
        },
        "public_information": [
            "The trip lasts 10 days total (days 1 through 10).",
            "Cities to visit: Lyon, Frankfurt, Krakow.",
            "Direct flights exist between Lyon and Frankfurt, and between Frankfurt and Krakow; there is no direct flight between Lyon and Krakow.",
            "Hard constraints: Spend 7 days in Lyon; spend 3 days in Krakow; be in Krakow on days 8, 9, and 10 to attend the annual show.",
            "Soft preference: Visit Frankfurt for 2 days if and only if the hard constraints remain satisfied.",
            "Only direct flights are allowed to commute between cities."
        ]
    },
    "workflow": {
        "route_planner": {
            "analysis": {
                "input": [],
                "output": "route_analysis",
                "system_prompt": "You are a travel-routing analyst. Your task is to synthesize the flight graph and movement constraints for the trip. Do not produce PDDL. Provide a concise JSON object with keys: graph (adjacency list of direct flights, undirected), transfers (rules about permissible city transitions between consecutive days using only direct flights), assumptions (explicitly call out the need to route via Frankfurt between Lyon and Krakow), feasibility_notes (flag any incompatibilities between requested stays and flight connectivity).",
                "prompt": "Your name is route_planner. You see the following public information: {environment->public_information}. You also have the following knowledge: {agents->route_planner->private_information}. Provide the JSON object described in the system prompt. Keep it machine-readable with double-quoted keys."
            }
        },
        "calendar_checker": {
            "calendar": {
                "input": [],
                "output": "calendar_summary",
                "system_prompt": "You are a trip calendar analyst. Do not produce PDDL. Output a concise JSON object with keys: hard_requirements (explicit day-city assignments that must hold), soft_preferences (desires that may be omitted if infeasible), totals (required day counts by city), remarks (any conflicts you detect such as over-constrained totals).",
                "prompt": "Your name is calendar_checker. You see the following public information: {environment->public_information}. You also have the following knowledge: {agents->calendar_checker->private_information}. Construct the JSON object described in the system prompt, making days 8, 9, and 10 fixed in Krakow and marking the Frankfurt 2-day visit as a soft preference. Note any unresolvable conflicts if totals exceed the trip length."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "route_analysis",
                    "calendar_summary"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in multi-agent planning and PDDL modeling targeting the FastDownward solver. Integrate the inputs to produce a single solvable classical PDDL domain and problem that encodes a 10-day city-by-day itinerary with cities {lyon, frankfurt, krakow}, days d1..d10, and direct-flight constraints. Only allow city changes between consecutive days if a direct flight exists between the cities; to go from Lyon to Krakow, the plan must route via Frankfurt using permitted segments. Treat the Lyon 7-day stay and Krakow on days 8-10 as hard constraints; treat the 2-day Frankfurt visit as a soft preference that should only be included if it does not violate hard constraints. Enclose the PDDL domain within <domain></domain> and the PDDL problem within <problem></problem>. The domain should define predicates for city, day, next(day, day), edge(city, city), and at(day, city), and actions to assign or move such that a valid itinerary can be constructed; the problem should instantiate objects for d1..d10 and the three cities, include the edge and next relations, and specify goals that fix days 1-7 to Lyon and days 8-10 to Krakow. Ensure the output is directly consumable by FastDownward.",
                "prompt": "You will receive structured inputs: the flight graph and transfer policies from route_planner as {route_analysis} and the calendar constraints from calendar_checker as {calendar_summary}. Produce the PDDL domain and problem exactly as requested in the system prompt. If the Frankfurt 2-day preference is infeasible given the 10-day horizon and hard requirements, omit it and proceed with a feasible plan; otherwise, include it and adjust earlier days accordingly while respecting flight connectivity."
            }
        },
        "constraints": [
            "route_planner.analysis->orchestrator.pddl",
            "calendar_checker.calendar->orchestrator.pddl"
        ]
    }
}