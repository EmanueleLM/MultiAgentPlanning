{
    "name": "TripPlanningExample16",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "flight_planner",
            "itinerary_builder",
            "orchestrator"
        ],
        "flight_planner": {
            "private_information": [
                "I specialize in extracting and validating direct flight connections.",
                "I will not emit PDDL; I only provide a clear flight graph and related constraints."
            ],
            "goal": "Produce a precise, minimal flight graph capturing only direct connections between the given cities."
        },
        "itinerary_builder": {
            "private_information": [
                "I specialize in constructing feasible multi-day itineraries under travel constraints.",
                "I will not emit PDDL; I provide concrete day-by-day schedules and explain any constraint trade-offs."
            ],
            "goal": "Build a feasible 9-day itinerary that respects direct-flight connectivity, satisfies the mandatory workshop window in Prague, assigns 3 days in Prague, assigns 3 days in Vienna, and allocates remaining days to Porto while acknowledging that 5 days in Porto may be unattainable within 9 total days."
        },
        "orchestrator": {
            "private_information": [
                "I coordinate the other agents' outputs and produce the final PDDL artifacts for planning."
            ],
            "goal": "Integrate the flight graph and candidate itineraries into a final PDDL domain and problem suitable for the FastDownward solver, ensuring that the plan encodes a valid 9-day trip using only direct flights and meeting mandatory constraints."
        }
    },
    "environment": {
        "init": {
            "days_total": 9,
            "cities": [
                "Prague",
                "Vienna",
                "Porto"
            ],
            "workshop_days_in_prague": [
                1,
                2,
                3
            ],
            "direct_flights": [
                [
                    "Vienna",
                    "Porto"
                ],
                [
                    "Porto",
                    "Vienna"
                ],
                [
                    "Prague",
                    "Vienna"
                ],
                [
                    "Vienna",
                    "Prague"
                ]
            ]
        },
        "public_information": [
            "Trip length is 9 consecutive days labeled day 1 through day 9.",
            "Cities to visit: Prague, Vienna, Porto.",
            "Direct flights exist between Vienna and Porto and between Prague and Vienna; only direct flights may be used to commute.",
            "You must be in Prague on days 1, 2, and 3 to attend a workshop.",
            "You want to spend 3 total days in Prague.",
            "You plan to stay in Vienna for 3 days.",
            "You want to spend 5 days in Porto.",
            "If all desires cannot fit into 9 days, treat the workshop window in Prague and the 3-day stays in Prague and Vienna as hard constraints and allocate any remaining days to Porto as a best-effort soft preference.",
            "Air travel may occur only on days where a direct flight exists between the departure and arrival cities."
        ]
    },
    "workflow": {
        "flight_planner": {
            "analyze_flights": {
                "input": [],
                "output": "flight_graph",
                "system_prompt": "You are an expert flight network analyst. Given public information about cities and direct connections, produce a concise, unambiguous representation of the directed flight graph and any constraints that arise from it. Do not produce PDDL; provide a human-readable and machine-parseable summary of nodes, edges (as ordered pairs), and a brief rationale that confirms no other direct routes are allowed.",
                "prompt": "Your name is flight_planner. Use the following public information to build the exact direct-flight graph with both directions where specified: {environment->public_information}. Output a compact description including: 1) list of cities, 2) list of directed edges for direct flights only, 3) statement that no other flight edges are permitted."
            }
        },
        "itinerary_builder": {
            "propose_itineraries": {
                "input": [
                    "flight_graph"
                ],
                "output": "candidate_itineraries",
                "system_prompt": "You are an expert itinerary planner. Using a flight graph and the trip constraints, construct at least one feasible 9-day plan that only uses direct flights, satisfies the mandatory Prague workshop on days 1-3, allocates 3 days in Prague and 3 days in Vienna, and then assigns the remaining days to Porto as a best-effort soft preference. Identify any infeasibilities with the desired 5 days in Porto and clearly present a concrete day-by-day city assignment and the flight days. Do not produce PDDL.",
                "prompt": "Your name is itinerary_builder. You are in an environment with the following public information: {environment->public_information}. You also have the following flight graph: {flight_graph}. Generate at least one concrete 9-day schedule listing the city for each day, and the days on which flights occur. Ensure that days 1-3 are in Prague, exactly 3 days are in Prague, exactly 3 days are in Vienna, and flights follow only the provided direct connections. If the desire to spend 5 days in Porto cannot be met within 9 total days, explain the trade-off and allocate all remaining days to Porto. Provide a short feasibility check and a final recommended itinerary."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "flight_graph",
                    "candidate_itineraries"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert with multi-agent PDDL problems targeting the FastDownward solver. You always provide a PDDL domain and a PDDL problem that encode the scheduling and movement constraints for a single traveler across 9 days, with cities as locations and days as discrete steps. Encode actions for staying in place and taking a flight that is permitted only if a direct edge exists in the provided flight graph. Encode hard constraints that require the traveler to be in Prague on days 1-3, to spend exactly 3 days in Prague and exactly 3 days in Vienna overall, and to use only direct flights between days. Treat the desire to spend 5 days in Porto as a soft preference that cannot override hard constraints; the chosen problem instance should reflect a feasible itinerary from the candidates. Always enclose the PDDL domain between <domain></domain> and the PDDL problem between <problem></problem> and ensure the output is compatible with FastDownward.",
                "prompt": "There are two helper agents that provided information you must integrate to produce a final planning model. Here is the flight graph: {flight_graph}. Here are the candidate itineraries and feasibility notes: {candidate_itineraries}. Using this information, produce a final PDDL domain and PDDL problem that encode a 9-day travel plan for one traveler with cities Prague, Vienna, and Porto, days 1-9, direct-flight constraints, mandatory presence in Prague for days 1-3, exactly 3 total days in Prague, exactly 3 total days in Vienna, and all movement restricted to the given direct flights. Select a feasible candidate itinerary as the target goal condition or encode equivalent constraints so that the planner can find a plan consistent with it. The output must target the FastDownward solver and be enclosed in <domain></domain> and <problem></problem> tags."
            }
        },
        "constraints": [
            "flight_planner.analyze_flights->itinerary_builder.propose_itineraries",
            "flight_planner.analyze_flights->orchestrator.pddl",
            "itinerary_builder.propose_itineraries->orchestrator.pddl"
        ]
    }
}