{
    "name": "Blocksworld12",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "state_modeler",
            "instance_builder",
            "auditor",
            "orchestrator"
        ],
        "state_modeler": {
            "private_information": [
                "I specialize in action schemas, predicates, invariants, and causal structure.",
                "I do not produce PDDL; I produce structured semantic specifications."
            ],
            "goal": "Extract a clean, implementation-ready semantic model of the Blocks World actions and state predicates from the public information."
        },
        "instance_builder": {
            "private_information": [
                "I specialize in converting natural language task descriptions into grounded instances with objects, initial state, goals, and optional human plans.",
                "I do not produce PDDL; I produce structured problem instances."
            ],
            "goal": "Turn the scenarios into precise grounded instances listing blocks, initial facts, goals, and the provided plan for scenario 1."
        },
        "auditor": {
            "private_information": [
                "I audit temporal and causal consistency against the semantic model and instances.",
                "I remove bookkeeping shortcuts, quota tokens, and post-hoc penalties; I check step-by-step preconditions and effects.",
                "I do not produce PDDL; I produce an audit report and normalized traces."
            ],
            "goal": "Validate that the human plan for scenario 1 is causally correct under the specified actions, ensure no bookkeeping shortcuts are used, and provide normalized corrections and invariants to guide compilation."
        },
        "orchestrator": {
            "private_information": [
                "I integrate semantic specifications, instances, and audit findings.",
                "I compile the final PDDL domain and problem files for use with the FastDownwards solver."
            ],
            "goal": "Produce a final PDDL domain and PDDL problem for each scenario that is consistent with the semantics and audit findings and that runs on FastDownwards."
        }
    },
    "environment": {
        "init": {
            "max_blocks": 4,
            "visibility": 1
        },
        "public_information": [
            "You are arranging blocks into stacks. Available actions: pick up a block; unstack a block from on top of another block; put down a block; stack a block on top of another block.",
            "Restrictions: only one block can be picked up or unstacked at a time; you can only pick up or unstack a block if your hand is empty; you can only pick up a block if the block is on the table and the block is clear; a block is clear if no other block is on top of it and it is not being held; you can only unstack a block from on top of another block if it was actually on top of the other block; you can only unstack a block if it is clear; once you pick up or unstack a block you are holding it; you can only put down a block that you are holding; you can only stack a block on top of another block if you are holding the block being stacked; you can only stack a block on top of another block if the destination block is clear; once you put down or stack a block your hand becomes empty; once you stack a block on another, the destination block is no longer clear.",
            "Scenario 1 initial state: orange is clear; yellow is clear; hand is empty; orange is on blue; yellow is on red; red is on the table; blue is on the table.",
            "Scenario 1 goal: red is on blue.",
            "Scenario 1 provided plan: unstack orange from blue; put down orange; unstack yellow from red; put down yellow; pick up red; stack red on blue.",
            "Scenario 2 initial state: red is clear; hand is empty; red is on blue; blue is on orange; orange is on yellow; yellow is on the table.",
            "Scenario 2 goal: blue is on orange; orange is on yellow; yellow is on red.",
            "Blocks present across scenarios: red, blue, orange, yellow."
        ]
    },
    "workflow": {
        "state_modeler": {
            "semantics": {
                "input": [],
                "output": "semantics_spec",
                "system_prompt": "You are an expert action-modeler. From the public information, produce a single JSON object that captures a clean semantic model for Blocks World without using PDDL. The JSON must include: domain_name, types (with type 'block'), predicates (list of predicate signatures such as clear, on, ontable, holding, handempty), actions (pick-up, put-down, stack, unstack) where each action has parameters, preconditions (positive literals only), and effects with add and delete lists. Encode the standard STRIPS-style version of Blocks World that matches the restrictions described; do not add derived predicates or conditional effects; do not invent extra bookkeeping symbols. Keep names lower_snake_case. Do not emit PDDL.",
                "prompt": "Your name is state_modeler. Use the environment public information to define the canonical Blocks World semantics. Respect the constraints exactly. Output a single JSON object with keys: domain_name, types, predicates, actions, invariants. Invariants should capture that a block cannot be simultaneously on two things, cannot be both clear and have something on it, and at most one block is held at a time. Do not emit PDDL or natural language; only the JSON structure."
            }
        },
        "instance_builder": {
            "case1_instances": {
                "input": [],
                "output": "instances_case1",
                "system_prompt": "You translate task descriptions into grounded instances. Do not emit PDDL. Produce a compact JSON object with fields: name, objects, init, goal, and human_plan. Use objects as the four blocks red, blue, orange, yellow with type block. The init and goal must be lists of atomic facts adhering to the predicates of the semantic model (e.g., on, ontable, clear, holding, handempty). Ensure the facts match Scenario 1 exactly. Encode the provided human plan as a list of grounded actions with parameters in order.",
                "prompt": "Create the grounded instance for Scenario 1 described in the environment public information. Use lower_snake_case for all atoms and action names. Represent hand empty as handempty. Represent the table relation as ontable(block). Do not emit PDDL; only the JSON structure."
            },
            "case2_instances": {
                "input": [],
                "output": "instances_case2",
                "system_prompt": "You translate task descriptions into grounded instances. Do not emit PDDL. Produce a compact JSON object with fields: name, objects, init, goal, and human_plan. Use objects as the four blocks red, blue, orange, yellow with type block. The init and goal must be lists of atomic facts adhering to the predicates of the semantic model (e.g., on, ontable, clear, holding, handempty). For Scenario 2 there is no provided plan; set human_plan to an empty list.",
                "prompt": "Create the grounded instance for Scenario 2 described in the environment public information. Use lower_snake_case atoms matching the semantic model. Represent hand empty as handempty and the table relation as ontable(block). Do not emit PDDL; only the JSON structure."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "semantics_spec",
                    "instances_case1",
                    "instances_case2"
                ],
                "output": "audit_report",
                "system_prompt": "You are a temporal and causal auditor. You check the human plan in Scenario 1 step by step against the provided semantics and initial state. You ensure no bookkeeping shortcuts like quota tokens or post-hoc penalties are used; only the declared predicates and action schemas may appear. You produce a JSON report with keys: case1 {plan_valid (bool), violations (list with step index and description), normalized_plan (list), derived_trace (list of states or deltas), notes}, case2 {notes about readiness}, global_invariants (list), and normalization_rules (list) that explain any renamings or literal normalizations you applied. Do not emit PDDL.",
                "prompt": "Validate Scenario 1 plan and provide normalization and invariant guidance. If a violation is found, propose a corrected normalized_plan consistent with the semantics. For Scenario 2, just confirm that the instance is well-formed and ready. Keep output strictly as the specified JSON structure."
            }
        },
        "orchestrator": {
            "pddl_case1": {
                "input": [
                    "semantics_spec",
                    "instances_case1",
                    "audit_report"
                ],
                "output": "pddl_case1",
                "system_prompt": "You are an expert with compiling multi-source specifications into PDDL for the FastDownwards solver. You always provide exactly one PDDL domain and one PDDL problem. You always enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags. Target FastDownwards by using :requirements :strips :typing and by avoiding conditional effects and quantifiers. Use a canonical Blocks World domain with predicates: on, ontable, clear, holding, handempty, and actions: pick-up, put-down, stack, unstack, with preconditions and effects consistent with the audit-approved semantics. Ensure object types and names match the instance. The problem must include :objects, :init, and :goal consistent with the Scenario 1 instance.",
                "prompt": "Integrate the semantic model, Scenario 1 instance, and the audit findings. If the audit proposes normalizations, apply them consistently. Produce the final PDDL domain and the Scenario 1 PDDL problem wrapped in <domain> and <problem> tags respectively. Ensure compatibility with FastDownwards."
            },
            "pddl_case2": {
                "input": [
                    "semantics_spec",
                    "instances_case2",
                    "audit_report"
                ],
                "output": "pddl_case2",
                "system_prompt": "You are an expert with compiling multi-source specifications into PDDL for the FastDownwards solver. You always provide exactly one PDDL domain and one PDDL problem. You always enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags. Target FastDownwards by using :requirements :strips :typing and by avoiding conditional effects and quantifiers. Use a canonical Blocks World domain with predicates: on, ontable, clear, holding, handempty, and actions: pick-up, put-down, stack, unstack, with preconditions and effects consistent with the audit-approved semantics. Ensure object types and names match the instance. The problem must include :objects, :init, and :goal consistent with the Scenario 2 instance.",
                "prompt": "Integrate the semantic model and Scenario 2 instance with audit guidance. Produce the final PDDL domain and the Scenario 2 PDDL problem wrapped in <domain> and <problem> tags respectively. Ensure compatibility with FastDownwards."
            }
        },
        "constraints": [
            "state_modeler.semantics->auditor.audit",
            "instance_builder.case1_instances->auditor.audit",
            "instance_builder.case2_instances->auditor.audit",
            "state_modeler.semantics->orchestrator.pddl_case1",
            "instance_builder.case1_instances->orchestrator.pddl_case1",
            "auditor.audit->orchestrator.pddl_case1",
            "state_modeler.semantics->orchestrator.pddl_case2",
            "instance_builder.case2_instances->orchestrator.pddl_case2",
            "auditor.audit->orchestrator.pddl_case2"
        ]
    }
}