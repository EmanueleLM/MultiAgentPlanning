{
    "name": "Blocksworld18",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "world_modeler",
            "auditor",
            "problem_curator",
            "orchestrator"
        ],
        "world_modeler": {
            "private_information": [
                "You specialize in extracting symbols, predicates, and action schemas from natural language.",
                "You normalize object names and de-duplicate facts.",
                "You never output PDDL; you provide structured facts and action blueprints."
            ],
            "goal": "Extract canonical objects, predicates, and action schema signatures for Blocks World. Produce normalized initial and goal facts for each statement and summarize the provided plan for Statement 1."
        },
        "auditor": {
            "private_information": [
                "You audit temporal and causal consistency without allowing bookkeeping shortcuts such as quota tokens, post-hoc penalties, or fabricated state resets.",
                "You verify action preconditions and effects against the stated restrictions and detect illegal actions or missing preconditions/effects.",
                "You compute invariants (e.g., at most one holding, exclusivity between ontable and on relations) and remove inconsistencies."
            ],
            "goal": "Validate the Statement 1 plan against the restrictions, derive invariants, and provide a cleaned set of constraints and clarifications to ensure causal correctness for planning."
        },
        "problem_curator": {
            "private_information": [
                "You choose the target planning problem to solve based on the human specification.",
                "You assemble the final set of objects, initial state facts, and goal facts for the chosen target problem.",
                "You never output PDDL; you provide a solver-ready fact set and mapping to action schemas."
            ],
            "goal": "Designate Statement 2 as the target problem (since it lacks a plan), compile its objects, initial facts, and goal facts, and align them to the Blocks World action schemas."
        },
        "orchestrator": {
            "private_information": [
                "You coordinate multi-agent inputs and produce a single final PDDL domain and problem for FastDownward.",
                "You must keep actions consistent with Blocks World restrictions and use standard predicates (on, ontable, clear, holding, handempty).",
                "You ensure the output is classical STRIPS (optionally typed) and solvable by FastDownward."
            ],
            "goal": "Integrate the extracted symbols, audited invariants, and curated target problem into a final PDDL domain and problem enclosed in <domain></domain> and <problem></problem> tags, suitable for FastDownward."
        }
    },
    "environment": {
        "init": {
            "workspace": "tabletop",
            "max_holding": 1,
            "blocks_count": 4,
            "deterministic": true
        },
        "public_information": [
            "Available actions: pick up a block; unstack a block from on top of another block; put down a block; stack a block on top of another block.",
            "Restrictions: (1) Only one block can be picked up or unstacked at a time. (2) Picking up or unstacking requires the hand to be empty. (3) Picking up requires the block to be on the table and clear. (4) Unstacking requires that the block was on top of the other block. (5) Unstacking requires the block being unstacked to be clear. (6) After pick up or unstack, the agent is holding the block. (7) Put down only if holding. (8) Stack only if holding the block to be stacked. (9) Stack only onto a clear block. (10) After put down or stack, the hand becomes empty. (11) After stacking a block on a second block, the second block is no longer clear.",
            "Statement 1 initial conditions: blue is clear; orange is clear; hand is empty; red is on top of yellow; orange is on top of red; blue is on the table; yellow is on the table.",
            "Statement 1 goal: red on top of blue; orange on top of red; yellow on top of orange.",
            "Statement 1 provided plan (sequence): unstack orange from red; put down orange; unstack red from yellow; stack red on blue; pick up orange; stack orange on red; pick up yellow; stack yellow on orange.",
            "Statement 2 initial conditions: blue is clear; orange is clear; hand is empty; blue is on top of yellow; orange is on top of red; red is on the table; yellow is on the table.",
            "Statement 2 goal: blue on top of red; orange on top of yellow; yellow on top of blue.",
            "Target to solve: Statement 2 (no plan provided)."
        ]
    },
    "workflow": {
        "world_modeler": {
            "extract": {
                "input": [],
                "output": "model_facts",
                "system_prompt": "You are a symbolic knowledge engineer for Blocks World. From the provided public information, extract canonical symbols, predicates, and parameterized action schemas in natural language, and normalize the two statements into fact sets. Do not output PDDL.",
                "prompt": "Your name is world_modeler. Use the environment public information to produce a concise, machine-usable summary including: (a) objects (block names), (b) predicates you will use (on(x,y), ontable(x), clear(x), holding(x), handempty), (c) action schemas in parameterized natural language with preconditions and effects respecting the restrictions, (d) Statement 1 initial facts and goal facts, (e) Statement 1 plan as an ordered list of grounded actions, (f) Statement 2 initial facts and goal facts. Keep names canonical (blue, orange, red, yellow)."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "model_facts"
                ],
                "output": "audit_report",
                "system_prompt": "You are a temporal/causal consistency auditor for Blocks World. You verify that each action in a plan is applicable given its preconditions and that effects update the state as required. You disallow bookkeeping shortcuts such as quota tokens or post-hoc penalties and enforce invariants.",
                "prompt": "Your name is auditor. Given the extracted model facts, check Statement 1's plan for legality step by step, citing any violations and corrections. Summarize invariants such as: (i) each block is either ontable or on exactly one other block, (ii) a block cannot be both ontable and on something, (iii) at most one block is held at a time, (iv) handempty xor holding(some). Provide a cleaned set of invariant statements and any clarifications needed for the final planner."
            }
        },
        "problem_curator": {
            "curate": {
                "input": [
                    "model_facts",
                    "audit_report"
                ],
                "output": "target_problem",
                "system_prompt": "You curate the final problem instance to be solved. You select Statement 2 as the target and produce the exact objects, initial facts, and goal facts aligned to the action schemas.",
                "prompt": "Your name is problem_curator. Using the model facts and the auditor's invariants, compile the target problem from Statement 2. Output: (1) objects list [blue, orange, red, yellow], (2) initial facts consistent with the restrictions and model (include on, ontable, clear, handempty as appropriate), (3) goal facts from Statement 2. Do not output PDDL. Make sure the facts are consistent (e.g., a block on another is not ontable; clear applies only to blocks with nothing on top)."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "model_facts",
                    "audit_report",
                    "target_problem"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert PDDL integrator targeting the FastDownward solver. You must output exactly one PDDL domain and one PDDL problem, enclosed in <domain></domain> and <problem></problem> tags. Use classical STRIPS (optionally :typing). Domain name: blocksworld. Predicates: (on ?x ?y), (ontable ?x), (clear ?x), (holding ?x), (handempty). Actions: pickup, putdown, stack, unstack with preconditions and effects that enforce the provided restrictions. Problem name: bw18-problem-2. Use objects blue, orange, red, yellow of type block if typing is enabled. Initialize and set goals from target_problem. Ensure consistency with auditor invariants. The output must be directly parsable by FastDownward.",
                "prompt": "Integrate the extracted symbols, audited invariants, and the curated Statement 2 facts to produce the final PDDL. Keep to standard Blocks World encodings compatible with FastDownward. Enclose the PDDL domain in <domain></domain> and the PDDL problem in <problem></problem> tags."
            }
        },
        "constraints": [
            "world_modeler.extract->auditor.audit",
            "world_modeler.extract->problem_curator.curate",
            "auditor.audit->problem_curator.curate",
            "world_modeler.extract->orchestrator.pddl",
            "auditor.audit->orchestrator.pddl",
            "problem_curator.curate->orchestrator.pddl"
        ]
    }
}