{
    "name": "Blocksworld23",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "blocks_modeler",
            "consistency_auditor",
            "orchestrator"
        ],
        "blocks_modeler": {
            "private_information": [
                "Expertise in Blocks World abstractions, symbolic predicates, and grounded state enumeration.",
                "Can express domains as structured JSON with predicates, actions, preconditions, and effects without using PDDL."
            ],
            "goal": "Produce a clean symbolic domain specification for Blocks World and candidate plans for the scenarios, expressed as structured JSON facts and action schemas."
        },
        "consistency_auditor": {
            "private_information": [
                "Role: audit temporal and causal consistency; remove bookkeeping shortcuts; ensure no quota tokens, post-hoc penalties, or non-causal jumps are used.",
                "Can transform human plans into fully grounded step-by-step traces with preconditions and effects and reject invalid steps."
            ],
            "goal": "Audit the domain and candidate plans for correctness against the stated restrictions; produce a corrected, fully causal execution trace and validated initial/goal fact sets for each scenario."
        },
        "orchestrator": {
            "private_information": [
                "Coordinator for all agents.",
                "Responsible for generating the final PDDL domain and problem files targeting the Fast Downward planner."
            ],
            "goal": "Integrate audited specifications and produce a final PDDL domain and problem files suitable for Fast Downward."
        }
    },
    "environment": {
        "init": {
            "blocks": [
                "red",
                "blue",
                "yellow",
                "orange"
            ],
            "max_stack_height": 4,
            "visibility": 1
        },
        "public_information": [
            "Domain: Blocks World with actions pick-up, put-down, unstack, stack.",
            "Restrictions: Only one block can be picked up or unstacked at a time; the hand must be empty to pick-up or unstack; pick-up requires the block to be clear and on the table; unstack requires the top block to be clear and actually on the other block; picking up or unstacking makes the agent hold the block; put-down requires holding; stack requires holding and the destination block to be clear; after put-down or stack the hand becomes empty; stacking on a block makes that block not clear.",
            "Scenario A initial state: clear(red); handempty; on(red, blue); on(blue, yellow); on(yellow, orange); ontable(orange).",
            "Scenario A goal: on(orange, red) and on(yellow, blue).",
            "Scenario A provided human plan: unstack red from blue; put down red; unstack blue from yellow; put down blue; unstack yellow from orange; stack yellow on blue; pick up orange; stack orange on red.",
            "Scenario B initial state: clear(orange); clear(yellow); handempty; on(blue, red); on(yellow, blue); ontable(red); ontable(orange).",
            "Scenario B goal: on(blue, yellow).",
            "Symbols and conventions: clear(x) means no block on x and x is not being held; handempty means no block is held; on(x, y) means x is directly on y; ontable(x) means x is directly on the table; holding(x) means the hand holds x."
        ]
    },
    "workflow": {
        "blocks_modeler": {
            "specify_domain": {
                "input": [],
                "output": "domain_spec",
                "system_prompt": "You are a Blocks World domain modeler; provide a precise, machine-readable symbolic domain without using PDDL.",
                "prompt": "Your name is blocks_modeler. Use the public information to produce a structured JSON specification that includes: (1) a list of predicates among {clear(x), on(x,y), ontable(x), holding(x), handempty}; (2) action schemas for pick-up(x), put-down(x), unstack(x,y), stack(x,y) each with preconditions and add/delete effects aligned with the restrictions; and (3) state templates for Scenario A and Scenario B (initial facts and goal facts) using the given symbols. Do not emit PDDL; output a single JSON object matching keys: predicates, actions, scenarios with {A:{init:[], goal:[]}, B:{init:[], goal:[]}}."
            },
            "propose_plan_scenario_A": {
                "input": [],
                "output": "candidate_plan_A",
                "system_prompt": "You are a Blocks World planner that proposes candidate plans as lists of grounded actions without using PDDL.",
                "prompt": "Your name is blocks_modeler. Using the public information and especially the Scenario A initial and goal states, propose a candidate plan as a JSON list of grounded steps using the schema {action: string, args: [..]} that corresponds to the human plan but corrected if necessary for causal validity. Do not emit PDDL."
            },
            "propose_plan_scenario_B": {
                "input": [],
                "output": "candidate_plan_B",
                "system_prompt": "You are a Blocks World planner that proposes candidate plans as lists of grounded actions without using PDDL.",
                "prompt": "Your name is blocks_modeler. Using the public information and the Scenario B initial and goal states, propose a candidate plan as a JSON list of grounded steps using the schema {action: string, args: [..]} that achieves the stated goal while obeying all restrictions. Do not emit PDDL."
            }
        },
        "consistency_auditor": {
            "audit": {
                "input": [
                    "domain_spec",
                    "candidate_plan_A",
                    "candidate_plan_B"
                ],
                "output": "audited_trace",
                "system_prompt": "You are a rigorous temporal and causal consistency auditor for Blocks World; you remove bookkeeping shortcuts, enforce precondition satisfaction, and provide stepwise state transitions.",
                "prompt": "Your name is consistency_auditor. Given the domain_spec, candidate_plan_A, and candidate_plan_B, validate each step against preconditions and effects; provide for each scenario a corrected plan if needed and a complete step-by-step trace of states after each action using clear, on, ontable, holding, handempty; ensure no action is taken without required preconditions; ensure exclusivity constraints such as one block per hand and consistent clear flags; output a JSON object with keys A and B; each contains {valid: boolean, corrections: [], trace: [{action, args, state_after: []}], init: [], goal: []}; reject any non-causal jump or quota token; no PDDL."
            }
        },
        "orchestrator": {
            "synthesize_pddl_s1": {
                "input": [
                    "audited_trace"
                ],
                "output": "pddl_scenario_A",
                "system_prompt": "You are an expert with PDDL for Fast Downward. You always provide a PDDL domain and a PDDL problem file to solve the task. You always enclose the PDDL domain between <domain></domain> tags, and the PDDL problem between <problem></problem> tags.",
                "prompt": "Your name is orchestrator. Using the audited_trace for Scenario A and the public information, produce a classic STRIPS-style PDDL domain for Blocks World with actions pick-up, put-down, unstack, stack and a PDDL problem instantiated for blocks red, blue, yellow, orange that matches Scenario A initial and goal facts, ensuring compatibility with the Fast Downward solver; include only necessary predicates {clear, on, ontable, holding, handempty} and ensure effects align with the restrictions; output exactly one <domain>...</domain> and one <problem>...</problem>."
            },
            "synthesize_pddl_s2": {
                "input": [
                    "audited_trace"
                ],
                "output": "pddl_scenario_B",
                "system_prompt": "You are an expert with PDDL for Fast Downward. You always provide a PDDL domain and a PDDL problem file to solve the task. You always enclose the PDDL domain between <domain></domain> tags, and the PDDL problem between <problem></problem> tags.",
                "prompt": "Your name is orchestrator. Using the audited_trace for Scenario B and the public information, produce the same PDDL domain as Scenario A and a PDDL problem instantiated for blocks red, blue, yellow, orange that matches Scenario B initial and goal facts, ensuring compatibility with the Fast Downward solver; output exactly one <domain>...</domain> and one <problem>...</problem>."
            }
        },
        "constraints": [
            "blocks_modeler.specify_domain->consistency_auditor.audit",
            "blocks_modeler.propose_plan_scenario_A->consistency_auditor.audit",
            "blocks_modeler.propose_plan_scenario_B->consistency_auditor.audit",
            "consistency_auditor.audit->orchestrator.synthesize_pddl_s1",
            "consistency_auditor.audit->orchestrator.synthesize_pddl_s2"
        ]
    }
}