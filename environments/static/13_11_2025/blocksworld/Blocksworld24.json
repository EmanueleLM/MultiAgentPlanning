{
    "name": "Blocksworld24",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "state_extractor",
            "planner",
            "consistency_auditor",
            "orchestrator"
        ],
        "state_extractor": {
            "private_information": [
                "I specialize in converting natural language task descriptions about blocks-world into structured, unambiguous summaries.",
                "I enumerate objects, predicates, and segregate multiple scenarios with their initial states, goals, and any provided plans."
            ],
            "goal": "Extract clean, structured representations for each scenario including objects, initial conditions, goals, and any provided plan sketches."
        },
        "planner": {
            "private_information": [
                "I reason about the allowed actions and constraints to propose a valid plan sequence for scenarios lacking a plan.",
                "I do not write PDDL; I only propose a human-readable action sequence."
            ],
            "goal": "Produce a valid and minimal plan for scenario 2 using only the allowed actions and respecting all constraints."
        },
        "consistency_auditor": {
            "private_information": [
                "I audit temporal and causal consistency step-by-step, ensuring all preconditions hold and effects are correctly applied.",
                "I forbid bookkeeping shortcuts and post-hoc justifications such as quota tokens or penalties; only grounded preconditions and effects are allowed.",
                "I ensure no action violates the one-block-at-a-time or hand-empty constraints."
            ],
            "goal": "Validate or correct the provided or proposed plans for each scenario, ensuring exact compliance with action semantics and constraints."
        },
        "orchestrator": {
            "private_information": [
                "I integrate structured state, validated plans, and produce the final PDDL artifacts for a classical planner.",
                "I target the FastDownward solver and will emit a standard Blocksworld domain and problem files."
            ],
            "goal": "Coordinate the agents and synthesize the final PDDL domain and problem files for each scenario, ready for FastDownward."
        }
    },
    "environment": {
        "init": {
            "max_blocks": 6,
            "visibility": "global"
        },
        "public_information": [
            "Environment: Blocks-World with a single manipulator hand; objects are colored blocks and a table surface.",
            "Available actions: pick-up(x), unstack(x,y), put-down(x), stack(x,y).",
            "Global constraints: only one block can be picked up or unstacked at a time; the hand must be empty to pick-up or unstack; pick-up requires block x is on the table and clear; unstack(x,y) requires x is on y and x is clear; after pick-up or unstack, the agent is holding x; put-down(x) requires holding x; stack(x,y) requires holding x and y is clear; after put-down or stack, the hand becomes empty; after stack(x,y), y is no longer clear; clear(x) means nothing is on x and x is not being held.",
            "Scenario 1 initial state: clear(orange), clear(yellow), handempty, on(blue, red), on(yellow, blue), ontable(red), ontable(orange).",
            "Scenario 1 goal: on(blue, yellow).",
            "Scenario 1 proposed plan: unstack(yellow, blue); put-down(yellow); unstack(blue, red); stack(blue, yellow).",
            "Scenario 2 initial state: clear(red), clear(blue), clear(orange), handempty, on(orange, yellow), ontable(red), ontable(blue), ontable(yellow).",
            "Scenario 2 goal: on(red, blue) and on(orange, red)."
        ]
    },
    "workflow": {
        "state_extractor": {
            "extract": {
                "input": [],
                "output": "extracted_state",
                "system_prompt": "You convert natural-language blocksworld descriptions into a structured summary with symbols, predicates, initial conditions, goals, and any provided plans. Do not emit PDDL.",
                "prompt": "Extract objects, predicates, and two scenarios from the public information. Provide a compact JSON-like summary with keys: objects, predicates, scenario_1 {init, goal, provided_plan}, scenario_2 {init, goal}. Keep action names as pick-up, unstack, put-down, stack. Use only information available in the public information."
            }
        },
        "planner": {
            "plan_case2": {
                "input": [
                    "extracted_state"
                ],
                "output": "plan_case2",
                "system_prompt": "You propose a valid, minimal plan sequence for scenario 2 using the allowed actions and constraints. Do not emit PDDL.",
                "prompt": "Using the extracted state, produce a plan for scenario_2 that achieves on(red, blue) and on(orange, red). Use only the actions pick-up, unstack, put-down, stack. Respect all preconditions and effects and avoid bookkeeping shortcuts. Output the plan as a numbered list enclosed between [PLAN] and [PLAN END]."
            }
        },
        "consistency_auditor": {
            "audit_case1": {
                "input": [
                    "extracted_state"
                ],
                "output": "validated_case1",
                "system_prompt": "You are a temporal/causal consistency auditor. You verify plans step-by-step against action schemas, preconditions, and effects, and you remove any bookkeeping shortcuts or post-hoc penalties. You do not emit PDDL.",
                "prompt": "Audit Scenario 1. Re-state the initial state and the provided plan, then verify each step's preconditions and effects. If a step is invalid, correct it minimally while keeping the overall goal on(blue, yellow) achievable. Provide: status (valid or corrected), final validated plan, and a brief justification for each step."
            },
            "audit_case2": {
                "input": [
                    "extracted_state",
                    "plan_case2"
                ],
                "output": "validated_case2",
                "system_prompt": "You are a temporal/causal consistency auditor. You verify proposed plans step-by-step, ensuring exact compliance with action semantics, one-block-at-a-time, and hand-empty constraints. You do not emit PDDL.",
                "prompt": "Audit Scenario 2 using the proposed plan. Verify preconditions and effects step-by-step; if necessary, correct the plan minimally so that the goal on(red, blue) and on(orange, red) is achieved. Provide: status (valid or corrected), final validated plan, and a brief justification for each step."
            }
        },
        "orchestrator": {
            "pddl_case1": {
                "input": [
                    "extracted_state",
                    "validated_case1"
                ],
                "output": "pddl_case1",
                "system_prompt": "You are an expert PDDL author targeting the FastDownward solver. Produce a standard Blocks-World PDDL domain and a PDDL problem for Scenario 1. Use classical predicates: on ?x ?y, ontable ?x, clear ?x, holding ?x, handempty. Provide actions: pick-up, put-down, stack, unstack with correct preconditions and effects matching the constraints. Enclose the domain in <domain></domain> and the problem in <problem></problem> tags.",
                "prompt": "Integrate the extracted state and the validated Scenario 1 plan to produce consistent PDDL artifacts. Domain: classic Blocks-World as specified. Problem: include objects {red, blue, yellow, orange}, initial state from Scenario 1, and goal on(blue, yellow). Ensure the problem is solvable in FastDownward with the domain. Do not include extraneous commentary; provide only the tagged domain and problem."
            },
            "pddl_case2": {
                "input": [
                    "extracted_state",
                    "validated_case2"
                ],
                "output": "pddl_case2",
                "system_prompt": "You are an expert PDDL author targeting the FastDownward solver. Produce a standard Blocks-World PDDL domain and a PDDL problem for Scenario 2. Use classical predicates: on ?x ?y, ontable ?x, clear ?x, holding ?x, handempty. Provide actions: pick-up, put-down, stack, unstack with correct preconditions and effects matching the constraints. Enclose the domain in <domain></domain> and the problem in <problem></problem> tags.",
                "prompt": "Integrate the extracted state and the validated Scenario 2 plan to produce consistent PDDL artifacts. Domain: classic Blocks-World as specified. Problem: include objects {red, blue, yellow, orange}, initial state from Scenario 2, and goal (and on(red, blue) on(orange, red)). Ensure the problem is solvable in FastDownward with the domain. Do not include extraneous commentary; provide only the tagged domain and problem."
            }
        },
        "constraints": [
            "state_extractor.extract->planner.plan_case2",
            "state_extractor.extract->consistency_auditor.audit_case1",
            "planner.plan_case2->consistency_auditor.audit_case2",
            "consistency_auditor.audit_case1->orchestrator.pddl_case1",
            "consistency_auditor.audit_case2->orchestrator.pddl_case2"
        ]
    }
}