{
    "name": "Blocksworld26",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "world_modeler",
            "state_estimator",
            "auditor",
            "orchestrator"
        ],
        "world_modeler": {
            "private_information": [
                "You specialize in formalizing the Blocks World into predicates, action schemas, invariants, and typing choices.",
                "You must extract action semantics and constraints only from the public information and scenarios."
            ],
            "goal": "Produce a precise, implementation-ready domain specification (not PDDL) with predicates, action schemas, and invariants for the Blocks World described."
        },
        "state_estimator": {
            "private_information": [
                "You specialize in extracting concrete instances, initial states, and goals consistent with the provided scenarios and rules.",
                "You should avoid introducing any assumptions that are not implied by the public information or the scenarios."
            ],
            "goal": "Produce structured, unambiguous instance descriptions for each scenario: objects, initial facts, and goal facts that match the modeled predicates and actions."
        },
        "auditor": {
            "private_information": [
                "You specialize in auditing temporal and causal consistency.",
                "You must validate plans step-by-step against preconditions and effects, track state transitions, and flag illegal shortcuts or bookkeeping tricks such as quota tokens, post-hoc penalties, or ungrounded assumptions."
            ],
            "goal": "Assess whether the provided or derived plans are causally valid and temporally consistent with the model and scenarios; propose minimal corrections when violations are found."
        },
        "orchestrator": {
            "private_information": [
                "You coordinate all other agents and compile their outputs.",
                "You are responsible for emitting the final PDDL domain and problem file(s) for the FastDownward solver."
            ],
            "goal": "Integrate the model, instances, and audit feedback to produce a Blocks World PDDL domain and problem file(s) suitable for FastDownward."
        }
    },
    "environment": {
        "init": {
            "constants": {
                "blocks": [
                    "blue",
                    "orange",
                    "red",
                    "yellow"
                ],
                "hand": [
                    "hand"
                ]
            }
        },
        "public_information": [
            "You are playing with a set of blocks and can execute the following actions: Pick up a block; Unstack a block from on top of another block; Put down a block; Stack a block on top of another block.",
            "Action restrictions and semantics: You can only pick up or unstack one block at a time; You can only pick up or unstack a block if your hand is empty; You can only pick up a block if the block is on the table and the block is clear; A block is clear if the block has no other blocks on top of it and if the block is not picked up; You can only unstack a block from on top of another block if the block you are unstacking was really on top of the other block; You can only unstack a block if it is clear; Once you pick up or unstack a block, you are holding the block; You can only put down a block that you are holding; You can only stack a block on top of another block if you are holding the block being stacked; You can only stack a block on top of another block if the block onto which you are stacking is clear; Once you put down or stack a block, your hand becomes empty; Once you stack a block on top of a second block, the second block is no longer clear."
        ],
        "scenarios": [
            {
                "id": "S1",
                "description": "Initial and goal conditions with a provided plan.",
                "initial_conditions_natural": [
                    "The blue block is clear.",
                    "The orange block is clear.",
                    "The hand is empty.",
                    "The blue block is on top of the yellow block.",
                    "The orange block is on top of the red block.",
                    "The red block is on the table.",
                    "The yellow block is on the table."
                ],
                "goal_conditions_natural": [
                    "The red block is on top of the orange block.",
                    "The yellow block is on top of the red block."
                ],
                "plan_natural": [
                    "Unstack the orange block from on top of the red block.",
                    "Put down the orange block.",
                    "Pick up the red block.",
                    "Stack the red block on top of the orange block.",
                    "Unstack the blue block from on top of the yellow block.",
                    "Put down the blue block.",
                    "Pick up the yellow block.",
                    "Stack the yellow block on top of the red block."
                ]
            },
            {
                "id": "S2",
                "description": "Initial and goal conditions without a provided plan.",
                "initial_conditions_natural": [
                    "The red block is clear.",
                    "The orange block is clear.",
                    "The hand is empty.",
                    "The red block is on top of the blue block.",
                    "The blue block is on top of the yellow block.",
                    "The orange block is on the table.",
                    "The yellow block is on the table."
                ],
                "goal_conditions_natural": [
                    "The blue block is on top of the yellow block.",
                    "The orange block is on top of the red block.",
                    "The yellow block is on top of the orange block."
                ],
                "plan_natural": []
            }
        ]
    },
    "workflow": {
        "world_modeler": {
            "model": {
                "input": [],
                "output": "model_spec",
                "system_prompt": "You are a Blocks World domain modeler. Using only the public information and scenarios, produce a precise, canonical domain specification without emitting PDDL: list predicates with intended meanings; list action schemas pickup, putdown, unstack, stack with parameter declarations, preconditions, and effects; state type choices and invariants such as exclusivity of on, ontable, holding, clear, and handempty; state frame axioms implicitly covered by action effects; define when a block is clear; avoid inventing features not justified by the text; keep names and semantics consistent with classic Blocks World.",
                "prompt": "Your name is world_modeler. Public information: {environment->public_information}. Scenarios for context: {environment->scenarios}. Task: deliver a domain specification document as described; do not output PDDL; be explicit and deterministic so that downstream agents can instantiate facts exactly."
            }
        },
        "state_estimator": {
            "extract": {
                "input": [
                    "model_spec"
                ],
                "output": "scenario_instances",
                "system_prompt": "You are a state and instance extractor. From the scenarios, produce per-scenario objects, initial facts, and goal facts consistent with the model specification; convert the natural language conditions into ground facts over the modeled predicates; ensure handempty, holding, on, ontable, and clear are used consistently; do not assume unspecified facts; do not emit PDDL; if a fact is ambiguous, flag it clearly but do not invent.",
                "prompt": "Your name is state_estimator. Use this model: {model_spec}. Public information: {environment->public_information}. Scenarios to instantiate: {environment->scenarios}. Output a structured description for each scenario S1 and S2: objects, initial facts, goal facts, and any flagged ambiguities."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "model_spec",
                    "scenario_instances"
                ],
                "output": "audit_report",
                "system_prompt": "You are a temporal and causal consistency auditor. Validate the provided plan for S1 step-by-step by checking action preconditions and effects against the evolving state; confirm that only one block is moved at a time, that handempty and clear are respected, and that no bookkeeping shortcuts are used; report any violations and propose minimal corrections if needed. For S2, there is no provided plan; evaluate whether the goals are consistent with the model and initial state, identify any obvious prerequisites, and note potential conflicts; do not emit PDDL.",
                "prompt": "Your name is auditor. Inputs: model specification {model_spec} and scenario instances {scenario_instances}. Public information: {environment->public_information}. Plans: S1 has a human plan in natural language, S2 has none. Produce a clear audit report describing stepwise validation for S1 and feasibility notes for S2."
            }
        },
        "orchestrator": {
            "synthesize_pddl": {
                "input": [
                    "model_spec",
                    "scenario_instances",
                    "audit_report"
                ],
                "output": "pddl_final",
                "system_prompt": "You are an expert with PDDL for FastDownward. You must output a complete PDDL domain and PDDL problem file(s) ready for the FastDownward solver. Always enclose the PDDL domain between <domain></domain> tags and each PDDL problem between <problem></problem> tags. Use canonical Blocks World names: predicates clear, on, ontable, holding, handempty and actions pickup, putdown, unstack, stack; prefer :requirements :strips and optionally :typing with type block for objects; ensure effects maintain invariants and preconditions reflect the stated rules; ground initial states and goals for each scenario; if multiple scenarios exist, output multiple <problem> sections, one per scenario, all compatible with the same domain; ensure names of objects match those in the scenarios; the output must be directly parsable by FastDownward.",
                "prompt": "Integrate the model, instances, and audit. Model: {model_spec}. Instances: {scenario_instances}. Audit: {audit_report}. Public information: {environment->public_information}. Produce a single response that contains exactly one <domain> block followed by one <problem> block for S1 and one <problem> block for S2, each problem named uniquely and referencing the shared domain. Do not include commentary outside the tags."
            }
        },
        "constraints": [
            "world_modeler.model->state_estimator.extract",
            "world_modeler.model->auditor.audit",
            "state_estimator.extract->auditor.audit",
            "world_modeler.model->orchestrator.synthesize_pddl",
            "state_estimator.extract->orchestrator.synthesize_pddl",
            "auditor.audit->orchestrator.synthesize_pddl"
        ]
    }
}