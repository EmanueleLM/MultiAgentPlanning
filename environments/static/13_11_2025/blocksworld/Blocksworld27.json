{
    "name": "Blocksworld27",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "modeler",
            "planner",
            "consistency_auditor",
            "orchestrator"
        ],
        "modeler": {
            "private_information": [
                "You specialize in extracting clean predicate models from natural language specifications.",
                "You represent Blocks World with conventional predicates: on(x,y), ontable(x), clear(x), holding(x), handempty.",
                "You define operators: pickup(x), putdown(x), stack(x,y), unstack(x,y)."
            ],
            "goal": "Derive an unambiguous domain model (predicates, operator schemas with preconditions/effects) and instantiate initial states and goals for the two scenarios described publicly."
        },
        "planner": {
            "private_information": [
                "You produce grounded, human-readable plans from a formal model.",
                "You keep operator names consistent with the model and avoid illegal shortcuts."
            ],
            "goal": "Using the extracted model, propose consistent action sequences for scenario 1 (validate the provided one or correct it) and scenario 2 (synthesize a plan) that achieve the stated goals."
        },
        "consistency_auditor": {
            "private_information": [
                "You audit temporal and causal consistency for classical planning traces.",
                "You forbid bookkeeping shortcuts such as quota tokens or post-hoc penalties; only preconditions and effects may justify steps.",
                "You check that at most one block is manipulated at a time and that handempty and clear constraints are respected."
            ],
            "goal": "Verify and, if needed, minimally repair the candidate plans for both scenarios so that each step\u2019s preconditions are satisfied and effects accumulate correctly."
        },
        "orchestrator": {
            "private_information": [
                "You integrate the model and audited plans to emit a FastDownward-compatible PDDL domain and problem files."
            ],
            "goal": "Produce a standard STRIPS-style Blocks World PDDL domain and two PDDL problem instances (Scenario 1 and Scenario 2) that conform to FastDownward conventions."
        }
    },
    "environment": {
        "init": {
            "objects": [
                "red",
                "orange",
                "blue",
                "yellow"
            ],
            "hands": 1,
            "random_seed": 27
        },
        "public_information": [
            "You are in a Blocks World setting with blocks: red, orange, blue, yellow and one hand.",
            "Available actions: Pick up a block; Unstack a block from on top of another block; Put down a block; Stack a block on top of another block.",
            "Restrictions: Only one block can be picked up or unstacked at a time; you can only pick up or unstack if your hand is empty; you can only pick up a block if it is on the table and clear; a block is clear if no block is on top of it and it is not being held; you can only unstack a block from on top of another block if it was really on top of that other block and is clear; once you pick up or unstack a block, you are holding it; you can only put down a block that you are holding; you can only stack a block onto another block if you are holding it and the destination block is clear; once you put down or stack a block, your hand becomes empty; when you stack a block on another, the destination block becomes not clear.",
            "Scenario 1 initial state: red is clear; orange is clear; hand is empty; red is on top of blue; blue is on top of yellow; orange is on the table; yellow is on the table.",
            "Scenario 1 goal: blue is on top of yellow; orange is on top of red; yellow is on top of orange.",
            "Scenario 1 user plan: unstack red from blue; put down red; pick up orange; stack orange on red; unstack blue from yellow; put down blue; pick up yellow; stack yellow on orange; pick up blue; stack blue on yellow.",
            "Scenario 2 initial state: red is clear; orange is clear; hand is empty; red is on top of yellow; orange is on top of blue; blue is on the table; yellow is on the table.",
            "Scenario 2 goal: blue is on top of red; orange is on top of blue; yellow is on top of orange.",
            "Operator naming convention for plans: pickup(x), putdown(x), stack(x,y), unstack(x,y)."
        ]
    },
    "workflow": {
        "modeler": {
            "analysis": {
                "input": [],
                "output": "formal_domain_model",
                "system_prompt": "You are a knowledge engineer. From the public Blocks World description, produce a clean predicate model with predicates and STRIPS operators (pickup, putdown, stack, unstack) and their precise preconditions and effects; also extract Scenario 1 and Scenario 2 initial states and goals as grounded facts.",
                "prompt": "Your name is modeler. Use the public information {environment->public_information}. Output a compact JSON with keys: predicates, actions (each with name, parameters, preconditions, add, del), scenario1.init, scenario1.goal, scenario1.plan_user, scenario2.init, scenario2.goal. Do not invent new predicates."
            }
        },
        "planner": {
            "plan_s1": {
                "input": [
                    "formal_domain_model"
                ],
                "output": "plan_s1",
                "system_prompt": "You are a classical planning assistant that proposes grounded action sequences consistent with a given STRIPS model.",
                "prompt": "Your name is planner. Given the model {formal_domain_model}, validate or minimally correct the Scenario 1 user plan to achieve the Scenario 1 goal. Return a JSON with keys: scenario='S1', plan=[steps as pickup(x), putdown(x), stack(x,y), unstack(x,y)]."
            },
            "plan_s2": {
                "input": [
                    "formal_domain_model"
                ],
                "output": "plan_s2_draft",
                "system_prompt": "You are a classical planning assistant that synthesizes grounded action sequences consistent with a given STRIPS model.",
                "prompt": "Your name is planner. Using the model {formal_domain_model}, synthesize a valid plan that achieves the Scenario 2 goal from its initial state. Return a JSON with keys: scenario='S2', plan=[steps as pickup(x), putdown(x), stack(x,y), unstack(x,y)]."
            }
        },
        "consistency_auditor": {
            "audit": {
                "input": [
                    "formal_domain_model",
                    "plan_s1",
                    "plan_s2_draft"
                ],
                "output": "audit_report",
                "system_prompt": "You are a temporal and causal consistency auditor for classical planning. You verify each step\u2019s preconditions and effects, forbid bookkeeping shortcuts, and ensure only one block is manipulated at a time.",
                "prompt": "Your name is consistency_auditor. Using the model {formal_domain_model} and the candidate plans {plan_s1} and {plan_s2_draft}, produce a JSON report with keys: S1.verdict (pass|fail), S1.trace (state progression), S1.plan (possibly corrected plan), S2.verdict, S2.trace, S2.plan. Explain any corrections briefly and ensure both final plans are valid."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "formal_domain_model",
                    "audit_report"
                ],
                "output": "pddl_out",
                "system_prompt": "You are an expert with PDDL for FastDownward. Produce a STRIPS domain with actions pickup, putdown, stack, unstack and conventional predicates (clear, on, ontable, holding, handempty). Then produce two problem files (S1 and S2) with objects red, orange, blue, yellow and audited initial states and goals. Enclose the domain between <domain></domain> and each problem between <problem name='S1'></problem> and <problem name='S2'></problem>.",
                "prompt": "Integrate the public information {environment->public_information}, the extracted model {formal_domain_model}, and the audited plans and states {audit_report}. Emit FastDownward-compatible PDDL with a single domain and two problem instances exactly as specified. Do not include commentary outside the <domain> and <problem> tags."
            }
        },
        "constraints": [
            "modeler.analysis->planner.plan_s1",
            "modeler.analysis->planner.plan_s2",
            "planner.plan_s1->consistency_auditor.audit",
            "planner.plan_s2->consistency_auditor.audit",
            "consistency_auditor.audit->orchestrator.pddl",
            "modeler.analysis->orchestrator.pddl"
        ]
    }
}