{
    "name": "Blocksworld4",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "state_modeler",
            "plan_analyst",
            "consistency_auditor",
            "orchestrator"
        ],
        "state_modeler": {
            "private_information": [
                "I specialize in translating natural-language rules into explicit predicates, types, and action schemas.",
                "I do not emit PDDL; I produce a clean, solver-agnostic specification and grounded states."
            ],
            "goal": "Extract a precise Blocksworld specification and normalize both scenarios' initial states, goals, and known plans."
        },
        "plan_analyst": {
            "private_information": [
                "I validate and synthesize action sequences that respect preconditions and effects without using bookkeeping shortcuts.",
                "I do not emit PDDL; I provide human-readable or JSON plans and rationales."
            ],
            "goal": "Validate the provided plan for Scenario S1 and propose a minimal, valid plan for Scenario S2 to achieve its goal."
        },
        "consistency_auditor": {
            "private_information": [
                "I audit temporal and causal consistency across specifications and plans.",
                "I disallow bookkeeping shortcuts such as implicit tokens, post-hoc penalties, or quota counters not grounded in the domain.",
                "I ensure that all actions are supported by explicit preconditions and effects, and that the hand state, clear relations, and on/ontable relations remain consistent."
            ],
            "goal": "Produce an audited, contradiction-free, and shortcut-free integrated specification for both scenarios."
        },
        "orchestrator": {
            "private_information": [
                "I integrate upstream outputs to produce final artifacts for planning.",
                "I generate the final PDDL domain and one PDDL problem per scenario targeting the FastDownward solver."
            ],
            "goal": "Produce a single Blocksworld PDDL domain and two PDDL problems (S1 and S2) that adhere to the audited specification and are ready for FastDownward."
        }
    },
    "environment": {
        "init": {
            "domain": "blocksworld",
            "solver": "FastDownward",
            "objects": {
                "blocks": [
                    "red",
                    "blue",
                    "orange",
                    "yellow"
                ],
                "hands": [
                    "hand"
                ]
            },
            "scenarios": {
                "S1": {
                    "description": "Yellow on table and clear; red on table; blue on red; orange on blue; orange and yellow are clear; hand is empty. Goal: blue on red and yellow on orange.",
                    "init_facts": [
                        "clear(orange)",
                        "clear(yellow)",
                        "handempty",
                        "on(blue, red)",
                        "on(orange, blue)",
                        "ontable(red)",
                        "ontable(yellow)"
                    ],
                    "goal_facts": [
                        "on(blue, red)",
                        "on(yellow, orange)"
                    ],
                    "given_plan": [
                        "pick-up(yellow)",
                        "stack(yellow, orange)"
                    ]
                },
                "S2": {
                    "description": "A stack blue <- orange <- red <- yellow; yellow is clear; blue on table; hand is empty. Goal: red on blue and yellow on orange.",
                    "init_facts": [
                        "clear(yellow)",
                        "handempty",
                        "on(red, orange)",
                        "on(orange, blue)",
                        "on(yellow, red)",
                        "ontable(blue)"
                    ],
                    "goal_facts": [
                        "on(red, blue)",
                        "on(yellow, orange)"
                    ],
                    "given_plan": []
                }
            }
        },
        "public_information": [
            "Domain: Blocksworld with actions pick-up(x), put-down(x), unstack(x, y), stack(x, y).",
            "Restrictions: only one block can be held at a time; can pick-up or unstack only if the hand is empty; pick-up requires block is ontable and clear; unstack requires x was on y and x is clear; after pick-up/unstack, holding(x) becomes true; put-down requires holding(x); stack requires holding(x) and clear(y); after put-down or stack, handempty becomes true; after stack(x, y), clear(y) becomes false; clear(x) means no block is on x and x is not being held.",
            "Scenario S1 initial state and goal are provided along with a candidate plan: pick up yellow, then stack yellow on orange.",
            "Scenario S2 initial state and goal are provided; a plan must be synthesized.",
            "All agents must avoid implicit bookkeeping devices and ensure causal and temporal correctness."
        ]
    },
    "workflow": {
        "state_modeler": {
            "spec_extraction": {
                "input": [],
                "output": "spec_model",
                "system_prompt": "You formalize the Blocksworld from natural-language constraints into an explicit, solver-agnostic specification with types, predicates, action schemas, and grounded scenario encodings.",
                "prompt": "Your name is state_modeler. Use the public information and initialization to extract predicates (e.g., clear, on, ontable, holding, handempty), object types, and the four actions with precise preconditions and effects. Normalize Scenario S1 and S2 into grounded fact sets and goals, preserving the given plan for S1 and the empty plan for S2. Provide a concise JSON with keys: predicates, actions, objects, scenarios."
            }
        },
        "plan_analyst": {
            "plan_validation_s1": {
                "input": [
                    "spec_model"
                ],
                "output": "s1_plan_validation",
                "system_prompt": "You validate plans and explain whether each action is applicable and whether the goal is achieved, without emitting PDDL.",
                "prompt": "Your name is plan_analyst. Validate the provided plan for Scenario S1 against the specification: check each action's preconditions and effects step by step, confirm goal satisfaction, and output a concise JSON including applicability trace, final state summary, and validity verdict."
            },
            "plan_synthesis_s2": {
                "input": [
                    "spec_model"
                ],
                "output": "s2_plan_candidate",
                "system_prompt": "You synthesize minimal valid action sequences that satisfy goals while maintaining causal and temporal correctness.",
                "prompt": "Your name is plan_analyst. Propose a minimal valid plan for Scenario S2 that achieves its goal. Show a short rationale and output a JSON with an ordered list of actions and a brief justification per action. Do not use bookkeeping shortcuts; ensure all preconditions are satisfied at each step."
            }
        },
        "consistency_auditor": {
            "audit_temporal_causal": {
                "input": [
                    "spec_model",
                    "s1_plan_validation",
                    "s2_plan_candidate"
                ],
                "output": "audited_spec",
                "system_prompt": "You audit temporal and causal consistency, eliminate bookkeeping shortcuts, and reconcile any ambiguities or contradictions.",
                "prompt": "Your name is consistency_auditor. Audit the specification and both scenarios' plans. Ensure no contradictions in clear, on, ontable, holding, and handempty; ensure that effects correctly toggle clear and hand states; and remove or flag any shortcuts. Produce a compact JSON with corrected predicates/actions if needed, the reconciled scenarios, and the final approved plans."
            }
        },
        "orchestrator": {
            "pddl_fastdownward": {
                "input": [
                    "audited_spec"
                ],
                "output": "pddl_fd",
                "system_prompt": "You generate final PDDL artifacts for FastDownward. Always output one PDDL domain and one PDDL problem per scenario, compatible with FastDownward. Enclose the PDDL domain between <domain></domain>. Enclose each PDDL problem between <problem id=\"S1\"></problem> and <problem id=\"S2\"></problem>. Use a single consistent domain name, standard Blocksworld predicates, and only the four actions with correct preconditions/effects.",
                "prompt": "Your name is orchestrator. Integrate the audited specification and produce a single PDDL domain and two PDDL problems (S1 and S2) ready for FastDownward. Ensure object lists, initial states, and goals match the audited specification. Keep the modeling conventional: types for blocks and hand if used, predicates clear, on, ontable, holding, handempty, and the four actions pick-up, put-down, unstack, stack with standard effects. Output the domain and both problems wrapped in the specified tags."
            }
        },
        "constraints": [
            "state_modeler.spec_extraction->plan_analyst.plan_validation_s1",
            "state_modeler.spec_extraction->plan_analyst.plan_synthesis_s2",
            "plan_analyst.plan_validation_s1->consistency_auditor.audit_temporal_causal",
            "plan_analyst.plan_synthesis_s2->consistency_auditor.audit_temporal_causal",
            "consistency_auditor.audit_temporal_causal->orchestrator.pddl_fastdownward"
        ]
    }
}