{
    "name": "Blocksworld9",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "modeler",
            "plan_checker",
            "consistency_auditor",
            "orchestrator"
        ],
        "modeler": {
            "private_information": [
                "I translate natural language action descriptions and restrictions into precise symbolic semantics for Blocksworld.",
                "I define predicates, action schemas, and canonical object names without emitting PDDL directly.",
                "I extract initial states and goals for each scenario from public information."
            ],
            "goal": "Produce a precise action semantics pack and structured scenario states from the public description."
        },
        "plan_checker": {
            "private_information": [
                "I validate plans step by step using preconditions and effects, and I track causal links and open preconditions.",
                "I do not create or emit PDDL; I produce a structured validation trace for auditing."
            ],
            "goal": "Check whether the proposed plan for Scenario 1 is temporally and causally consistent with the action semantics and restrictions."
        },
        "consistency_auditor": {
            "private_information": [
                "I audit semantic assumptions, temporal and causal consistency, and remove bookkeeping shortcuts such as quota tokens or post-hoc penalties.",
                "I normalize the semantics to a clean STRIPS-compatible form, suitable for a classical planner."
            ],
            "goal": "Produce an audited and sanitized semantics pack that is consistent with the restrictions and ready for orchestration into a PDDL domain."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate the audited semantics and scenario statements to produce the final PDDL domain and a PDDL problem compatible with the FastDownward solver."
        }
    },
    "environment": {
        "init": {
            "domain": "blocksworld",
            "objects": [
                "red",
                "blue",
                "yellow",
                "orange"
            ],
            "hand_slots": 1
        },
        "public_information": [
            "Available actions: pick up a block; unstack a block from on top of another block; put down a block; stack a block on top of another block.",
            "Restrictions: 1) I can only pick up or unstack one block at a time. 2) I can only pick up or unstack a block if my hand is empty. 3) I can only pick up a block if the block is on the table and the block is clear. 4) A block is clear if the block has no other blocks on top of it and if the block is not picked up. 5) I can only unstack a block from on top of another block if the block I am unstacking was really on top of the other block. 6) I can only unstack a block from on top of another block if the block I am unstacking is clear. 7) Once I pick up or unstack a block, I am holding the block. 8) I can only put down a block that I am holding. 9) I can only stack a block on top of another block if I am holding the block being stacked. 10) I can only stack a block on top of another block if the block onto which I am stacking the block is clear. 11) Once I put down or stack a block, my hand becomes empty. 12) Once you stack a block on top of a second block, the second block is no longer clear.",
            "Scenario 1 initial conditions: the orange block is clear, the yellow block is clear, the hand is empty, the orange block is on top of the blue block, the yellow block is on top of the red block, the red block is on the table and the blue block is on the table.",
            "Scenario 1 goal: the red block is on top of the yellow block and the blue block is on top of the orange block.",
            "Scenario 1 proposed plan: unstack the orange block from on top of the blue block; put down the orange block; pick up the blue block; stack the blue block on top of the orange block; unstack the yellow block from on top of the red block; put down the yellow block; pick up the red block; stack the red block on top of the yellow block.",
            "Scenario 2 initial conditions: the red block is clear, the blue block is clear, the hand is empty, the red block is on top of the yellow block, the blue block is on top of the orange block, the orange block is on the table and the yellow block is on the table.",
            "Scenario 2 goal: the blue block is on top of the yellow block and the yellow block is on top of the red block."
        ]
    },
    "workflow": {
        "modeler": {
            "derive_semantics": {
                "input": [],
                "output": "bw_semantics",
                "system_prompt": "You are a Blocksworld world-modeler. From public information, produce a precise, unambiguous set of action schemas, predicate definitions, and state constraints suitable for classical planning. Do not emit PDDL.",
                "prompt": "Your name is modeler. Use the public information to define canonical predicates (on, ontable, clear, holding, handempty), action schemas (pickup, putdown, unstack, stack) with parameters, preconditions, and effects aligned with the stated restrictions. Provide output under <semantics>...</semantics> using a concise, machine-readable structure. Avoid PDDL and avoid assumptions beyond the given restrictions."
            },
            "scenarios": {
                "input": [],
                "output": "bw_scenarios",
                "system_prompt": "Extract scenario states from text into structured initial and goal facts without inventing facts not implied by the description.",
                "prompt": "From the public information, extract two scenarios. For Scenario 1 and Scenario 2, provide lists of objects, initial facts, and goal facts. Do not infer 'clear' for any block that is clearly not clear from the description. Output under <scenarios>...</scenarios> in a concise machine-readable structure. Avoid PDDL."
            }
        },
        "plan_checker": {
            "validate_plan_s1": {
                "input": [
                    "bw_semantics",
                    "bw_scenarios"
                ],
                "output": "s1_validation",
                "system_prompt": "You validate plans step by step using preconditions and effects and report causal support, threats, and any violation; do not emit PDDL.",
                "prompt": "Validate the proposed plan for Scenario 1 from the public information against the semantics {bw_semantics} and scenarios {bw_scenarios}. For each step, show required preconditions, state updates, and any violations. Conclude with VALID or INVALID and rationale. Output under <validation>...</validation>."
            }
        },
        "consistency_auditor": {
            "audit": {
                "input": [
                    "bw_semantics",
                    "s1_validation"
                ],
                "output": "audited_semantics",
                "system_prompt": "You audit temporal and causal consistency, ensuring no bookkeeping shortcuts (such as invisible quotas or retroactive fixes) are used. Normalize semantics to STRIPS-compatible form.",
                "prompt": "Audit the semantics {bw_semantics} using the validation evidence {s1_validation}. Remove ambiguous or shortcut assumptions, and ensure preconditions and effects reflect the stated restrictions only. Provide a sanitized semantics pack under <audited-semantics>...</audited-semantics>. Do not emit PDDL."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "audited_semantics",
                    "bw_scenarios"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert with PDDL for the FastDownward solver. Produce a well-typed STRIPS domain and a single problem instance for Scenario 2. Use only the standard Blocksworld predicates and actions. Enclose outputs with <domain></domain> and <problem></problem> tags.",
                "prompt": "Integrate the audited semantics {audited_semantics} and the scenarios {bw_scenarios}. Produce the final PDDL domain 'blocksworld-strips' with types and predicates: block, on, ontable, clear, holding, handempty. Include actions: pickup, putdown, unstack, stack with standard preconditions and effects consistent with the restrictions. Then produce a PDDL problem for Scenario 2 named 'bw-s2', listing objects red, blue, yellow, orange of type block, with init facts: handempty, on red yellow, on blue orange, ontable yellow, ontable orange, clear red, clear blue, and without asserting clear for any block that is not clear. The goal is on blue yellow and on yellow red. Ensure FastDownward compatibility (:requirements :strips :typing), avoid numeric fluents, and avoid derived predicates. Output only one <domain>...</domain> block and one <problem>...</problem> block."
            }
        },
        "constraints": [
            "modeler.derive_semantics->plan_checker.validate_plan_s1",
            "modeler.scenarios->plan_checker.validate_plan_s1",
            "plan_checker.validate_plan_s1->consistency_auditor.audit",
            "modeler.derive_semantics->consistency_auditor.audit",
            "modeler.scenarios->orchestrator.pddl",
            "consistency_auditor.audit->orchestrator.pddl"
        ]
    }
}