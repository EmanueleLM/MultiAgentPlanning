{
    "name": "CalendarSchedulingExample13",
    "author": "Human",
    "agents": {
        "number": 5,
        "names": [
            "gerald_agent",
            "roy_agent",
            "barbara_agent",
            "auditor",
            "orchestrator"
        ],
        "gerald_agent": {
            "private_information": [
                "I am Gerald.",
                "Busy on Monday: 09:00-09:30, 13:00-14:00, 15:00-15:30, 16:00-17:00.",
                "Preference: avoid meetings before 13:00 on Monday if possible."
            ],
            "goal": "Report half-hour availability within Monday 09:00-17:00 and highlight any preferences or constraints relevant to scheduling."
        },
        "roy_agent": {
            "private_information": [
                "I am Roy.",
                "Free the entire day on Monday.",
                "No strong time preferences."
            ],
            "goal": "Report half-hour availability within Monday 09:00-17:00 and highlight any preferences or constraints relevant to scheduling."
        },
        "barbara_agent": {
            "private_information": [
                "I am Barbara.",
                "Busy on Monday: 09:30-10:00, 11:30-14:00, 14:30-15:00, 15:30-17:00.",
                "No strong time preferences beyond honoring the busy windows above."
            ],
            "goal": "Report half-hour availability within Monday 09:00-17:00 and highlight any preferences or constraints relevant to scheduling."
        },
        "auditor": {
            "private_information": [
                "Role: audit temporal and causal consistency across agents' schedules and preferences.",
                "Ensure all time slots respect the working window, duration granularity, and that no bookkeeping shortcuts (quota tokens, post-hoc penalties, or unstated assumptions) are used.",
                "Normalize time ranges and resolve edge cases at boundaries (e.g., 13:00-14:00 means 13:00 and 13:30 slots are blocked, but 14:00 is free if no subsequent conflict)."
            ],
            "goal": "Integrate and validate all reported availabilities and preferences into a conflict-free, preference-respecting set of feasible 30-minute slots and identify a recommended slot."
        },
        "orchestrator": {
            "private_information": [
                "Coordinate agents, integrate audited constraints, and produce the final PDDL domain and problem for the FastDownward solver.",
                "Model discrete half-hour slots as objects and require that the chosen slot is feasible for all attendees and respects preferences."
            ],
            "goal": "Schedule a 30-minute meeting for Gerald, Roy, and Barbara on Monday within 09:00-17:00 honoring all calendars and preferences, and output a final PDDL domain and problem suitable for FastDownward."
        }
    },
    "environment": {
        "init": {
            "day": "Monday",
            "working_hours_start": "09:00",
            "working_hours_end": "17:00",
            "timeslot_minutes": 30,
            "time_format": "HH:MM",
            "solver": "FastDownward"
        },
        "public_information": [
            "Task: find a 30-minute meeting time for Gerald, Roy, and Barbara within Monday 09:00-17:00.",
            "Discrete time granularity is 30 minutes; all times local and inclusive of the start, exclusive of the end.",
            "There exists a solution that satisfies all schedules and the preference to avoid meetings for Gerald before 13:00 if feasible.",
            "Meeting location or medium is flexible and does not affect scheduling."
        ]
    },
    "workflow": {
        "gerald_agent": {
            "availability": {
                "input": [],
                "output": "availability_gerald",
                "system_prompt": "You are Gerald's calendar assistant. Given the working window and granularity, compute all half-hour free slots on Monday that Gerald can attend, and list any preferences as soft constraints. Respond in compact JSON with keys: agent, free_slots (array of strings like HH:MM-HH:MM), busy_windows, preferences.",
                "prompt": "Context: {environment->public_information}. Window: {environment->init}. Private info: {agents->gerald_agent->private_information}. Produce the JSON availability summary without emitting PDDL or code."
            }
        },
        "roy_agent": {
            "availability": {
                "input": [],
                "output": "availability_roy",
                "system_prompt": "You are Roy's calendar assistant. Given the working window and granularity, compute all half-hour free slots on Monday that Roy can attend, and list any preferences as soft constraints. Respond in compact JSON with keys: agent, free_slots (array of strings like HH:MM-HH:MM), busy_windows, preferences.",
                "prompt": "Context: {environment->public_information}. Window: {environment->init}. Private info: {agents->roy_agent->private_information}. Produce the JSON availability summary without emitting PDDL or code."
            }
        },
        "barbara_agent": {
            "availability": {
                "input": [],
                "output": "availability_barbara",
                "system_prompt": "You are Barbara's calendar assistant. Given the working window and granularity, compute all half-hour free slots on Monday that Barbara can attend, and list any preferences as soft constraints. Respond in compact JSON with keys: agent, free_slots (array of strings like HH:MM-HH:MM), busy_windows, preferences.",
                "prompt": "Context: {environment->public_information}. Window: {environment->init}. Private info: {agents->barbara_agent->private_information}. Produce the JSON availability summary without emitting PDDL or code."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "availability_gerald",
                    "availability_roy",
                    "availability_barbara"
                ],
                "output": "audited_availability",
                "system_prompt": "You are a temporal consistency auditor. Merge the provided availabilities, enforce Monday 09:00-17:00 and 30-minute granularity, remove any slot that violates an agent's busy windows, and treat preferences as hard constraints if a feasible slot exists that satisfies them. Output compact JSON with keys: feasible_slots (intersection), honored_preferences, conflicts_removed, chosen_slot, mapping (map human-readable slots to PDDL-safe ids like t_14_00 for 14:00-14:30). Avoid PDDL or code.",
                "prompt": "Use window {environment->init} and the following agent summaries: Gerald {availability_gerald}, Roy {availability_roy}, Barbara {availability_barbara}. Ensure no bookkeeping shortcuts and provide a single recommended chosen_slot if multiple are feasible; prefer slots at or after 13:00 when Gerald's preference applies."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "audited_availability"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in PDDL for FastDownward. Produce a classical STRIPS-compatible PDDL domain and problem that schedule a single 30-minute meeting slot from a discrete set of timeslot objects. Requirements: domain includes types (attendee, timeslot) and predicates such as feasible ?t, chosen ?t, scheduled; include an action choose-slot that selects exactly one timeslot with precondition feasible ?t and effect chosen ?t and scheduled; ensure the plan is valid for FastDownward without durative actions or numeric fluents. Enclose the domain in <domain></domain> and the problem in <problem></problem>. Use only PDDL-safe symbols (lowercase, hyphens or underscores).",
                "prompt": "Goal: {agents->orchestrator->goal}. Use the audited inputs: {audited_availability}. Create objects for attendees (gerald, roy, barbara) and timeslots for the day using the mapping provided. Mark only the chosen_slot as feasible to yield a single-step plan. Ensure the problem declares the initial facts and sets the goal to (scheduled). Produce only the PDDL domain and problem wrapped in the required tags."
            }
        },
        "constraints": [
            "gerald_agent.availability->auditor.audit",
            "roy_agent.availability->auditor.audit",
            "barbara_agent.availability->auditor.audit",
            "auditor.audit->orchestrator.pddl"
        ]
    }
}