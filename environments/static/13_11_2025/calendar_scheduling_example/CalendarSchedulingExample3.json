{
    "name": "CalendarSchedulingExample3",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "calendar_agent",
            "preference_agent",
            "temporal_auditor",
            "orchestrator"
        ],
        "calendar_agent": {
            "private_information": [
                "You can normalize time ranges, compute free intervals from busy schedules, and intersect availabilities across participants.",
                "Use the environment init fields for time granularity and work window."
            ],
            "goal": "Derive all feasible one-hour meeting windows within work hours that satisfy every participant's existing schedule."
        },
        "preference_agent": {
            "private_information": [
                "When explicit preferences are missing, default to earliest feasible time within the work window and avoid cutting into lunch hours when possible.",
                "If multiple slots are equivalent, prefer those that minimize fragmentation of each participant's day."
            ],
            "goal": "Rank feasible slots based on default organizational preferences and any stated user preferences."
        },
        "temporal_auditor": {
            "private_information": [
                "Your role is to audit temporal and causal consistency across the proposed windows and rankings.",
                "Reject or flag any solution that relies on bookkeeping shortcuts such as abstract quota tokens or post-hoc penalties; only concrete time intervals and hard constraints are allowed.",
                "Validate that slot durations match the required meeting length and occur fully within the declared work window without conflicts."
            ],
            "goal": "Produce an audit report confirming which candidate slots are temporally consistent with all constraints and free of bookkeeping shortcuts."
        },
        "orchestrator": {
            "private_information": [
                "You coordinate all inputs and produce the final PDDL domain and problem suitable for the FastDownward solver.",
                "Model time as discrete slots at the configured granularity and encode availability as predicates.",
                "Choose a single valid slot and encode it as the goal state to schedule the meeting."
            ],
            "goal": "Integrate availability, preferences, and the audit to generate a final PDDL domain and problem that schedules a one-hour meeting satisfying all constraints."
        }
    },
    "environment": {
        "init": {
            "day": "Monday",
            "timezone": "Local",
            "grid_size": 0,
            "visibility": 0,
            "time_granularity_minutes": 30,
            "work_start": "09:00",
            "work_end": "17:00",
            "meeting_duration_minutes": 60
        },
        "public_information": [
            "Participants: Arthur, Michael, Samantha.",
            "Work window: Monday 09:00 to 17:00.",
            "Required meeting duration: 60 minutes.",
            "Arthur busy on Monday: 09:00-09:30, 10:30-12:00, 16:00-17:00.",
            "Michael busy on Monday: 13:00-13:30, 14:00-14:30.",
            "Samantha busy on Monday: 10:30-11:00, 12:00-15:00, 15:30-17:00.",
            "A solution exists that works with everyone's schedule.",
            "No additional explicit preferences were provided."
        ]
    },
    "workflow": {
        "calendar_agent": {
            "aggregate": {
                "input": [],
                "output": "calendar_windows",
                "system_prompt": "You are a calendar analysis specialist. Using the public information and environment initialization parameters, compute each participant's free intervals within the work window, then compute the intersection across all participants, respecting the meeting duration and time granularity. Return a concise JSON object with keys: free_by_participant, intersection_candidates, and assumptions (list any clarifying assumptions you did not make). Do not produce PDDL.",
                "prompt": "Your name is calendar_agent. Public information: {environment->public_information}. Init: {environment->init}. Your task is to derive all feasible one-hour windows on Monday within 09:00-17:00 that do not conflict with any participant's busy times, using a 30-minute granularity. Return normalized 24-hour times in HH:MM format. Do not add new events; only compute from given data."
            }
        },
        "preference_agent": {
            "rank": {
                "input": [
                    "calendar_windows"
                ],
                "output": "preference_ranking",
                "system_prompt": "You are a preference and policy analyzer. Rank the feasible slots based on default preferences when none are explicitly stated: earliest feasible slot first, then minimize disruption to each participant's day. Provide a JSON object with keys: ranked_slots (array from best to worst), rationale (short justification), and tie_breaks (criteria used when slots are equivalent). Do not produce PDDL.",
                "prompt": "Your name is preference_agent. You receive the feasible intersection windows from the calendar agent: {calendar_windows}. Public information for context: {environment->public_information}. Rank the slots and explain your ranking briefly."
            }
        },
        "temporal_auditor": {
            "audit": {
                "input": [
                    "calendar_windows",
                    "preference_ranking"
                ],
                "output": "audit_report",
                "system_prompt": "You are the temporal and causal consistency auditor. Verify that each candidate slot is fully within work hours, is at least the required duration, and conflicts with none of the listed busy intervals. Reject any candidate that relies on bookkeeping shortcuts such as abstract quota tokens, post-hoc penalties, or unspecified buffers. Provide a JSON object with keys: valid_slots, invalid_slots (each with reasons), and certification (boolean) indicating whether at least one slot is fully compliant. Do not produce PDDL.",
                "prompt": "Your name is temporal_auditor. Public information: {environment->public_information}. Input windows: {calendar_windows}. Preference ranking: {preference_ranking}. Validate temporal feasibility and provide a clear audit report listing compliant and non-compliant slots with reasons."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "calendar_windows",
                    "preference_ranking",
                    "audit_report"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert with multi-agent scheduling and PDDL for the FastDownward solver. Produce a PDDL domain and a PDDL problem that model meeting scheduling over discrete time slots of 30 minutes within Monday 09:00-17:00. Represent participants and candidate time slots as objects. Use predicates such as free ?p ?s, slot ?s, participant ?p, scheduled ?s, chosen ?s, and within_work_window ?s. Provide an action schedule_slot that selects a slot if it is free for all participants and within_work_window, achieving a goal of chosen ?s for one slot. Encode the initial state with availability facts only for the audited valid slots. Choose the earliest valid slot according to the ranking as the goal slot. Enclose the PDDL domain between <domain></domain> and the PDDL problem between <problem></problem> tags.",
                "prompt": "You are the orchestrator. Integrate the availability from the calendar agent: {calendar_windows}, the ranking from the preference agent: {preference_ranking}, and the audit results: {audit_report}. Produce a final PDDL domain and problem for FastDownward that schedules a one-hour meeting for Arthur, Michael, and Samantha in the earliest audited-valid slot, using 30-minute discrete slots from Monday 09:00 to 17:00. Ensure the initial state only includes free predicates for audited valid slots and that the goal selects the top-ranked audited-valid slot. Output only the PDDL domain and problem wrapped in the required tags."
            }
        },
        "constraints": [
            "calendar_agent.aggregate->preference_agent.rank",
            "calendar_agent.aggregate->temporal_auditor.audit",
            "preference_agent.rank->temporal_auditor.audit",
            "temporal_auditor.audit->orchestrator.pddl",
            "calendar_agent.aggregate->orchestrator.pddl",
            "preference_agent.rank->orchestrator.pddl"
        ]
    }
}