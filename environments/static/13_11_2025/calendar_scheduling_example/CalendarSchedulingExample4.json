{
    "name": "CalendarSchedulingExample4",
    "author": "Human",
    "agents": {
        "number": 5,
        "names": [
            "donna",
            "john",
            "billy",
            "temporal_auditor",
            "orchestrator"
        ],
        "donna": {
            "private_information": [
                "Busy on Monday during 14:00-14:30 and 15:30-16:00",
                "No soft-flex periods; only the listed busy intervals are blocked"
            ],
            "goal": "Publish accurate availability for a 30-minute meeting within Monday work hours, then attend the scheduled meeting."
        },
        "john": {
            "private_information": [
                "Busy on Monday during 11:00-11:30 and 16:30-17:00",
                "No soft-flex periods; only the listed busy intervals are blocked"
            ],
            "goal": "Publish accurate availability for a 30-minute meeting within Monday work hours, then attend the scheduled meeting."
        },
        "billy": {
            "private_information": [
                "Busy on Monday during 9:00-10:00, 10:30-14:00, and 14:30-17:00",
                "No soft-flex periods; only the listed busy intervals are blocked"
            ],
            "goal": "Publish accurate availability for a 30-minute meeting within Monday work hours, then attend the scheduled meeting."
        },
        "temporal_auditor": {
            "private_information": [
                "Role: audit temporal and causal consistency across agents",
                "Reject bookkeeping shortcuts such as quota tokens, post-hoc penalties, or invented flex windows",
                "Normalize time ranges to 24-hour HH:MM format and inclusive-exclusive semantics [start, end)"
            ],
            "goal": "Audit and reconcile the participants' availability, remove inconsistencies and shortcuts, and produce a normalized intersection of feasible 30-minute slots."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Coordinate agents to identify a mutually available 30-minute slot on Monday within work hours and produce a final PDDL domain and problem for the FastDownward solver that schedules the meeting."
        }
    },
    "environment": {
        "init": {
            "day": "Monday",
            "work_hours": {
                "start": "09:00",
                "end": "17:00"
            },
            "duration_minutes": 30,
            "time_format": "HH:MM",
            "interval_semantics": "[start, end)",
            "participants": [
                "Donna",
                "John",
                "Billy"
            ]
        },
        "public_information": [
            "Schedule a single 30-minute meeting on Monday within work hours 09:00-17:00.",
            "Participants: Donna, John, Billy.",
            "Use 24-hour time with inclusive-exclusive intervals [start, end).",
            "Assume there exists at least one feasible slot that satisfies all constraints.",
            "Each participant publishes only their true busy times; no invented flex or penalties are allowed."
        ]
    },
    "workflow": {
        "donna": {
            "publish_availability": {
                "input": [],
                "output": "availability_donna",
                "system_prompt": "You analyze personal calendar constraints and compute availability windows and exact 30-minute candidate slots within provided work hours. Output strictly the requested JSON fields and do not emit PDDL.",
                "prompt": "Your name is donna. Public information: {environment->public_information}. Your knowledge: {agents->donna->private_information}. Task: compute all free windows within work hours on {environment->init->day} and list all 30-minute candidate slots exactly matching the meeting duration. Return a JSON object with keys agent, day, free_windows, candidate_slots, rationale. Use 24-hour HH:MM format and inclusive-exclusive intervals like 10:00-10:30."
            }
        },
        "john": {
            "publish_availability": {
                "input": [],
                "output": "availability_john",
                "system_prompt": "You analyze personal calendar constraints and compute availability windows and exact 30-minute candidate slots within provided work hours. Output strictly the requested JSON fields and do not emit PDDL.",
                "prompt": "Your name is john. Public information: {environment->public_information}. Your knowledge: {agents->john->private_information}. Task: compute all free windows within work hours on {environment->init->day} and list all 30-minute candidate slots exactly matching the meeting duration. Return a JSON object with keys agent, day, free_windows, candidate_slots, rationale. Use 24-hour HH:MM format and inclusive-exclusive intervals like 10:00-10:30."
            }
        },
        "billy": {
            "publish_availability": {
                "input": [],
                "output": "availability_billy",
                "system_prompt": "You analyze personal calendar constraints and compute availability windows and exact 30-minute candidate slots within provided work hours. Output strictly the requested JSON fields and do not emit PDDL.",
                "prompt": "Your name is billy. Public information: {environment->public_information}. Your knowledge: {agents->billy->private_information}. Task: compute all free windows within work hours on {environment->init->day} and list all 30-minute candidate slots exactly matching the meeting duration. Return a JSON object with keys agent, day, free_windows, candidate_slots, rationale. Use 24-hour HH:MM format and inclusive-exclusive intervals like 10:00-10:30."
            }
        },
        "temporal_auditor": {
            "consistency_check": {
                "input": [
                    "availability_donna",
                    "availability_john",
                    "availability_billy"
                ],
                "output": "audited_availability",
                "system_prompt": "You audit temporal and causal consistency. You normalize formats, enforce inclusive-exclusive intervals, verify that only true busy times are used, and remove any bookkeeping shortcuts such as quota tokens, post-hoc penalties, and invented flex windows. You do not emit PDDL.",
                "prompt": "You will receive the three JSON availability reports: {availability_donna}, {availability_john}, {availability_billy}. Normalize time formats to HH:MM, ensure all times fall within {environment->init->work_hours} on {environment->init->day}, and compute the intersection of 30-minute candidate slots that all participants can attend. Return a JSON object with keys normalized_reports, intersection_slots_sorted_earliest_first, checks_performed, issues_found. Do not invent availability; if contradictions appear, explain them in issues_found and proceed with only the consistent slots."
            }
        },
        "orchestrator": {
            "synthesize_pddl": {
                "input": [
                    "audited_availability"
                ],
                "output": "pddl_schedule",
                "system_prompt": "You are an expert with PDDL for the FastDownward solver. You always provide a PDDL domain and a PDDL problem file to solve the task. Enclose the PDDL domain between <domain></domain> and the PDDL problem between <problem></problem>. Keep the model compatible with FastDownward using :strips, :typing, and :negative-preconditions. Use distinct types for participant and timeslot. Prefer the earliest feasible slot among those provided by the auditor.",
                "prompt": "Goal: schedule a single 30-minute meeting for Donna, John, and Billy on {environment->init->day} within work hours. Inputs: {audited_availability}. Construct a minimal domain with predicates such as busy ?p - participant ?s - timeslot, within-work-hours ?s, scheduled ?s, invited ?p, assigned ?p ?s. Provide one action schedule-at-slot that schedules the meeting at a chosen timeslot when all participants are not busy and the slot is within work hours. The problem should declare only the auditor-provided intersection timeslots as objects, set busy facts for participants at all other considered slots if needed, and set within-work-hours for all declared slots. Set the goal to (exists ?s - timeslot (scheduled ?s)) or equivalently schedule at a specific chosen slot via named object ordering so the solver picks the earliest. Output the complete domain and problem wrapped in the required tags."
            }
        },
        "constraints": [
            "donna.publish_availability->temporal_auditor.consistency_check",
            "john.publish_availability->temporal_auditor.consistency_check",
            "billy.publish_availability->temporal_auditor.consistency_check",
            "temporal_auditor.consistency_check->orchestrator.synthesize_pddl"
        ]
    }
}