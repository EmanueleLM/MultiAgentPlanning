{
    "name": "CalendarSchedulingExample5",
    "author": "Human",
    "agents": {
        "number": 5,
        "names": [
            "kathryn_calendar",
            "charlotte_calendar",
            "lauren_calendar",
            "consistency_auditor",
            "orchestrator"
        ],
        "kathryn_calendar": {
            "private_information": [
                "I represent Kathryn's calendar for Monday.",
                "Busy intervals (start inclusive, end exclusive): 09:00-09:30, 10:30-11:00, 11:30-12:00, 13:30-14:30, 16:30-17:00."
            ],
            "goal": "Provide Kathryn's free 30-minute slots within the work window to support meeting scheduling."
        },
        "charlotte_calendar": {
            "private_information": [
                "I represent Charlotte's calendar for Monday.",
                "Busy intervals (start inclusive, end exclusive): 12:00-12:30, 16:00-16:30.",
                "Preference: do not meet after 13:30 on Monday."
            ],
            "goal": "Provide Charlotte's free 30-minute slots within the work window and surface her time preference constraints."
        },
        "lauren_calendar": {
            "private_information": [
                "I represent Lauren's calendar for Monday.",
                "Busy intervals (start inclusive, end exclusive): 09:00-10:00, 12:00-12:30, 13:30-14:30, 15:00-16:00, 16:30-17:00."
            ],
            "goal": "Provide Lauren's free 30-minute slots within the work window to support meeting scheduling."
        },
        "consistency_auditor": {
            "private_information": [
                "I audit temporal and causal consistency across agents, resolve unit mismatches, and prevent bookkeeping shortcuts such as artificial quotas or post-hoc penalties.",
                "I normalize times to 30-minute granularity and check that proposed slots respect all constraints and preferences."
            ],
            "goal": "Validate and reconcile all calendars, compute the intersection of feasible 30-minute slots, and flag any inconsistencies."
        },
        "orchestrator": {
            "private_information": [
                "I integrate validated constraints and produce a final PDDL domain and problem for the FastDownwards solver to pick a meeting time."
            ],
            "goal": "Select a feasible 30-minute Monday slot between 09:00 and 17:00 for Kathryn, Charlotte, and Lauren, respecting all schedules and preferences."
        }
    },
    "environment": {
        "init": {
            "day": "Monday",
            "work_hours": "09:00-17:00",
            "slot_minutes": 30,
            "time_format": "HH:MM 24-hour",
            "solver": "FastDownwards"
        },
        "public_information": [
            "Participants: Kathryn, Charlotte, Lauren.",
            "Meeting duration: 30 minutes.",
            "Work window: Monday 09:00-17:00.",
            "There exists at least one feasible time satisfying all schedules and preferences."
        ]
    },
    "workflow": {
        "kathryn_calendar": {
            "calendar_report": {
                "input": [],
                "output": "availability_kathryn",
                "system_prompt": "You summarize a single participant's calendar. Output structured 30-minute free and busy intervals for the configured day and work window; keep times in HH:MM 24-hour, Monday context, half-open intervals [start, end). Avoid PDDL; produce concise, machine-readable JSON.",
                "prompt": "Your name is kathryn_calendar. Public context: {environment->public_information}. Private knowledge: {agents->kathryn_calendar->private_information}. Goal: {agents->kathryn_calendar->goal}. Produce a JSON object with keys: participant, day, work_window, busy, free."
            }
        },
        "charlotte_calendar": {
            "calendar_report": {
                "input": [],
                "output": "availability_charlotte",
                "system_prompt": "You summarize a single participant's calendar and preferences. Output structured 30-minute free and busy intervals and list explicit preferences. Avoid PDDL; produce concise, machine-readable JSON.",
                "prompt": "Your name is charlotte_calendar. Public context: {environment->public_information}. Private knowledge: {agents->charlotte_calendar->private_information}. Goal: {agents->charlotte_calendar->goal}. Produce a JSON object with keys: participant, day, work_window, busy, free, preferences."
            }
        },
        "lauren_calendar": {
            "calendar_report": {
                "input": [],
                "output": "availability_lauren",
                "system_prompt": "You summarize a single participant's calendar. Output structured 30-minute free and busy intervals for the configured day and work window; keep times in HH:MM 24-hour, Monday context, half-open intervals [start, end). Avoid PDDL; produce concise, machine-readable JSON.",
                "prompt": "Your name is lauren_calendar. Public context: {environment->public_information}. Private knowledge: {agents->lauren_calendar->private_information}. Goal: {agents->lauren_calendar->goal}. Produce a JSON object with keys: participant, day, work_window, busy, free."
            }
        },
        "consistency_auditor": {
            "audit": {
                "input": [
                    "availability_kathryn",
                    "availability_charlotte",
                    "availability_lauren"
                ],
                "output": "audited_feasible_slots",
                "system_prompt": "You are a temporal consistency auditor. Merge calendar summaries, normalize time units to 30-minute slots, detect and resolve overlaps, enforce preferences such as 'not after 13:30', and compute the intersection of free slots across all participants. Remove bookkeeping shortcuts or non-causal justifications; report only facts derivable from inputs.",
                "prompt": "Integrate the three availability reports. Validate Monday 09:00-17:00, 30-minute granularity. Return a JSON object with keys: feasible_slots (array of start times), rationale (short)."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "availability_kathryn",
                    "availability_charlotte",
                    "availability_lauren",
                    "audited_feasible_slots"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in multi-agent scheduling with PDDL. Produce a final PDDL domain and PDDL problem targeting the FastDownwards solver. Use discrete timeslot objects (30-minute granularity) for Monday between 09:00 and 17:00. Model availability with predicates like (free ?p ?t) and preference eligibility with (allowed ?t). Provide exactly one action schedule-at that assigns a single slot t when all attendees are free and t is allowed. Ensure uniqueness via a fluent (scheduled) that becomes true after scheduling. Do not emit extraneous commentary; output only the PDDL domain and problem enclosed in <domain></domain> and <problem></problem> tags.",
                "prompt": "Task: {agents->orchestrator->goal}. Public context: {environment->public_information}. Inputs: audited feasible slots plus individual availability and preferences may contain redundancies; rely on the auditor when conflicts arise. Construct domain 'calendar-meeting' with :requirements :typing :strips. Types: person, timeslot. Predicates: free (?p - person ?t - timeslot), allowed (?t - timeslot), scheduled. Action: schedule-at (?t - timeslot) with preconditions (and (not scheduled) (allowed ?t) (free kathryn ?t) (free charlotte ?t) (free lauren ?t)) and effect (and (scheduled)). Construct the problem with persons {kathryn, charlotte, lauren} and timeslots covering Monday 09:00..17:00 at 30-minute steps (e.g., t0900, t0930, t1000, ...). Initialize free/allowed according to the inputs, ensuring at least one feasible slot exists (earliest feasible is 10:00-10:30). Set goal (scheduled)."
            }
        },
        "constraints": [
            "kathryn_calendar.calendar_report->consistency_auditor.audit",
            "charlotte_calendar.calendar_report->consistency_auditor.audit",
            "lauren_calendar.calendar_report->consistency_auditor.audit",
            "consistency_auditor.audit->orchestrator.pddl"
        ]
    }
}