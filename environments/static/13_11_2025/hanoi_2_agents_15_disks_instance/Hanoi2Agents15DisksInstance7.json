{
    "name": "Hanoi2Agents15DisksInstance7",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "agent_1",
            "agent_2",
            "auditor",
            "orchestrator"
        ],
        "agent_1": {
            "private_information": [
                "I can only move disks: A, B, C, D, E, F, G, H",
                "I must obey Tower of Hanoi rules: move one disk at a time; never place a larger disk onto a smaller disk; only the top disk of a peg may be moved"
            ],
            "goal": "Contribute legal moves using only my permitted disks to achieve the target configuration."
        },
        "agent_2": {
            "private_information": [
                "I can only move disks: I, J, K, L, M, N, O",
                "I must obey Tower of Hanoi rules: move one disk at a time; never place a larger disk onto a smaller disk; only the top disk of a peg may be moved"
            ],
            "goal": "Contribute legal moves using only my permitted disks to achieve the target configuration."
        },
        "auditor": {
            "private_information": [
                "I audit temporal and causal consistency of proposed moves",
                "I detect and remove bookkeeping shortcuts (e.g., quotas, post-hoc penalties, implicit batching) so that only primitive, sequential, legal moves remain",
                "I ensure agent-disk restrictions and Hanoi legality are enforced at every step and that the final sequence reaches the exact goal state"
            ],
            "goal": "Validate and merge agents' proposed moves into a single, legal, temporally ordered sequence that achieves the goal without shortcuts."
        },
        "orchestrator": {
            "private_information": [
                "I coordinate agents, integrate the audited move sequence, and produce the final PDDL domain and problem aimed at the FastDownward solver"
            ],
            "goal": "Produce a correct PDDL domain and problem for the audited plan and present the final ordered move sequence."
        }
    },
    "environment": {
        "init": {
            "pegs": 3,
            "peg_names": [
                "left",
                "middle",
                "right"
            ],
            "disks": 15,
            "disk_order_smallest_to_largest": [
                "A",
                "B",
                "C",
                "D",
                "E",
                "F",
                "G",
                "H",
                "I",
                "J",
                "K",
                "L",
                "M",
                "N",
                "O"
            ],
            "disk_sizes": {
                "A": 1,
                "B": 2,
                "C": 3,
                "D": 4,
                "E": 5,
                "F": 6,
                "G": 7,
                "H": 8,
                "I": 9,
                "J": 10,
                "K": 11,
                "L": 12,
                "M": 13,
                "N": 14,
                "O": 15
            }
        },
        "public_information": [
            "This is a cooperative 2-agent Tower of Hanoi with 15 disks labeled A (smallest) through O (largest).",
            "Agent move permissions: agent_1 may move A, B, C, D, E, F, G, H; agent_2 may move I, J, K, L, M, N, O.",
            "Rules: move exactly one disk at a time; only the top disk of any peg can be moved; never place a larger disk atop a smaller disk.",
            "Initial configuration: left peg has (top\u2192bottom) A, B, C, D, E, F, G, H, I, J, K, L, M, N, O; middle peg is empty; right peg is empty.",
            "Goal configuration: left peg has (top\u2192bottom) C, D, E, F, G, H, I, J, K, L, M, N, O; middle peg is empty; right peg has (top\u2192bottom) A, B."
        ],
        "solution": {
            "ordered_moves": [
                "agent_1: move disk A from left to middle",
                "agent_1: move disk B from left to right",
                "agent_1: move disk A from middle to right"
            ],
            "justification": "Moving A to middle clears B; moving B to right places it on an empty peg; moving A onto B is legal since A is smaller than B; larger disks C..O remain on left unchanged; middle ends empty; right has A above B, matching the goal."
        }
    },
    "workflow": {
        "agent_1": {
            "propose_moves": {
                "input": [],
                "output": "moves_agent_1",
                "system_prompt": "You are an expert at generating Tower of Hanoi primitive moves under agent-specific disk permissions and legality constraints.",
                "prompt": "Your name is agent_1. Use the public information {environment->public_information} and your private information {agents->agent_1->private_information}. Propose a minimal, fully ordered list of primitive moves in the exact format 'agent_1: move disk X from peg1 to peg2' using only disks A, B, C, D, E, F, G, H that achieves the goal configuration. Do not emit PDDL; output only the move lines in order."
            }
        },
        "agent_2": {
            "propose_moves": {
                "input": [],
                "output": "moves_agent_2",
                "system_prompt": "You are an expert at generating Tower of Hanoi primitive moves under agent-specific disk permissions and legality constraints.",
                "prompt": "Your name is agent_2. Use the public information {environment->public_information} and your private information {agents->agent_2->private_information}. Propose a minimal, fully ordered list of primitive moves in the exact format 'agent_2: move disk X from peg1 to peg2' using only disks I, J, K, L, M, N, O that helps achieve the goal configuration. If no moves are required, output an empty list representation like '[]'. Do not emit PDDL."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "moves_agent_1",
                    "moves_agent_2"
                ],
                "output": "audited_moves",
                "system_prompt": "You audit temporal and causal consistency, enforce Tower of Hanoi legality, and remove bookkeeping shortcuts, producing a single sequential list of primitive moves that reaches the exact goal.",
                "prompt": "You are the auditor. Given agent move proposals, verify each move is legal (only top disk moves; no larger-on-smaller), respects disk-per-agent permissions, and strictly follows the Tower of Hanoi rules. Merge and order the moves into a single final sequence that achieves the exact goal in {environment->public_information}. If a simpler legal sequence exists, prefer it. Output only the final ordered move list in the format 'agent_i: move disk X from peg1 to peg2'."
            }
        },
        "orchestrator": {
            "synthesize_pddl": {
                "input": [
                    "audited_moves"
                ],
                "output": "pddl_orchestrator_fd",
                "system_prompt": "You are an expert in synthesizing classical PDDL domains and problems for the FastDownward solver. You must produce a valid, minimal STRIPS + typing PDDL domain and a problem that encode the audited Tower of Hanoi instance and allow reproducing the final plan. Always enclose the domain in <domain></domain> and the problem in <problem></problem> tags.",
                "prompt": "You are the orchestrator. Use the audited move list {audited_moves} along with the public information {environment->public_information}. Produce a PDDL domain and problem for FastDownward (use :requirements :strips :typing only; avoid numeric fluents and derived predicates). Model types 'peg' and 'disk', static ordering via a strict-smaller relation, and action move(d, from, to, a) where 'a' is the acting agent with static permissions allowed(a, d). Encode legality: d is top on 'from', 'to' is clear or its top is larger than d. Initial state: 15 disks stacked on 'left' A (top) to O (bottom); 'middle' empty; 'right' empty; include static allowed relations for agent_1 and agent_2 as per permissions. Goal state: 'right' has A above B and 'left' has C..O stacked in order with 'middle' empty; encode these as on/above relations sufficient to capture the stacks without requiring transitive closure (e.g., on(A, right), on(B, right), on(C, left), on(D, left), ..., on(O, left) and clear(middle) and no disk on middle). Also include the final ordered move sequence after the PDDL under a <plan></plan> tag with one action per line matching the format 'agent_i: move disk X from peg1 to peg2'."
            }
        },
        "constraints": [
            "agent_1.propose_moves->auditor.audit",
            "agent_2.propose_moves->auditor.audit",
            "auditor.audit->orchestrator.synthesize_pddl"
        ]
    }
}