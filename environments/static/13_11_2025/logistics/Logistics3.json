{
    "name": "Logistics3",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "domain_modeler",
            "state_parser",
            "consistency_auditor",
            "orchestrator"
        ],
        "domain_modeler": {
            "private_information": [
                "Expertise: Strips planning, action schema induction, predicate set design.",
                "Prefers lifted action schemas with variables (?x ?y ?z ...)."
            ],
            "goal": "Extract a complete, minimal, and consistent lifted action model (predicates, actions with preconditions/add/delete lists) from the public information."
        },
        "state_parser": {
            "private_information": [
                "Expertise: Parsing initial states and goals from semi-structured text.",
                "Produces normalized fact sets and enumerates used objects."
            ],
            "goal": "Produce clean, deduplicated, and normalized fact sets for Scenario A and Scenario B, including object universes and goal specifications."
        },
        "consistency_auditor": {
            "private_information": [
                "Role: Audit temporal/causal consistency and remove bookkeeping shortcuts.",
                "Eliminate artificial mechanisms such as quota tokens, post-hoc penalties, or other non-causal artifacts.",
                "Verify sample plans against preconditions/effects and flag mismatches and unsafe assumptions."
            ],
            "goal": "Audit the extracted action model and parsed scenarios for consistency; validate or refute sample plans; propose corrections that maintain causal soundness without bookkeeping crutches."
        },
        "orchestrator": {
            "private_information": [
                "Role: Integrate analyses and produce final artifacts.",
                "Target solver: FastDownward."
            ],
            "goal": "Synthesize a final PDDL domain and two PDDL problem files (Scenario A and Scenario B) targeting FastDownward, consistent with the audited model and scenarios."
        }
    },
    "environment": {
        "init": {
            "objects": [
                "object_0",
                "object_1",
                "object_2",
                "object_3",
                "object_4",
                "object_5",
                "object_6",
                "object_7",
                "object_8",
                "object_9"
            ],
            "types": [
                "obj"
            ],
            "solver": "FastDownward",
            "requirements": [
                ":strips",
                ":typing"
            ]
        },
        "public_information": [
            "Available actions (parameterized):\n- paltry ?x ?y ?z\n  pre: hand(?x), cats(?y), texture(?z), vase(?x ?y), next(?y ?z)\n  add: next(?x ?z)\n  del: vase(?x ?y)\n- sip ?x ?y ?z\n  pre: hand(?x), cats(?y), texture(?z), next(?x ?z), next(?y ?z)\n  add: vase(?x ?y)\n  del: next(?x ?z)\n- clip ?x ?y ?z\n  pre: hand(?x), sneeze(?y), texture(?z), next(?y ?z), next(?x ?z)\n  add: vase(?x ?y)\n  del: next(?x ?z)\n- wretched ?w ?x ?y ?z\n  pre: sneeze(?w), texture(?x), texture(?y), stupendous(?z), next(?w ?x), collect(?x ?z), collect(?y ?z)\n  add: next(?w ?y)\n  del: next(?w ?x)\n- memory ?x ?y ?z\n  pre: cats(?x), spring(?y), spring(?z), next(?x ?y)\n  add: next(?x ?z)\n  del: next(?x ?y)\n- tightfisted ?x ?y ?z\n  pre: hand(?x), sneeze(?y), texture(?z), next(?y ?z), vase(?x ?y)\n  add: next(?x ?z)\n  del: vase(?x ?y)",
            "Predicates used across the domain: hand(?x), cats(?x), sneeze(?x), spring(?x), stupendous(?x), texture(?x), next(?x ?y), vase(?x ?y), collect(?x ?y).",
            "Scenario A initial state facts:\n  cats(object_0), collect(object_5 object_1), collect(object_6 object_2), hand(object_7), hand(object_8), next(object_0 object_6), next(object_3 object_5), next(object_4 object_6), next(object_7 object_6), next(object_8 object_6), sneeze(object_3), sneeze(object_4), spring(object_5), spring(object_6), stupendous(object_1), stupendous(object_2), texture(object_5), texture(object_6).",
            "Scenario A goal: next(object_7 object_5) and next(object_8 object_5).",
            "Scenario A provided plan (for audit):\n  1) sip object_8 object_0 object_6\n  2) sip object_7 object_0 object_6\n  3) memory object_0 object_6 object_5\n  4) paltry object_8 object_0 object_5\n  5) paltry object_7 object_0 object_5",
            "Scenario B initial state facts:\n  cats(object_0), cats(object_1), collect(object_6 object_2), collect(object_7 object_3), hand(object_8), hand(object_9), next(object_0 object_6), next(object_1 object_6), next(object_4 object_6), next(object_5 object_7), next(object_8 object_7), next(object_9 object_7), sneeze(object_4), sneeze(object_5), spring(object_6), spring(object_7), stupendous(object_2), stupendous(object_3), texture(object_6), texture(object_7).",
            "Scenario B goal: next(object_8 object_7) and next(object_9 object_6).",
            "Scenario B has no provided plan."
        ]
    },
    "workflow": {
        "domain_modeler": {
            "extract_actions": {
                "input": [],
                "output": "action_schemas",
                "system_prompt": "You are a domain modeling expert. Read the public information and extract a lifted STRIPS-like action model. Do not emit PDDL. Instead, return a compact JSON structure with: predicates (with arities), actions (each with name, parameters, preconditions, add, del). Keep parameter names as ?x ?y ?z ?w and reference predicates exactly as stated. Preserve action semantics exactly as given; do not invent extra bookkeeping predicates.",
                "prompt": "Your name is domain_modeler. You are in an environment with the following public information:\n{environment->public_information}\nYour task: extract the action schemas as a data model suitable for orchestration. Avoid generating PDDL; produce only the JSON action model."
            }
        },
        "state_parser": {
            "parse_scenario_a": {
                "input": [],
                "output": "scenario_a_facts",
                "system_prompt": "You parse semi-structured descriptions of initial states and goals. Produce a normalized JSON containing: objects, init (set of facts), goal (set of facts). Do not emit PDDL.",
                "prompt": "Your name is state_parser. Parse Scenario A from the public information:\n{environment->public_information}\nNormalize duplicate facts if any, and list all objects referenced. Provide no PDDL."
            },
            "parse_scenario_b": {
                "input": [],
                "output": "scenario_b_facts",
                "system_prompt": "You parse semi-structured descriptions of initial states and goals. Produce a normalized JSON containing: objects, init (set of facts), goal (set of facts). Do not emit PDDL.",
                "prompt": "Your name is state_parser. Parse Scenario B from the public information:\n{environment->public_information}\nNormalize duplicate facts if any, and list all objects referenced. Provide no PDDL."
            }
        },
        "consistency_auditor": {
            "audit_and_clean": {
                "input": [
                    "action_schemas",
                    "scenario_a_facts",
                    "scenario_b_facts"
                ],
                "output": "audit_report",
                "system_prompt": "You are the consistency auditor. Tasks:\n- Check the lifted action schemas for internal consistency.\n- Validate Scenario A's provided plan against the preconditions/effects; flag any step whose preconditions are not satisfied at execution time.\n- Identify and remove bookkeeping shortcuts (e.g., artificial tokens, post-hoc penalties). Ensure only causally grounded predicates remain.\n- Report corrections or clarifications needed to make the model and scenarios consistent.\nReturn a concise JSON report including issues, proposed fixes, and a clean model delta. Do not emit PDDL.",
                "prompt": "Your name is consistency_auditor. Audit using these inputs:\n- Action model: {action_schemas}\n- Scenario A facts: {scenario_a_facts}\n- Scenario B facts: {scenario_b_facts}\nProduce an audit report with any causal violations and recommended corrections. Avoid PDDL."
            }
        },
        "orchestrator": {
            "synthesize_pddl": {
                "input": [
                    "action_schemas",
                    "scenario_a_facts",
                    "scenario_b_facts",
                    "audit_report"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You orchestrate multi-agent inputs into final planning artifacts. Your job: produce a PDDL domain and two PDDL problem files (Scenario A and Scenario B) compatible with the FastDownward solver.\nRequirements:\n- Respect the audited action model; incorporate auditor corrections.\n- Use :strips and :typing (type: obj) only; avoid negative preconditions other than allowed via delete lists.\n- Predicates (from the problem description): hand, cats, sneeze, spring, stupendous, texture (arity 1); next, vase, collect (arity 2).\n- Actions: paltry, sip, clip, wretched, memory, tightfisted with the exact preconditions and effects as given in the public information.\n- Objects: include all objects referenced (object_0..object_9) and any others parsed by the state parser.\nOutput format:\n- Enclose the domain in <domain></domain> tags.\n- Enclose each problem in <problem name=\"scenario_a\"></problem> and <problem name=\"scenario_b\"></problem> tags.\n- Ensure problems include :domain reference, :objects with type obj, :init facts, and :goal conjunction.\n- The result must be directly consumable by FastDownward.\nDo not include any extraneous commentary outside the requested tags.",
                "prompt": "Integrate the inputs to generate final PDDL:\n- Action model: {action_schemas}\n- Scenario A: {scenario_a_facts}\n- Scenario B: {scenario_b_facts}\n- Audit report: {audit_report}\nProduce a single response containing:\n<domain>...</domain>\n<problem name=\"scenario_a\">...</problem>\n<problem name=\"scenario_b\">...</problem>"
            }
        },
        "constraints": [
            "domain_modeler.extract_actions->consistency_auditor.audit_and_clean",
            "state_parser.parse_scenario_a->consistency_auditor.audit_and_clean",
            "state_parser.parse_scenario_b->consistency_auditor.audit_and_clean",
            "consistency_auditor.audit_and_clean->orchestrator.synthesize_pddl"
        ]
    }
}