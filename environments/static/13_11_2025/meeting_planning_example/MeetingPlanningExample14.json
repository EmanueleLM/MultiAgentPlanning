{
    "name": "MeetingPlanningExample14",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "travel_modeler",
            "scheduler",
            "auditor",
            "orchestrator"
        ],
        "travel_modeler": {
            "private_information": [
                "I translate public facts into a directed, weighted travel graph with explicit time units.",
                "I do not speculate beyond the given distances; if an edge is not provided, it is not assumed."
            ],
            "goal": "Build a precise travel-time graph to support schedule generation and validation."
        },
        "scheduler": {
            "private_information": [
                "I enumerate multiple feasible day itineraries that respect travel times and availability windows.",
                "I prefer options that meet constraints exactly and avoid unnecessary idle time."
            ],
            "goal": "Propose several distinct candidate schedules that maximize the number of friends met while ensuring at least 120 minutes with Mary."
        },
        "auditor": {
            "private_information": [
                "I remove bookkeeping shortcuts such as quota tokens or post-hoc penalties.",
                "I verify temporal and causal consistency: start state, travel durations, availability windows, and meeting-length requirements.",
                "I reject plans that assume teleportation, time-skips, or unmodeled edges."
            ],
            "goal": "Audit candidate schedules against the travel graph and constraints; keep only sound schedules and compute clear, comparable metrics."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Coordinate all information, select the best feasible schedule, and compile the final PDDL domain and problem targeting the FastDownwards solver."
        }
    },
    "environment": {
        "init": {
            "time_unit": "minutes",
            "start_time": "09:00",
            "time_horizon_end": "22:00",
            "locations": [
                "Nob Hill",
                "Marina District"
            ],
            "solver_target": "FastDownwards",
            "preferred_objective": "Maximize friends met; ensure at least 120 minutes with Mary; break ties by minimizing total travel time and idle time."
        },
        "public_information": [
            "You arrive at Nob Hill at 09:00.",
            "Mary is available at Marina District from 20:00 to 22:00.",
            "You want to meet Mary for at least 120 minutes.",
            "Travel time Nob Hill -> Marina District is 11 minutes.",
            "Travel time Marina District -> Nob Hill is 12 minutes.",
            "No other locations or friends are known beyond those listed."
        ]
    },
    "workflow": {
        "travel_modeler": {
            "build_graph": {
                "input": [],
                "output": "travel_graph",
                "system_prompt": "You are a route-graph builder and travel-time analyst. Output a compact JSON object with fields: nodes (list of location names), edges (list of {from, to, minutes}), time_unit, and notes. Do not propose schedules or PDDL.",
                "prompt": "Construct the directed travel-time graph from the known places and distances in the environment. Use only the provided public facts. Public info: {environment->public_information}. Produce a minimal, lossless representation that preserves asymmetry in travel times."
            }
        },
        "scheduler": {
            "enumerate_schedules": {
                "input": [
                    "travel_graph"
                ],
                "output": "candidate_schedules",
                "system_prompt": "You propose diverse, feasible day itineraries that satisfy time windows and travel times. Output 3-5 distinct candidate schedules as a JSON list. Each schedule is a list of steps with fields: at (24h HH:MM), action (one of wait, move, meet), from, to (if move), minutes, and rationale. Do not emit PDDL.",
                "prompt": "Your name is scheduler. Start state and goals are given below. Public info: {environment->public_information}. Graph: {travel_graph}. Generate multiple distinct schedules from 09:00 to 22:00 that ensure meeting Mary for at least 120 minutes within her availability window at Marina District. Use only known locations and edges. Vary departure times and waiting strategies to produce different feasible options."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "travel_graph",
                    "candidate_schedules"
                ],
                "output": "audited_schedules",
                "system_prompt": "You are a temporal/causal consistency auditor. Validate schedules against the directed graph, start time/location, availability windows, and minimum meeting duration. Remove bookkeeping shortcuts and reject any infeasible plan. For each accepted plan, compute metrics: friends_met_count, mary_meeting_minutes, total_travel_minutes, total_idle_minutes, earliest_arrival_for_mary, feasibility_reasoning. Output JSON with fields: accepted (ranked best-first), rejected (with reasons).",
                "prompt": "Audit the provided candidate schedules. Public info: {environment->public_information}. Graph: {travel_graph}. Candidates: {candidate_schedules}. Ensure all move durations match the graph; ensure start is Nob Hill at 09:00; ensure Mary is met entirely within 20:00-22:00 for at least 120 minutes; ensure no time overlaps or negative durations; ensure no unlisted edges are used. Rank accepted schedules to maximize friends_met_count and mary_meeting_minutes, then minimize total_travel_minutes and total_idle_minutes."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "travel_graph",
                    "audited_schedules"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert with PDDL for the FastDownwards solver (Fast Downward). Produce a final PDDL domain and problem that encode the chosen audited schedule and constraints. Use a formulation compatible with Fast Downward (classical planning is acceptable; if you need time, discretize it explicitly as objects with a successor relation). Enclose the PDDL domain between <domain></domain> and the PDDL problem between <problem></problem> tags.",
                "prompt": "Select the top-ranked feasible schedule from: {audited_schedules}. Use the travel graph: {travel_graph}. Compile a PDDL domain and problem that capture locations, time discretization (if needed), actions for waiting, moving with asymmetric costs/durations, and meeting Mary within 20:00-22:00 for at least 120 minutes. Initial state: at Nob Hill at 09:00. Goal: meet Mary for at least 120 minutes and complete within the day horizon. If discretizing time, introduce time objects and successor relations; encode movement costs via action costs or step counts; ensure that meeting actions are only applicable within Mary\u2019s availability. Output only the two PDDL blocks wrapped in the required tags."
            }
        },
        "constraints": [
            "travel_modeler.build_graph->scheduler.enumerate_schedules",
            "travel_modeler.build_graph->auditor.audit",
            "scheduler.enumerate_schedules->auditor.audit",
            "auditor.audit->orchestrator.pddl",
            "travel_modeler.build_graph->orchestrator.pddl"
        ]
    }
}