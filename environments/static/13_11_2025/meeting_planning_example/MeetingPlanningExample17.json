{
    "name": "MeetingPlanningExample17",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "scheduler",
            "route_planner",
            "auditor",
            "orchestrator"
        ],
        "scheduler": {
            "private_information": [
                "I generate multiple schedule alternatives and avoid assuming data that is not provided.",
                "I prefer simple, explainable itineraries with minimal idle time.",
                "I will include buffers before meetings when feasible."
            ],
            "goal": "Propose feasible day schedules starting at 09:00 at Alamo Square to meet Matthew at Sunset District for at least 15 minutes within his availability, maximizing the number of friends met when possible."
        },
        "route_planner": {
            "private_information": [
                "I use only the provided directed travel times and do not invent additional routes.",
                "I compute earliest and latest feasible arrival windows consistent with given durations."
            ],
            "goal": "Derive feasible travel legs and time windows using the directed travel times to support the scheduling decision."
        },
        "auditor": {
            "private_information": [
                "I enforce temporal and causal consistency.",
                "I remove bookkeeping shortcuts such as teleportation, quota tokens, post-hoc penalties, or retroactive edits.",
                "I ensure meetings satisfy minimum duration and occur within stated availability windows."
            ],
            "goal": "Audit candidate schedules for correctness against travel durations and time-window constraints, rejecting or correcting any infeasible plans."
        },
        "orchestrator": {
            "private_information": [
                "I integrate analyses from other agents and produce the final PDDL domain and problem for the FastDownward solver.",
                "I choose the best validated schedule according to ranking guidance."
            ],
            "goal": "Select the best feasible schedule and produce the final PDDL domain and problem representing the plan to meet Matthew as required."
        }
    },
    "environment": {
        "init": {
            "city": "San Francisco",
            "time_format": "24h",
            "start_location": "Alamo Square",
            "arrival_time_at_start": "09:00",
            "meeting_min_duration_minutes": 15,
            "travel_times_minutes": {
                "Alamo Square->Sunset District": 16,
                "Sunset District->Alamo Square": 17
            },
            "people": [
                {
                    "name": "Matthew",
                    "location": "Sunset District",
                    "availability_start": "13:30",
                    "availability_end": "14:30",
                    "min_meeting_minutes": 15
                }
            ]
        },
        "public_information": [
            "You arrive at Alamo Square at 09:00.",
            "Matthew will be at Sunset District from 13:30 to 14:30.",
            "You would like to meet Matthew for at least 15 minutes.",
            "Directed travel times in minutes: Alamo Square to Sunset District is 16, Sunset District to Alamo Square is 17.",
            "Goal: visit San Francisco for the day and meet as many friends as possible; currently only Matthew's availability is known."
        ]
    },
    "workflow": {
        "scheduler": {
            "enumerate_schedules": {
                "input": [],
                "output": "candidate_schedules",
                "system_prompt": "You are a careful trip scheduler. Enumerate diverse, feasible schedule candidates in JSON. Do not emit PDDL. Do not assume data beyond what is provided.",
                "prompt": "Your name is scheduler. Public information: {environment->public_information}. Private knowledge: {agents->scheduler->private_information}. Goal: {agents->scheduler->goal}. Produce 3 to 5 candidate schedules as a JSON object under key schedules. Each schedule should include: named itinerary, ordered legs with start_time, end_time, from, to, duration_minutes, a meeting block for Matthew if present with location and duration, buffer minutes, and a short rationale. Keep times in 24h format."
            }
        },
        "route_planner": {
            "compute_routes": {
                "input": [],
                "output": "route_options",
                "system_prompt": "You are a routing specialist. Compute feasible route and timing options using only the provided directed travel times. Do not emit PDDL.",
                "prompt": "Public information: {environment->public_information}. From start at 09:00 at Alamo Square, compute earliest and latest feasible arrival times to reach Sunset District for Matthew's window and to return to Alamo Square. Use only the given directed travel durations. Return JSON with keys routes (legs with earliest_departure, earliest_arrival, and slack assumptions) and feasibility_notes."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "candidate_schedules",
                    "route_options"
                ],
                "output": "validated_schedules",
                "system_prompt": "You are a temporal and causal consistency auditor. Remove bookkeeping shortcuts such as teleportation, quota tokens, post-hoc penalties, and retroactive edits. Ensure schedule feasibility against travel times and availability windows. Do not emit PDDL.",
                "prompt": "You receive candidate schedules and route options. Validate each schedule against constraints: travel must precede arrival, legs must respect the directed travel durations, no overlapping legs except explicit waiting buffers, Matthew meeting must be at Sunset District within 13:30 to 14:30 and last at least 15 minutes, and all times in 24h format. Output JSON with valid_schedules (with any corrected timestamps if small rounding is needed), rejected_schedules (with reasons), and audit_notes."
            }
        },
        "scorer": {
            "rank": {
                "input": [
                    "validated_schedules"
                ],
                "output": "ranked_schedules",
                "system_prompt": "You are a decision analyst. Rank valid schedules without emitting PDDL. Primary objective: maximize number of friends met. With ties, prefer greater Matthew meeting duration, then minimize total idle time, then minimize total travel time, then prefer earlier completion time.",
                "prompt": "Use validated schedules and score them according to the stated objectives. Return JSON with ranked list including score details, best_schedule, and tie-break explanations."
            }
        },
        "orchestrator": {
            "finalize_pddl": {
                "input": [
                    "candidate_schedules",
                    "route_options",
                    "validated_schedules",
                    "ranked_schedules"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert with PDDL targeting the FastDownward solver. Always provide one PDDL domain and one PDDL problem that encode the chosen plan and constraints. Enclose the PDDL domain between <domain></domain> and the PDDL problem between <problem></problem>. Use a single agent traveler with actions such as travel and meet. If you do not model continuous time, encode sequencing via predicates and include clear comments with intended timestamps. Keep object names simple: locations alamo_square and sunset_district, person matthew.",
                "prompt": "You will receive candidate, route, validated, and ranked schedules. Choose the best schedule. Build a PDDL domain and problem for FastDownward that achieves meeting matthew for at least 15 minutes at sunset_district within 13:30 to 14:30, starting at alamo_square at 09:00. Ensure the initial state, objects, and goal reflect the chosen schedule and the directed travel durations. Provide exactly one <domain>...</domain> section and one <problem>...</problem> section."
            }
        },
        "constraints": [
            "scheduler.enumerate_schedules->auditor.audit",
            "route_planner.compute_routes->auditor.audit",
            "auditor.audit->scorer.rank",
            "scorer.rank->orchestrator.finalize_pddl"
        ]
    }
}