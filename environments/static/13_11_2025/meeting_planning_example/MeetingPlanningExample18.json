{
    "name": "MeetingPlanningExample18",
    "author": "Human",
    "agents": {
        "number": 5,
        "names": [
            "availability_agent",
            "route_estimator",
            "scheduler",
            "auditor",
            "orchestrator"
        ],
        "availability_agent": {
            "private_information": [
                "I curate known friends and their availability windows without inventing new facts.",
                "If some friends are unspecified, I keep placeholders and mark data as unknown rather than assuming."
            ],
            "goal": "Compile clear, normalized availability windows for all friends mentioned, enabling downstream schedule generation that maximizes meetings while ensuring at least 75 minutes with Betty."
        },
        "route_estimator": {
            "private_information": [
                "I model directed travel-time edges between neighborhoods in minutes.",
                "I do not alter or infer unprovided travel times; I only use given data and clearly flag missing edges."
            ],
            "goal": "Provide a directed travel-time model and basic reachability timing so that itineraries can compute feasible arrivals and meeting durations."
        },
        "scheduler": {
            "private_information": [
                "I enumerate multiple distinct feasible itineraries across the day using availability and travel models.",
                "I aim to maximize the number of friends met while guaranteeing at least 75 minutes with Betty within her availability."
            ],
            "goal": "Propose several candidate day schedules starting at 09:00 at Marina District, compute arrival and meeting times, and rank candidates by friends met and slack against constraints."
        },
        "auditor": {
            "private_information": [
                "I audit temporal and causal consistency, recompute timing precisely, and reject bookkeeping shortcuts such as quota tokens, arbitrary post-hoc penalties, or unexplained allowances.",
                "I ensure that travel precedes presence, that meetings occur only when both person and agent co-locate, and that minimum durations are actually satisfied."
            ],
            "goal": "Validate and, if needed, correct candidate itineraries to ensure they truly satisfy constraints and durations, especially a continuous 75-minute meeting with Betty within 20:30\u201322:00 at Richmond District."
        },
        "orchestrator": {
            "private_information": [
                "I integrate curated availability, travel model, enumerated schedules, and audit findings."
            ],
            "goal": "Produce a final PDDL domain and problem, suitable for the FastDownward solver, that captures locations, travel durations, presence windows, and a required meeting of at least 75 minutes with Betty; where possible, the problem should enable choosing a schedule that maximizes friends met while satisfying all constraints."
        }
    },
    "environment": {
        "init": {
            "time_unit": "minutes",
            "time_format": "HH:MM",
            "start_location": "Marina District",
            "arrival_time": "09:00",
            "planning_horizon_end": "22:30",
            "locations": [
                "Marina District",
                "Richmond District"
            ],
            "travel_times_directed_minutes": {
                "Marina District": {
                    "Richmond District": 11
                },
                "Richmond District": {
                    "Marina District": 9
                }
            }
        },
        "public_information": [
            "Objective: Visit San Francisco for the day and meet as many friends as possible.",
            "You arrive at Marina District at 09:00.",
            "Betty will be at Richmond District from 20:30 to 22:00.",
            "You want to meet Betty for a minimum of 75 minutes as a continuous block within her availability.",
            "Directed travel time: Marina District to Richmond District takes 11 minutes.",
            "Directed travel time: Richmond District to Marina District takes 9 minutes.",
            "Unknown friends beyond Betty are not specified; do not fabricate availability for them."
        ]
    },
    "workflow": {
        "availability_agent": {
            "collect": {
                "input": [],
                "output": "availability_data",
                "system_prompt": "You curate friend availability without inventing facts and normalize time windows into a consistent format.",
                "prompt": "Extract all friend availability mentioned in the environment and express them as normalized time windows using HH:MM in local time. Include the friend\u2019s name, location, earliest_start, latest_end, and any minimum required meeting duration. If a friend is not specified, record no entry for them. Ensure Betty\u2019s window is 20:30 to 22:00 at Richmond District and the required meeting duration is at least 75 minutes. Provide a compact JSON object with this information."
            }
        },
        "route_estimator": {
            "derive": {
                "input": [],
                "output": "travel_model",
                "system_prompt": "You provide a directed travel-time model strictly from given data and flag missing edges.",
                "prompt": "Build a directed travel-time representation between listed neighborhoods using minutes. Include edges explicitly provided: Marina District -> Richmond District: 11; Richmond District -> Marina District: 9. Do not add new edges. Provide a JSON object with nodes, directed_edges, and a brief note on missing edges being unknown."
            }
        },
        "scheduler": {
            "enumerate": {
                "input": [
                    "availability_data",
                    "travel_model"
                ],
                "output": "candidate_schedules",
                "system_prompt": "You generate multiple feasible day itineraries from 09:00 start at Marina District, considering availability windows and directed travel times.",
                "prompt": "Using the curated availability and travel model, enumerate at least three distinct feasible itineraries for the day. Each itinerary should list chronological steps with fields: time_start, time_end, action (travel or meet), from, to, location, person (if meeting), and duration_minutes. Respect the start at 09:00 at Marina District. Guarantee a continuous meeting block with Betty of at least 75 minutes fully within 20:30\u201322:00 at Richmond District. Compute arrivals using directed travel times. For ranking, prefer itineraries that meet the most friends; if ties, prefer larger slack within Betty\u2019s window; if still tied, prefer less total travel time. Since only Betty is specified, ensure at least the Betty meeting is included and avoid inventing other friends. Output a JSON object containing candidates, each with a score summary and rationale."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "candidate_schedules",
                    "availability_data",
                    "travel_model"
                ],
                "output": "audit_report",
                "system_prompt": "You audit temporal and causal consistency and remove bookkeeping shortcuts.",
                "prompt": "Audit every candidate itinerary for feasibility. Recompute all arrival and meeting times using the directed travel model. Ensure no step overlaps illegally, that travel precedes presence, and that the Betty meeting is a single continuous block of at least 75 minutes entirely within 20:30\u201322:00 at Richmond District. Reject schedules relying on quotas, post-hoc penalties, or unexplained allowances. For each candidate, produce a verdict (valid or invalid), corrected timings if needed, and explicit reasons. Output a JSON report with validated_candidates and rejected_candidates."
            }
        },
        "orchestrator": {
            "pddl_synthesis": {
                "input": [
                    "availability_data",
                    "travel_model",
                    "candidate_schedules",
                    "audit_report"
                ],
                "output": "final_pddl",
                "system_prompt": "You are an expert with PDDL for FastDownward. You will output a PDDL domain and a PDDL problem that encode locations, directed travel durations, presence windows, and a required minimum meeting duration with Betty. You will enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags.",
                "prompt": "Integrate the availability data, directed travel model, candidate schedules, and the audit report. Produce a PDDL domain and problem suitable for the FastDownward solver. Requirements: model locations as objects; model travel as directed actions with action costs equal to travel minutes; model time with numeric fluents sufficient to enforce that the meeting with Betty lasts at least 75 minutes within the window 20:30\u201322:00; initial state starts at Marina District at time 09:00; include Betty at Richmond District available from 20:30 to 22:00; include a meet action that requires co-location and increments a fluent tracking continuous meeting time with Betty; enforce a goal that the cumulative continuous meeting time with Betty is at least 75 minutes; include a plan metric minimizing total-cost to prefer less travel when the goal is satisfied. If additional friends are unknown, do not create them. Ensure the PDDL is syntactically valid for FastDownward, provide minimal but sufficient objects and predicates, and keep the model consistent with directed travel durations."
            }
        },
        "constraints": [
            "availability_agent.collect->scheduler.enumerate",
            "route_estimator.derive->scheduler.enumerate",
            "scheduler.enumerate->auditor.audit",
            "availability_agent.collect->orchestrator.pddl_synthesis",
            "route_estimator.derive->orchestrator.pddl_synthesis",
            "scheduler.enumerate->orchestrator.pddl_synthesis",
            "auditor.audit->orchestrator.pddl_synthesis"
        ]
    }
}