{
    "name": "MeetingPlanningExample2",
    "author": "Human",
    "agents": {
        "number": 5,
        "names": [
            "itinerary_planner",
            "map_expert",
            "availability_collector",
            "time_auditor",
            "orchestrator"
        ],
        "itinerary_planner": {
            "private_information": [
                "Preference: maximize number of friends met with hard constraint to meet Jessica for at least 90 minutes",
                "Arrive at Haight-Ashbury at 09:00",
                "Time granularity is 15 minutes",
                "Minimize idle time when possible"
            ],
            "goal": "Generate multiple diverse day itineraries that respect travel times and friend availability, ensuring at least one candidate satisfies a 90-minute continuous meeting with Jessica during her availability window."
        },
        "map_expert": {
            "private_information": [
                "Only known travel times are between Haight-Ashbury and Sunset District",
                "Haight-Ashbury to Sunset District: 15 minutes",
                "Sunset District to Haight-Ashbury: 15 minutes",
                "Unknown routes must not be invented"
            ],
            "goal": "Provide a precise and minimal distance matrix in minutes for the known locations, without adding unknown routes."
        },
        "availability_collector": {
            "private_information": [
                "Jessica will be at Sunset District from 15:15 to 20:15",
                "The friend list is incomplete and only Jessica is known for now"
            ],
            "goal": "Publish the known availability windows of friends and the locations where they can be met, without inferring or fabricating missing information."
        },
        "time_auditor": {
            "private_information": [
                "Role: audit temporal and causal consistency across candidate itineraries",
                "Remove bookkeeping shortcuts such as quota tokens or post-hoc penalties; only allow explicit time transitions, travel legs, and continuous meeting intervals",
                "Verify that meeting durations are continuous and within availability windows, and that travel legs consume the correct time"
            ],
            "goal": "Check that each proposed schedule is temporally and causally valid given travel times and availabilities, reject inconsistent plans, annotate fixes, and produce an audited set of feasible schedules."
        },
        "orchestrator": {
            "private_information": [
                "Integrate audited schedules, distances, and availabilities to produce a final PDDL domain and problem consumable by the Fast Downward solver",
                "Use classical planning with 15-minute discrete timeslots and a stage-based approach to enforce a 90-minute continuous meeting with Jessica"
            ],
            "goal": "Synthesize the final PDDL domain and problem that captures locations, 15-minute timeslots, travel, waiting, and a 6-slot continuous meeting requirement for Jessica within her availability window."
        }
    },
    "environment": {
        "init": {
            "time_units": "minutes",
            "time_granularity_min": 15,
            "start_time": "09:00",
            "end_time": "21:00",
            "start_location": "Haight-Ashbury",
            "locations": [
                "Haight-Ashbury",
                "Sunset District"
            ]
        },
        "public_information": [
            "You arrive at Haight-Ashbury at 09:00.",
            "Travel time Haight-Ashbury to Sunset District: 15 minutes.",
            "Travel time Sunset District to Haight-Ashbury: 15 minutes.",
            "Jessica will be at Sunset District from 15:15 to 20:15.",
            "You want to meet Jessica for a minimum of 90 minutes.",
            "Objective: meet as many friends as possible given known constraints; currently only Jessica is known."
        ]
    },
    "workflow": {
        "itinerary_planner": {
            "propose_schedules": {
                "input": [
                    "distance_matrix",
                    "availability_facts"
                ],
                "output": "itinerary_options",
                "system_prompt": "You are a day-itinerary designer who creates several diverse and feasible schedules using discrete 15-minute steps, respecting travel times and availability; do not produce PDDL and do not assume unknown routes or friends.",
                "prompt": "Your name is itinerary_planner. Consider the public information {environment->public_information} and the inputs you receive. Propose 3 to 5 distinct itineraries starting at Haight-Ashbury at 09:00, optionally including waits or returns, and ensure at least one candidate contains a continuous 90-minute meeting with Jessica at Sunset District within her availability window. Structure each itinerary with ordered steps including time, location, action, and rationale, and avoid inventing unknown distances or friends."
            }
        },
        "map_expert": {
            "compile_distances": {
                "input": [],
                "output": "distance_matrix",
                "system_prompt": "You are a geospatial analyst and must only publish distances that are explicitly known; do not infer or add new locations or edges.",
                "prompt": "Your name is map_expert. From the public information {environment->public_information}, output a compact distance matrix in minutes for the known locations Haight-Ashbury and Sunset District, including both directions. Indicate clearly that other routes are unknown and must not be used."
            }
        },
        "availability_collector": {
            "publish_availability": {
                "input": [],
                "output": "availability_facts",
                "system_prompt": "You curate friend availability facts without speculation; only publish what is known.",
                "prompt": "Your name is availability_collector. From the public information {environment->public_information}, publish a structured list of availability windows with locations for each friend. Include Jessica with location Sunset District and window 15:15 to 20:15. Note that other friends are unknown."
            }
        },
        "time_auditor": {
            "audit_temporal_consistency": {
                "input": [
                    "itinerary_options",
                    "distance_matrix",
                    "availability_facts"
                ],
                "output": "audited_plans",
                "system_prompt": "You are a temporal and causal consistency auditor. Eliminate bookkeeping shortcuts and ensure every step is justified by travel, waiting, or meeting actions that consume exactly one 15-minute slot each. Verify that any Jessica meeting is continuous for at least 90 minutes and lies entirely within her availability window, and that travel matches the provided distance matrix.",
                "prompt": "Your name is time_auditor. Using the candidate itineraries, the distance matrix, and the availability facts, audit each itinerary for consistency. Reject or repair itineraries that violate travel times, time progression, location continuity, or meeting continuity/availability. Output a cleaned, feasible set of audited schedules and annotate reasons for any rejections or edits. Do not produce PDDL."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "audited_plans",
                    "distance_matrix",
                    "availability_facts"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert with PDDL for the Fast Downward solver. Produce a classical, STRIPS-style PDDL domain and problem that discretize time into 15-minute timeslots, include locations Haight-Ashbury and Sunset District, travel actions that consume one slot per 15 minutes, a wait action, and a stage-based mechanism to enforce a continuous 90-minute meeting with Jessica (6 consecutive slots) within her availability window. Enclose the PDDL domain in <domain></domain> tags and the PDDL problem in <problem></problem> tags.",
                "prompt": "Synthesize the final PDDL using the audited schedules, distances, and availability. Domain requirements: types {location, timeslot, stage}, predicates such as at(?l), current(?t), next(?t ?t), avail_jessica(?t), at_jessica_location, and stage flags stage0..stage6; actions travel_haight_to_sunset, travel_sunset_to_haight, wait15, start_meeting_jessica, and continue_meeting_jessica_k for k=1..5 with appropriate preconditions/effects to advance time via next and progress stages; initial state: at Haight-Ashbury, current t0900, stage0; timeslots from 09:00 to 21:00 in 15-minute increments with next relations; availability facts for Jessica from 15:15 to 20:15 inclusive; goal: stage6. Ensure the PDDL is compatible with Fast Downward and uses only classical constructs."
            }
        },
        "constraints": [
            "map_expert.compile_distances->itinerary_planner.propose_schedules",
            "availability_collector.publish_availability->itinerary_planner.propose_schedules",
            "map_expert.compile_distances->time_auditor.audit_temporal_consistency",
            "availability_collector.publish_availability->time_auditor.audit_temporal_consistency",
            "itinerary_planner.propose_schedules->time_auditor.audit_temporal_consistency",
            "time_auditor.audit_temporal_consistency->orchestrator.pddl",
            "map_expert.compile_distances->orchestrator.pddl",
            "availability_collector.publish_availability->orchestrator.pddl"
        ]
    }
}