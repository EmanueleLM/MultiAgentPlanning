{
    "name": "MeetingPlanningExample25",
    "author": "Human",
    "agents": {
        "number": 5,
        "names": [
            "map_expert",
            "scheduler",
            "consistency_auditor",
            "objective_modeler",
            "orchestrator"
        ],
        "map_expert": {
            "private_information": [
                "I specialize in building minimal travel-time graphs and normalizing place names.",
                "I do not invent locations that are not in the public information."
            ],
            "goal": "Provide a precise travel-time graph between the known locations for downstream scheduling."
        },
        "scheduler": {
            "private_information": [
                "I generate multiple alternative day itineraries and clearly mark unknowns rather than assuming.",
                "I balance meeting goals with travel and waiting trade-offs."
            ],
            "goal": "Propose several feasible schedules that maximize possible meetings while respecting David's availability and required meeting duration."
        },
        "consistency_auditor": {
            "private_information": [
                "I audit temporal and causal consistency across itineraries.",
                "I remove bookkeeping shortcuts such as quota tokens, post-hoc penalties, or time jumps without explicit travel or waiting.",
                "I do not fabricate availability or travel times."
            ],
            "goal": "Validate and sanitize schedules to ensure strict compliance with time windows, travel times, and causality."
        },
        "objective_modeler": {
            "private_information": [
                "I translate user goals and constraints into a structured objective function and hard constraints suitable for compilation to PDDL.",
                "I prefer lexicographic optimization: maximize feasible meetings first, then minimize travel and waiting."
            ],
            "goal": "Produce a machine-readable set of hard constraints and soft objectives that align with meeting goals and known data."
        },
        "orchestrator": {
            "private_information": [
                "I integrate artifacts from the other agents and produce the final classical PDDL domain and problem for Fast Downward."
            ],
            "goal": "Synthesize a final planning model and instance that lets a single visitor plan movements and meetings to satisfy the constraints, with emphasis on meeting David for at least 105 minutes within his window."
        }
    },
    "environment": {
        "init": {
            "start_location": "golden_gate_park",
            "start_time": "09:00",
            "time_format": "HH:MM",
            "time_unit_minutes": 1,
            "locations": [
                "golden_gate_park",
                "chinatown"
            ],
            "travel_times": {
                "golden_gate_park": {
                    "chinatown": 23
                },
                "chinatown": {
                    "golden_gate_park": 23
                }
            }
        },
        "public_information": [
            "There are two known locations: Golden Gate Park and Chinatown.",
            "You arrive at Golden Gate Park at 09:00.",
            "Travel time from Golden Gate Park to Chinatown is 23 minutes; the reverse direction is also 23 minutes.",
            "David will be at Chinatown from 16:00 to 21:45.",
            "You would like to meet David for a minimum of 105 minutes.",
            "Primary objective: meet as many friends as possible; if information about other friends is missing, treat it as unknown and do not assume availability.",
            "Secondary objectives: minimize total travel time and waiting time, and prefer earlier feasible meeting start times with David when ties occur.",
            "Waiting at locations is allowed and should be explicit in schedules.",
            "If any information is missing or ambiguous, keep it explicit and avoid assumptions."
        ]
    },
    "workflow": {
        "map_expert": {
            "build_travel_graph": {
                "input": [],
                "output": "travel_graph",
                "system_prompt": "You translate public place names and distances into a normalized travel-time graph. Use only locations and times present in public information, do not invent new places, do not alter given times. Output a compact JSON object with fields: locations (array of canonical ids), edges (array of {from,to,minutes}).",
                "prompt": "Your name is map_expert. Public information: {environment->public_information}. Build a minimal travel-time graph with nodes golden_gate_park and chinatown and directed edges that reflect the provided 23-minute travel time in both directions. Return only the JSON graph as described."
            }
        },
        "scheduler": {
            "propose_schedules": {
                "input": [
                    "travel_graph"
                ],
                "output": "candidate_schedules",
                "system_prompt": "You enumerate multiple feasible day itineraries starting at the specified start location and time, using the provided travel graph and public constraints. Generate several distinct alternatives that explore different meet windows and waiting strategies. Do not assume additional friends beyond those in public information; if other friends are unknown, label them as TBD and do not award credit. Use 24-hour times, include explicit travel and waiting steps, and ensure the proposed David meeting block aims for at least 105 minutes within his availability.",
                "prompt": "Your name is scheduler. Public information: {environment->public_information}. Travel graph: {travel_graph}. Produce a compact JSON array labeled candidate_schedules, where each itinerary includes a sequence of steps with fields: step_type (wait, travel, meet_david), location, start_time, end_time, and any notes. Create at least three alternatives that differ in meeting start times and waiting placements."
            }
        },
        "consistency_auditor": {
            "audit_temporal": {
                "input": [
                    "travel_graph",
                    "candidate_schedules"
                ],
                "output": "audit_report",
                "system_prompt": "You audit temporal and causal consistency. For each itinerary, verify monotonic nondecreasing times, ensure travel legs consume exactly the minutes stated in the travel graph, ensure David meeting segments lie within his availability window and sum to at least the requested duration when claimed, and confirm that waiting is explicit. Remove and flag bookkeeping shortcuts such as invented tokens, overlapping credits, or time compression. Mark each itinerary valid or invalid and enumerate issues.",
                "prompt": "Your name is consistency_auditor. Public information: {environment->public_information}. Travel graph: {travel_graph}. Candidate schedules: {candidate_schedules}. Return a JSON audit report with entries per itinerary including fields: valid (boolean), issues (array of strings), computed_meet_david_minutes (integer), and normalized timing if clarifications are trivial."
            },
            "sanitize_schedules": {
                "input": [
                    "candidate_schedules",
                    "audit_report"
                ],
                "output": "sanitized_schedules",
                "system_prompt": "You produce a sanitized set of schedules by removing invalid itineraries and applying only unambiguous corrections such as inserting explicit waits where implied. Do not invent visits or new friends, do not change travel times. Preserve David meeting duration constraints and ensure final entries are strictly consistent with the audit.",
                "prompt": "Your name is consistency_auditor. Use the audit report to filter and minimally correct the candidate schedules. Return a JSON array of sanitized itineraries sorted with valid ones first, then by longer David meeting duration, then by lower total travel and waiting time."
            }
        },
        "objective_modeler": {
            "set_objectives": {
                "input": [
                    "sanitized_schedules"
                ],
                "output": "objectives",
                "system_prompt": "You formalize hard constraints and soft objectives suitable for compilation into PDDL. Hard constraints: start at golden_gate_park at 09:00; use only the provided locations and travel times; David meeting must occur at Chinatown within [16:00, 21:45] for at least 105 minutes; waiting is allowed; no other friends unless explicitly specified. Soft objectives in lexicographic order: maximize number of friends met; minimize total travel time; minimize waiting time; prefer earlier feasible David start time.",
                "prompt": "Your name is objective_modeler. Public information: {environment->public_information}. Sanitized itineraries: {sanitized_schedules}. Produce a compact JSON object named objectives with hard_constraints and soft_objectives that can be compiled into classical PDDL via time discretization."
            }
        },
        "orchestrator": {
            "synthesize_pddl": {
                "input": [
                    "travel_graph",
                    "sanitized_schedules",
                    "objectives"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert with PDDL and Fast Downward. Produce a classical PDDL domain and problem that a single agent (the visitor) can solve to realize a feasible itinerary. Target Fast Downward translator and search: use classical STRIPS-compatible modeling (no durative-actions) and avoid features unsupported by the standard FD release. Handle time via explicit discretization into 1-minute steps from 09:00 through 21:45 inclusive. Represent: locations, time steps, successor relation, current_time predicate, at predicate, available-david(time) predicate for David\u2019s window, and accumulate meeting progress as propositional steps (e.g., met_david_min_k for k in minutes). Provide actions for wait-one-minute to advance time, travel-one-minute along an active transit mode that requires being in transit between two locations for exactly the required number of minutes (23), and meeting actions that can only occur at Chinatown within availability. Encode the goal to require at least 105 minutes of meeting with David. Include only golden_gate_park and chinatown as locations and include objects for every required minute step in the range. Ensure initial state sets at(golden_gate_park) and current_time(09:00). Enclose the PDDL domain between <domain></domain> and the PDDL problem between <problem></problem> and output only those tags and their contents.",
                "prompt": "Your name is orchestrator. Public information: {environment->public_information}. Travel graph: {travel_graph}. Sanitized itineraries: {sanitized_schedules}. Objectives: {objectives}. Integrate the inputs and produce a final PDDL domain and problem suitable for Fast Downward that encodes a discretized-time classical planning model meeting the hard constraints and enabling optimization by search via goal satisfaction."
            }
        },
        "constraints": [
            "map_expert.build_travel_graph->scheduler.propose_schedules",
            "map_expert.build_travel_graph->consistency_auditor.audit_temporal",
            "scheduler.propose_schedules->consistency_auditor.audit_temporal",
            "consistency_auditor.audit_temporal->consistency_auditor.sanitize_schedules",
            "scheduler.propose_schedules->consistency_auditor.sanitize_schedules",
            "consistency_auditor.sanitize_schedules->objective_modeler.set_objectives",
            "map_expert.build_travel_graph->objective_modeler.set_objectives",
            "consistency_auditor.sanitize_schedules->orchestrator.synthesize_pddl",
            "map_expert.build_travel_graph->orchestrator.synthesize_pddl",
            "objective_modeler.set_objectives->orchestrator.synthesize_pddl"
        ]
    }
}