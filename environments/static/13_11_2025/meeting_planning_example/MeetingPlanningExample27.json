{
    "name": "MeetingPlanningExample27",
    "author": "Human",
    "agents": {
        "number": 5,
        "names": [
            "friend_locator",
            "scheduler",
            "auditor",
            "evaluator",
            "orchestrator"
        ],
        "friend_locator": {
            "private_information": [
                "You curate and normalize information about friends, locations, travel times, and meeting windows.",
                "You represent time as minutes from day_start for ease of computation (e.g., 09:00 = 0, 19:00 = 600).",
                "You ensure all windows include required minimum meeting durations when specified."
            ],
            "goal": "Extract and normalize constraints, locations, and travel data into a consistent structure for downstream planning."
        },
        "scheduler": {
            "private_information": [
                "You propose multiple candidate day itineraries that obey hard constraints and aim to maximize the number of friends met.",
                "You start from the arrival context and include travel legs explicitly between locations with their durations.",
                "You ensure that meetings are contiguous blocks and that Margaret is scheduled for at least 15 minutes within her availability window."
            ],
            "goal": "Generate diverse, feasible schedules that satisfy the constraints and position the day to meet as many friends as possible."
        },
        "auditor": {
            "private_information": [
                "You audit temporal and causal consistency of schedules.",
                "You disallow bookkeeping shortcuts such as quota tokens, post-hoc penalties, or imaginary buffers.",
                "You verify travel times, meeting windows, non-overlap constraints, minimum durations, and location continuity; you fix minor issues or reject infeasible options with clear reasons."
            ],
            "goal": "Produce a cleaned and validated set of feasible schedules with explicit justifications and corrections, removing any shortcuts."
        },
        "evaluator": {
            "private_information": [
                "You rank schedules by prioritizing: (1) number of distinct friends met (maximize), (2) total face-time (maximize), (3) total travel time (minimize), (4) schedule slack and robustness (maximize), and (5) end-of-day timeliness.",
                "You break ties by earlier completion and fewer location switches."
            ],
            "goal": "Score, compare, and rank audited schedules to identify the best plan for the orchestrator."
        },
        "orchestrator": {
            "private_information": [
                "You integrate upstream outputs and produce a final PDDL domain and problem compatible with the Fast Downward (aka FastDownwards) solver.",
                "You keep actions and objects clear, and you include costs or numeric fluents if needed to reflect travel time and meeting requirements."
            ],
            "goal": "Select the best audited schedule and produce the final PDDL domain and problem that encodes the task for FastDownward to solve."
        }
    },
    "environment": {
        "init": {
            "time_unit_minutes": 1,
            "day_start": "09:00",
            "preferred_day_end": "20:30",
            "arrival_location": "Marina District",
            "locations": [
                "Marina District",
                "Pacific Heights"
            ]
        },
        "public_information": [
            "Objective: You are visiting San Francisco for the day and want to meet as many friends as possible.",
            "Arrival: You arrive at Marina District at 09:00.",
            "Travel durations (in minutes): Marina District -> Pacific Heights: 7; Pacific Heights -> Marina District: 6.",
            "Margaret availability: She will be at Pacific Heights from 19:00 to 19:45.",
            "Constraint: You want to meet Margaret for a minimum of 15 minutes.",
            "Feasibility rules: No overlapping meetings; must be at the correct location to meet someone; travel time must be budgeted between consecutive events; meetings must be contiguous.",
            "Preference: Minimize unnecessary travel and finish by around 20:30 if possible."
        ]
    },
    "workflow": {
        "friend_locator": {
            "normalize_inputs": {
                "input": [],
                "output": "normalized_data",
                "system_prompt": "You consolidate planning facts. Create a concise JSON-like structure with: (a) locations; (b) travel_times as a directed map in minutes; (c) day_start mapped to minute 0; (d) initial_state with arrival location and time=0; (e) friends with their location windows and any minimum meeting duration; and (f) hard feasibility rules. Do not produce PDDL.",
                "prompt": "You are friend_locator. Use the environment public information to normalize the data: {environment->public_information}. Represent 09:00 as time 0; represent 19:00 as 600 and 19:45 as 645. Produce travel_times for Marina District <-> Pacific Heights exactly as given. Include Margaret with a 15-minute minimum meeting at Pacific Heights between 600 and 645. Return a compact, machine-readable summary without extra commentary."
            }
        },
        "scheduler": {
            "generate_options": {
                "input": [
                    "normalized_data"
                ],
                "output": "candidate_schedules",
                "system_prompt": "You propose multiple feasible daily itineraries without emitting PDDL. Each schedule is a sequence of timestamped events with fields: start_min, end_min, action in {travel, meet, wait}, location, details (e.g., friend name). Always include travel legs explicitly and ensure arrival before meeting starts. Provide at least three diverse options. Ensure Margaret is scheduled for at least 15 minutes within her window.",
                "prompt": "You are scheduler. Based on: {normalized_data}. Start at Marina District at time 0 (09:00). Propose at least three varied schedules that all include a Margaret meeting of at least 15 minutes in Pacific Heights between 600 and 645. You may include waits or early positioning (e.g., travel to Pacific Heights in advance). Keep outputs concise and structured."
            }
        },
        "auditor": {
            "temporal_audit": {
                "input": [
                    "candidate_schedules",
                    "normalized_data"
                ],
                "output": "audited_schedules",
                "system_prompt": "You perform strict temporal/causal feasibility checks and remove bookkeeping shortcuts (quota tokens, post-hoc penalties, or implicit buffers). Validate: (1) non-overlap, (2) correct location continuity, (3) travel times at least as long as required edges, (4) meetings lie within availability windows and meet minimum durations, and (5) time is non-decreasing from start. Return only feasible schedules; fix minor boundary issues if possible and annotate fixes; otherwise reject with reasons. Do not produce PDDL.",
                "prompt": "You are auditor. Audit and sanitize the candidate schedules using the normalized data: {candidate_schedules} with {normalized_data}. Return a list of feasible schedules with any corrections and a brief justification per schedule. Remove any schedule that violates hard constraints."
            }
        },
        "evaluator": {
            "score_options": {
                "input": [
                    "audited_schedules",
                    "normalized_data"
                ],
                "output": "ranked_schedules",
                "system_prompt": "You score and rank schedules. Primary: maximize number of distinct friends met. Secondary: maximize total meeting minutes. Tertiary: minimize total travel time. Quaternary: maximize slack and robustness; and prefer finishing by about 20:30. Break ties by fewer location switches then earlier finish time. Return an ordered list with per-schedule metrics and a brief rationale. Do not produce PDDL.",
                "prompt": "You are evaluator. Rank the audited schedules: {audited_schedules}. Use the priority criteria and provide a clear winner along with summary metrics."
            }
        },
        "orchestrator": {
            "integrate_and_plan": {
                "input": [
                    "ranked_schedules",
                    "normalized_data"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert at integrating multi-agent planning inputs and producing a final PDDL domain and problem for the Fast Downward (FastDownwards) solver. Use classical PDDL with action costs and numeric fluents if helpful to encode time progression and required minimum durations. Ensure the model enforces: location continuity, directed travel times, Margaret's availability window (19:00\u201319:45 mapped to minutes 600\u2013645), and a minimum 15-minute meeting. Enclose the domain in <domain></domain> and the problem in <problem></problem> tags. Clearly define objects (locations, agent, friends, timepoints or a numeric time fluent), predicates, and actions (move, wait, meet). The initial state must reflect arrival at Marina District at time 0. Set the goal to complete the highest-ranked feasible schedule, including a successful meeting with Margaret, and minimize total cost (e.g., travel time).",
                "prompt": "You are orchestrator. Integrate: {ranked_schedules} and {normalized_data}. Select the top audited schedule and produce a final PDDL domain and problem targeted at Fast Downward. Keep actions distinct and well-specified. Include action-costs and any numeric fluents needed to constrain timing. Enclose outputs within <domain></domain> and <problem></problem>."
            }
        },
        "constraints": [
            "friend_locator.normalize_inputs->scheduler.generate_options",
            "scheduler.generate_options->auditor.temporal_audit",
            "auditor.temporal_audit->evaluator.score_options",
            "evaluator.score_options->orchestrator.integrate_and_plan",
            "friend_locator.normalize_inputs->orchestrator.integrate_and_plan"
        ]
    }
}