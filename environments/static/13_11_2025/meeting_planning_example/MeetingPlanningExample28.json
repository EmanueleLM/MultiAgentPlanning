{
    "name": "MeetingPlanningExample28",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "mapper",
            "scheduler",
            "auditor",
            "orchestrator"
        ],
        "mapper": {
            "private_information": [
                "Experienced with building travel-time graphs and normalizing time windows.",
                "Uses minutes-from-midnight as the canonical time unit."
            ],
            "goal": "Produce a clean, canonical representation of locations, travel times, and availability windows that others can use to generate schedules."
        },
        "scheduler": {
            "private_information": [
                "Skilled at enumerating and ranking schedule options under constraints.",
                "Optimizes for meeting as many friends as possible while respecting required meetings."
            ],
            "goal": "Consider various feasible schedules using the public information and mapper outputs, rank them against the goals, and propose the best candidate plan(s)."
        },
        "auditor": {
            "private_information": [
                "Focuses on temporal and causal consistency.",
                "Removes any bookkeeping shortcuts (e.g., quota tokens, post-hoc penalties) and ensures only physically realizable steps remain."
            ],
            "goal": "Audit candidate schedules for feasibility, ensuring no time travel, no overlapping commitments beyond capacity, and that all travel and meeting durations are honored; produce an audited schedule ready for orchestration."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate audited schedules and environment facts to produce a final planning formulation and a concrete plan; emit a PDDL domain and problem suitable for the FastDownward(s) solver."
        }
    },
    "environment": {
        "init": {
            "time_unit": "minutes",
            "date": "today",
            "start_time": "09:00",
            "start_location": "Union Square",
            "locations": [
                "Union Square",
                "Chinatown"
            ]
        },
        "public_information": [
            "You arrive at Union Square at 9:00AM.",
            "Travel duration: Union Square to Chinatown: 7 minutes.",
            "Travel duration: Chinatown to Union Square: 7 minutes.",
            "Joshua will be at Chinatown from 6:00PM to 9:30PM.",
            "You would like to meet Joshua for a minimum of 75 minutes.",
            "Primary objective: meet as many friends as possible during the day by considering various schedules and selecting the best one that satisfies constraints and preferences."
        ]
    },
    "workflow": {
        "mapper": {
            "analyze": {
                "input": [],
                "output": "travel_knowledge",
                "system_prompt": "You are a city travel-time mapper and time-normalization expert. Build a consistent, canonical representation of places, travel times, and availability windows. Normalize all times to minutes-from-midnight, unify place names, and highlight mandatory constraints.",
                "prompt": "Your name is mapper. Use the following public information to construct a normalized travel-time graph, location aliases (if any), and availability windows in minutes-from-midnight. Include: locations, directed travel-time matrix, the arrival event at Union Square at 09:00, Joshua's availability window at Chinatown from 18:00 to 21:30, and the required minimum meeting duration of 75 minutes. Do not produce PDDL; produce a concise, structured summary usable by downstream agents. Public information: {environment->public_information}"
            }
        },
        "scheduler": {
            "generate": {
                "input": [
                    "travel_knowledge"
                ],
                "output": "schedule_options",
                "system_prompt": "You are a day-planning scheduler. Enumerate feasible itineraries, compute start/end times for travel and meetings, and score schedules by the objective: meet as many friends as possible while ensuring Joshua is met for at least 75 minutes if feasible.",
                "prompt": "Your name is scheduler. Relying on the normalized travel knowledge, generate multiple feasible schedules that begin at Union Square at 09:00. Explicitly include meeting Joshua at Chinatown for at least 75 minutes between 18:00 and 21:30, accounting for 7-minute travel times each way. If other friends are not specified, maximize objectives subject to known constraints without inventing new friends. Rank the schedules and propose the best one, including a clear timeline with locations and durations. Do not produce PDDL. Inputs: {travel_knowledge}"
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "travel_knowledge",
                    "schedule_options"
                ],
                "output": "audited_schedule",
                "system_prompt": "You are a temporal and causal consistency auditor. Validate that the candidate schedules obey time windows, travel durations, and meeting length constraints. Remove any bookkeeping shortcuts (e.g., artificial tokens or post-hoc penalties) and ensure only physically realizable steps remain.",
                "prompt": "Your name is auditor. Verify that schedules are feasible and consistent: no overlapping events beyond capacity, correct sequencing of travel and meetings, correct conversions to minutes-from-midnight, and Joshua's minimum 75-minute meeting strictly within 18:00\u201321:30 at Chinatown. Confirm or adjust the best schedule accordingly and output a single audited schedule ready for orchestration. Do not produce PDDL. Inputs: {travel_knowledge} {schedule_options}"
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "travel_knowledge",
                    "audited_schedule"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert multi-agent orchestrator. Produce a final PDDL domain and PDDL problem that encode the audited plan and constraints, targeting compatibility with the FastDownward(s) solver. Enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags. Ensure the model captures locations, the agent, travel actions with their durations, time discretization decisions suitable for classical or temporal planning as needed, availability windows for Joshua, and the requirement to meet Joshua for at least 75 minutes. Provide an initial state consistent with arrival at Union Square at 09:00, include the 7-minute travel times between Union Square and Chinatown, and specify the goal of meeting as many friends as possible subject to the mandatory Joshua constraint. If using classical PDDL, discretize time and encode windows with predicates or compiled constraints; if using temporal PDDL, ensure durative actions and invariants are properly defined.",
                "prompt": "Integrate the normalized travel knowledge and the audited schedule into a single coherent planning model. Resolve any naming variations and ensure that the final model can be solved by FastDownward(s). Output only the PDDL domain and PDDL problem, enclosed in the required tags. Inputs: {travel_knowledge} {audited_schedule}"
            }
        },
        "constraints": [
            "mapper.analyze->scheduler.generate",
            "mapper.analyze->auditor.audit",
            "scheduler.generate->auditor.audit",
            "auditor.audit->orchestrator.pddl",
            "mapper.analyze->orchestrator.pddl"
        ]
    }
}