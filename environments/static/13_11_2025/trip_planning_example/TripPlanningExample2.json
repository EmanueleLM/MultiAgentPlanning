{
    "name": "TripPlanningExample2",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "itinerary_planner",
            "flight_router",
            "temporal_auditor",
            "orchestrator"
        ],
        "itinerary_planner": {
            "private_information": [
                "I design balanced itineraries under fixed trip-length budgets.",
                "I consider traveler preferences but will not assume unavailable connections."
            ],
            "goal": "Draft a day-by-day 11-day itinerary over Reykjavik, Vienna, and Venice that honors direct-flight connectivity and aligns with preferences when feasible."
        },
        "flight_router": {
            "private_information": [
                "I specialize in validating and optimizing city transition sequences using only direct flights.",
                "I account for connectivity constraints: Reykjavik\u2194Vienna and Vienna\u2194Venice."
            ],
            "goal": "Ensure every inter-city transition in the itinerary uses a direct flight and adjust ordering if necessary while preserving day counts."
        },
        "temporal_auditor": {
            "private_information": [
                "I audit temporal and causal consistency and remove bookkeeping shortcuts (e.g., quota tokens, post-hoc penalties, or magical day compression).",
                "I detect infeasible sums or constraints and propose minimal, clearly justified relaxations that prioritize hard constraints over preferences."
            ],
            "goal": "Validate that the 11-day itinerary is internally consistent: total equals 11, transitions follow direct flights, and the traveler is in Venice for at least one day between day 8 and day 11. Propose minimal adjustments if conflicts arise."
        },
        "orchestrator": {
            "private_information": [
                "I integrate agent outputs and produce a final PDDL domain and problem suitable for the FastDownwards solver."
            ],
            "goal": "Produce the final PDDL domain and problem encoding the 11-day trip planning task with cities, days, direct-flight constraints, and the Venice wedding requirement."
        }
    },
    "environment": {
        "init": {
            "days": 11,
            "cities": [
                "Reykjavik",
                "Vienna",
                "Venice"
            ],
            "direct_flights": [
                [
                    "Reykjavik",
                    "Vienna"
                ],
                [
                    "Vienna",
                    "Venice"
                ]
            ],
            "visibility": 1
        },
        "public_information": [
            "Total trip length is 11 days.",
            "Cities to visit: Reykjavik, Vienna, Venice.",
            "Direct flights exist between Reykjavik and Vienna, and between Vienna and Venice; there is no direct flight between Reykjavik and Venice.",
            "Preference: spend 2 days in Reykjavik.",
            "Preference: spend 7 days in Vienna.",
            "Preference: spend 4 days in Venice.",
            "You must be in Venice on at least one day in the window from day 8 to day 11 (inclusive) to attend the wedding.",
            "Only direct flights may be used for inter-city travel; staying in the same city across consecutive days is allowed.",
            "The start city is not fixed and may be chosen as part of the plan.",
            "Connectivity implies that visiting all three cities with direct flights requires passing through Vienna when moving between Reykjavik and Venice."
        ]
    },
    "workflow": {
        "itinerary_planner": {
            "proposal": {
                "input": [],
                "output": "itinerary_proposal",
                "system_prompt": "You are an expert travel itinerary planner who builds concrete, day-by-day plans under fixed-length horizons while respecting connectivity and real-world constraints.",
                "prompt": "Your name is itinerary_planner. Use the public information to propose a concrete 11-day plan that assigns exactly one city to each day. Respect that only direct flights may be used for city changes and that the wedding requires being in Venice on at least one day between day 8 and day 11. Treat 2 days in Reykjavik, 7 days in Vienna, and 4 days in Venice as preferences that sum to 13, which exceeds 11; therefore, if necessary, reduce days minimally while prioritizing the hard constraints (trip length, direct flights, and the Venice wedding window). Provide a compact day-by-day city list and the counts per city."
            }
        },
        "flight_router": {
            "routing": {
                "input": [
                    "itinerary_proposal"
                ],
                "output": "routed_itinerary",
                "system_prompt": "You are an airline routing specialist who validates and adjusts city sequences so that every inter-city transition uses a direct flight.",
                "prompt": "Your name is flight_router. Validate the proposed itinerary transitions using the direct-flight graph in the public information. If any inter-city movement is not a direct connection, adjust the ordering by inserting or reordering cities only through permitted edges (Reykjavik\u2194Vienna, Vienna\u2194Venice) while preserving the total of 11 days and keeping the Venice wedding window satisfied. Return an updated day-by-day city list and explain any changes."
            }
        },
        "temporal_auditor": {
            "audit": {
                "input": [
                    "routed_itinerary"
                ],
                "output": "audited_plan",
                "system_prompt": "You are a temporal and causal consistency auditor. You eliminate shortcuts such as quota tokens, post-hoc penalties, or ungrounded assumptions and ensure plans obey real constraints.",
                "prompt": "Your name is temporal_auditor. Audit the routed itinerary for internal consistency: total days must equal 11; city transitions must either be stays or single moves that correspond to direct flights; at least one day between day 8 and day 11 must be in Venice. If the preferences for city-day counts cannot all be satisfied simultaneously with the hard constraints, propose the minimal relaxation, prioritizing the hard constraints first. Produce: 1) the final audited day-by-day assignment, 2) the per-city day counts, 3) a short justification of any changes and confirmation that no bookkeeping shortcuts were used."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "audited_plan"
                ],
                "output": "pddl_trip",
                "system_prompt": "You are an expert with multi-agent plan integration and PDDL modeling targeting the FastDownwards solver. You must output a PDDL domain and a PDDL problem that encode the audited 11-day trip planning task with days, cities, direct-flight constraints, and the Venice wedding requirement. Always enclose the PDDL domain within <domain></domain> and the PDDL problem within <problem></problem> tags.",
                "prompt": "Integrate the audited plan to produce a consistent PDDL model for FastDownwards. Requirements: 1) Objects include days 1..11 and the cities Reykjavik, Vienna, Venice. 2) State encodes which city is assigned to each day; actions allow either staying or moving between cities on consecutive days, but moves are only permitted along direct flights: Reykjavik\u2194Vienna and Vienna\u2194Venice. 3) The initial state sets the assignment for day 1 as per the audited plan. 4) The goal enforces that each day has exactly one assigned city, transitions comply with direct flights, and at least one of days 8..11 is Venice. 5) Incorporate the finalized per-city day counts from the audited plan as goal constraints if they are consistent; otherwise, omit them as soft preferences. 6) Provide a solvable, self-contained PDDL domain and problem suitable for FastDownwards. Enclose the domain within <domain></domain> and the problem within <problem></problem> tags."
            }
        },
        "constraints": [
            "itinerary_planner.proposal->flight_router.routing",
            "flight_router.routing->temporal_auditor.audit",
            "temporal_auditor.audit->orchestrator.pddl"
        ]
    }
}