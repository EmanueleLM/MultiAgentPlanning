{
    "name": "TripPlanningExample25",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "trip_planner",
            "flight_mapper",
            "temporal_auditor",
            "orchestrator"
        ],
        "trip_planner": {
            "private_information": [
                "I synthesize itineraries that respect mandatory constraints first and fit soft preferences when possible.",
                "I avoid proposing any travel hop that lacks a direct flight."
            ],
            "goal": "Draft a 16-day city-by-day itinerary that honors the must-haves: 5 days in Valencia, 7 days in Split aligned with the show window (days 10-16), and include Lyon as much as possible within the 16-day total while only changing cities when a direct flight exists."
        },
        "flight_mapper": {
            "private_information": [
                "I provide direct-flight connectivity between cities as an undirected graph usable for feasibility checks.",
                "Assume direct flights operate daily in both directions for the listed city pairs only."
            ],
            "goal": "List the direct flight connections among the three cities in a clear structure that enables auditing of day-to-day transitions."
        },
        "temporal_auditor": {
            "private_information": [
                "I audit temporal and causal consistency across the entire 16-day horizon.",
                "I remove bookkeeping shortcuts (quota tokens, post-hoc penalties, arbitrary relaxations) and require concrete feasibility grounded in direct-flight connectivity and day-by-day occupancy.",
                "When constraints conflict, I prioritize the mandatory durations and show attendance; I then adjust soft preferences minimally to restore feasibility."
            ],
            "goal": "Verify or correct the itinerary to exactly 16 days, enforce attendance in Split for days 10-16 inclusive, ensure all inter-city transitions occur only across listed direct flights, and if totals exceed 16 days reduce the Lyon stay (a soft preference) to the minimum necessary while preserving Valencia 5 days and Split 7 days."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate the itinerary, flight graph, and audit into a single consistent plan and emit a final PDDL domain and problem (FastDownward compatible) that encodes a day-indexed schedule and direct-flight constraints for the audited itinerary."
        }
    },
    "environment": {
        "init": {
            "total_days": 16,
            "cities": [
                "valencia",
                "lyon",
                "split"
            ],
            "direct_flights": [
                [
                    "valencia",
                    "lyon"
                ],
                [
                    "lyon",
                    "split"
                ]
            ],
            "show_city": "split",
            "show_days_inclusive": [
                10,
                16
            ],
            "preferences": {
                "valencia_days_required": 5,
                "split_days_required": 7,
                "lyon_days_preferred": 6
            }
        },
        "public_information": [
            "Trip length is 16 consecutive days, indexed 1 through 16.",
            "Cities in scope: Valencia, Lyon, Split.",
            "Only take direct flights to commute between cities.",
            "Direct flights exist between the following city pairs (bidirectional): Valencia-Lyon and Lyon-Split.",
            "You want to spend 5 days in Valencia.",
            "You want to spend 7 days in Split.",
            "From day 10 to day 16 (inclusive) there is an annual show in Split that you want to attend.",
            "You would like to visit Lyon for 6 days if feasible; this is a soft preference to be adjusted if the total exceeds 16 days."
        ]
    },
    "workflow": {
        "trip_planner": {
            "propose_itinerary": {
                "input": [],
                "output": "feasible_itinerary",
                "system_prompt": "You are a travel itinerary planner who produces a concrete 16-day sequence of cities that respects mandatory constraints first and only uses listed direct flights for inter-city moves.",
                "prompt": "Draft a day-by-day itinerary for 16 days using the public information {environment->public_information} and initialization data {environment->init}. Prioritize 5 days in Valencia and 7 days in Split aligned with days 10-16 for the show, and include Lyon as much as possible within the 16-day total using only the direct flights Valencia-Lyon and Lyon-Split. Provide the output as a single structured list of pairs (day, city) plus the intended flight hops where the city changes; do not emit PDDL."
            }
        },
        "flight_mapper": {
            "map_flights": {
                "input": [],
                "output": "flight_graph",
                "system_prompt": "You map direct-flight connectivity in a machine-readable form suitable for feasibility checks.",
                "prompt": "From the initialization data {environment->init}, produce a bidirectional adjacency list of direct flights among the cities and note that flights operate daily. Return a concise JSON-like structure listing each city and its directly connected neighbors; do not emit PDDL."
            }
        },
        "temporal_auditor": {
            "audit": {
                "input": [
                    "feasible_itinerary",
                    "flight_graph"
                ],
                "output": "audit_report",
                "system_prompt": "You audit temporal and causal consistency, reject shortcutting, and correct plans to exactly satisfy hard constraints while preserving feasibility via direct flights only.",
                "prompt": "Audit the proposed itinerary {feasible_itinerary} against the flight connectivity {flight_graph} and the public information {environment->public_information}. If totals exceed 16 days, reduce the Lyon stay (a soft preference) so the total equals 16 days while keeping Valencia at 5 days and Split at 7 days during days 10-16. Ensure all inter-city transitions occur only between directly connected cities. Return a corrected day-by-day itinerary (days 1-16) and explicit flight hops that comply with the constraints; do not emit PDDL."
            }
        },
        "orchestrator": {
            "integrate_and_emit_pddl": {
                "input": [
                    "feasible_itinerary",
                    "flight_graph",
                    "audit_report"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert with multi-agent planning and PDDL for the FastDownward solver. You must output a complete PDDL domain and problem that are consistent, solvable, and enclosed in <domain></domain> and <problem></problem> tags.",
                "prompt": "Integrate the itinerary from the auditor {audit_report} (override any conflicts with {feasible_itinerary}) and the direct-flight graph {flight_graph}. Produce a FastDownward-compatible PDDL domain and problem that encode a 16-day horizon with objects d1..d16 and cities valencia, lyon, split. Use :requirements :strips :typing. Include predicates such as next(?d ?d2), today(?d), flight(?c1 ?c2), at-day(?d ?c). Provide actions choose-start(?c), stay-same(?d ?d2 ?c), and move(?d ?d2 ?from ?to) where move requires flight(?from ?to). Initialize next(dk, d(k+1)) for k=1..15, today(d1), and symmetric flight facts for the listed city pairs. Set the goal as the conjunction of at-day(dk, CITY_k) for the corrected itinerary days 1..16 so that any valid plan must honor the audited schedule and only use allowed moves. Enclose the domain in <domain></domain> and the problem in <problem></problem> tags."
            }
        },
        "constraints": [
            "trip_planner.propose_itinerary->temporal_auditor.audit",
            "flight_mapper.map_flights->temporal_auditor.audit",
            "temporal_auditor.audit->orchestrator.integrate_and_emit_pddl",
            "flight_mapper.map_flights->orchestrator.integrate_and_emit_pddl",
            "trip_planner.propose_itinerary->orchestrator.integrate_and_emit_pddl"
        ]
    }
}