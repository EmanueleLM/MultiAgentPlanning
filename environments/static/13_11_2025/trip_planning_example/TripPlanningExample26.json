{
    "name": "TripPlanningExample26",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "router",
            "scheduler",
            "auditor",
            "orchestrator"
        ],
        "router": {
            "private_information": [
                "I specialize in finding feasible routes using only direct flights.",
                "I know the direct flight graph is sparse; avoiding nonexistent legs is critical."
            ],
            "goal": "Propose one or more feasible city visit orders that use only direct flights between consecutive cities for a 16-day trip involving Porto, Berlin, and Reykjavik."
        },
        "scheduler": {
            "private_information": [
                "I allocate exact day ranges across cities to fit a fixed total of 16 days.",
                "If preferences exceed the total, I minimize deviation by preserving hard constraints and the strongest expressed preferences first."
            ],
            "goal": "Given a feasible city order and the 16-day budget, assign consecutive day ranges to each city and identify any conflicts with the stated preferences."
        },
        "auditor": {
            "private_information": [
                "I audit temporal and causal consistency across route and schedule.",
                "I remove bookkeeping shortcuts (e.g., quota tokens, post-hoc penalties, or unexplained slack) and produce explicit justifications for any adjustments.",
                "I ensure all constraints are met: total 16 days, direct flights between successive cities, and meeting a friend in Reykjavik between day 12 and day 16 inclusive."
            ],
            "goal": "Validate or minimally adjust the proposed itinerary so that it satisfies all hard constraints and yields a clear, consistent final itinerary."
        },
        "orchestrator": {
            "private_information": [
                "I integrate the other agents' outputs and compile the final PDDL domain and problem."
            ],
            "goal": "Produce a final, solvable PDDL domain and problem that encode the audited itinerary and constraints, targeting the FastDownwards solver."
        }
    },
    "environment": {
        "init": {
            "trip_days": 16,
            "day_range": [
                1,
                16
            ]
        },
        "public_information": [
            "Trip length is 16 days, with days numbered 1 through 16.",
            "Cities to visit: Porto, Berlin, Reykjavik.",
            "Only direct flights are allowed between successive cities.",
            "Direct flights exist between Porto and Berlin.",
            "Direct flights exist between Berlin and Reykjavik.",
            "There is no direct flight between Porto and Reykjavik.",
            "Preference: Stay 7 days in Porto.",
            "Preference: Stay 6 days in Berlin.",
            "Preference: Stay 5 days in Reykjavik.",
            "Hard constraint: Meet a friend in Reykjavik between day 12 and day 16 inclusive.",
            "Travel occurs between city day-blocks and does not consume additional days."
        ]
    },
    "workflow": {
        "router": {
            "analysis": {
                "input": [],
                "output": "routing_plan",
                "system_prompt": "You are a travel routing specialist. Using only direct flights, enumerate one or two feasible city visit orders that include Porto, Berlin, and Reykjavik for a 16-day trip.",
                "prompt": "Your name is router. Consider the following public information: {environment->public_information}. Propose feasible sequences of cities that obey the direct-flight graph. For each candidate, list the exact flight legs between consecutive cities and highlight that Porto-Reykjavik is not a direct leg. Do not produce PDDL; produce structured, unambiguous text that downstream agents can parse."
            }
        },
        "scheduler": {
            "allocation": {
                "input": [
                    "routing_plan"
                ],
                "output": "allocation_draft",
                "system_prompt": "You are a travel scheduler assigning exact day ranges across the 16-day horizon.",
                "prompt": "Your name is scheduler. You receive a routing plan: {routing_plan}. Public information: {environment->public_information}. Assign consecutive day ranges 1..16 to each city in the route, respecting the city order. If the stated preferences exceed 16 days in total, propose a minimal adjustment that preserves hard constraints and keeps Berlin at 6 days and Reykjavik at 5 days to support the meeting window, reducing Porto as needed. Output a clear allocation draft with day ranges per city and note any deviations."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "routing_plan",
                    "allocation_draft"
                ],
                "output": "audit_report",
                "system_prompt": "You are a temporal and causal auditor who removes bookkeeping shortcuts and enforces hard constraints.",
                "prompt": "Your name is auditor. Inputs: routing plan {routing_plan} and allocation draft {allocation_draft}. Public information: {environment->public_information}. Verify: total equals 16 days; each day is assigned to exactly one city; successive cities are connected by a direct flight; Reykjavik includes days between 12 and 16 inclusive so the meeting occurs. If violations exist, make the smallest explicit adjustment to satisfy all constraints. Produce an audit report that includes a final itinerary with exact days per city and flight legs, plus a justification of any changes."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "routing_plan",
                    "allocation_draft",
                    "audit_report"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in compiling multi-agent results into a final PDDL domain and problem targeting the FastDownwards solver. You always provide both files and enclose the domain between <domain></domain> and the problem between <problem></problem>. Use classical PDDL compatible with Fast Downward; model discrete days as objects d1..d16, cities as objects, a predicate city-on-day ?c ?d, and constraints that enforce exactly one city per day, city-day counts meeting the audited itinerary, allowed transitions only along direct flights between end of one city block and start of the next, and ensure Reykjavik is scheduled to cover the meeting window as specified in the audit.",
                "prompt": "You will receive the routing plan, the allocation draft, and the audit report: {routing_plan} {allocation_draft} {audit_report}. Integrate them and produce a final PDDL domain and problem that encode the audited itinerary and constraints. Requirements: include appropriate :requirements (e.g., :typing, :equality, and others as needed), define objects for the three cities and days d1..d16, initial facts for direct-flight relations and any adjacency or successor relation over days, and goal conditions that reflect the final itinerary and meeting-in-Reykjavik condition. Ensure the encoding yields a solvable plan in FastDownwards. Enclose the PDDL domain between <domain></domain> and the PDDL problem between <problem></problem>."
            }
        },
        "constraints": [
            "router.analysis->scheduler.allocation",
            "router.analysis->auditor.audit",
            "scheduler.allocation->auditor.audit",
            "auditor.audit->orchestrator.pddl"
        ]
    }
}