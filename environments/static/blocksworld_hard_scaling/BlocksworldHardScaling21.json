{
    "name": "BlocksworldHardScaling21",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "Planner",
            "Auditor",
            "orchestrator"
        ],
        "Planner": {
            "private_information": [
                "I know the rules for block manipulation: Pick up, Unstack, Put down, Stack.",
                "Action constraints include: holding only one block, preconditions on 'clear' and 'on'. I must accurately translate these rules into PDDL actions."
            ],
            "goal": "Generate a valid PDDL domain and problem file to achieve the specified block stacking goal from the initial configuration."
        },
        "Auditor": {
            "private_information": [
                "I must ensure that the PDDL plan strictly adheres to all specified physical constraints (e.g., only one item can be held, 'clear' state transitions are correct, movement rules are followed)."
            ],
            "goal": "Audit the initial PDDL output for temporal and causal consistency and adherence to Blocksworld rules described in the human specification."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate the initial PDDL plan and any audit feedback to produce the final, runnable PDDL domain and problem file targeting the FastDownwards solver."
        }
    },
    "environment": {
        "init": {
            "grid_size": 1,
            "visibility": 1
        },
        "public_information": [
            "Blocks involved: Red, Blue, Orange, Yellow.",
            "Initial State: The red block is clear, the hand is empty, Red is on top of Blue, Blue is on top of Orange, Orange is on top of Yellow, and Yellow is on the table (R/B/O/Y stack).",
            "Goal State: Blue is on Orange, Orange is on Yellow, and Yellow is on Red (B/O/Y/R stack, where Red is assumed to be on the table)."
        ]
    },
    "workflow": {
        "Planner": {
            "pddl": {
                "input": [],
                "output": "pddl_initial",
                "system_prompt": "You are an expert with PDDL problems (Planning Domain Definition Language). You always provide a PDDL domain and a PDDL problem file to solve the task. You always enclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags.",
                "prompt": "Your name is Planner. You need to model the classic Blocksworld problem based on the rules implicitly known to you and the explicit state definition below.\nPublic Information:\n{environment->public_information}\nPrivate Knowledge:\n{agents->Planner->private_information}\nGoal:\n{agents->Planner->goal}\nGenerate the PDDL domain and problem files required to solve this goal. Ensure all standard Blocksworld constraints (handling capacity, clear block status, 'on' relationships) are correctly modeled.\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "Auditor": {
            "review": {
                "input": [
                    "pddl_initial"
                ],
                "output": "review_feedback",
                "system_prompt": "You are an Auditor expert in planning verification and formal logic. Your role is to analyze provided PDDL specifications against the required constraints and identify any temporal or causal inconsistencies. If the PDDL seems valid and correct based on the input rules, state that the PDDL is consistent. If inconsistencies are found, detail exactly which constraints were violated.",
                "prompt": "Your name is Auditor. You are auditing the PDDL generated by the Planner. Ensure that the PDDL strictly models the following constraints derived from the human specification:\n1. Hand Capacity: Only one block can be held (precondition for pickup/unstack: hand is empty; effect of putdown/stack: hand becomes empty).\n2. Pickup constraints: Block must be on the table and clear.\n3. Unstack constraints: Block must be clear and resting on the target block.\n4. Clear status updates: Stacking a block removes the 'clear' status from the block underneath.\n\nHere is the initial PDDL to review:\n{pddl_initial}\n\nProvide your analysis on the PDDL's consistency with these rules. Output a brief summary and necessary feedback for the Orchestrator."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "pddl_initial",
                    "review_feedback"
                ],
                "output": "pddl_final",
                "system_prompt": "You are an expert PDDL orchestrator designed to finalize planning problems. You take an initial PDDL definition and any subsequent audit feedback, ensuring the final output is syntactically correct, logically consistent, and optimized for execution using the Fast Downwards planner. You must resolve any inconsistencies flagged by the Auditor.",
                "prompt": "Your name is orchestrator. You have received the initial PDDL output and feedback regarding its consistency.\nInitial PDDL:\n{pddl_initial}\nAudit Feedback:\n{review_feedback}\n\nReview the feedback and ensure that the final PDDL domain and problem files accurately reflect the Blocksworld rules and the specified initial/goal states. Produce the final PDDL Domain and Problem targeted for the FastDownwards solver.\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "Planner.pddl->Auditor.review",
            "Planner.pddl->orchestrator.pddl",
            "Auditor.review->orchestrator.pddl"
        ]
    }
}