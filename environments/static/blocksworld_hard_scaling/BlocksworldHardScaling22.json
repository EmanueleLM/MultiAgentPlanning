{
    "name": "BlocksworldHardScaling22",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "planner",
            "auditor",
            "orchestrator"
        ],
        "planner": {
            "private_information": [
                "I know the complete rules for moving and stacking blocks."
            ],
            "goal": "Generate the necessary PDDL domain and problem files to solve the blocks arrangement task, following all constraints."
        },
        "auditor": {
            "private_information": [
                "I specialize in verifying PDDL structures for adherence to complex causal and temporal constraints."
            ],
            "goal": "Audit the PDDL generated by the planner for temporal and causal consistency and strict adherence to the defined Blocksworld rules."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Produce the final, validated PDDL domain and problem specification for the Blocksworld task, ready for a FastDownwards solver."
        }
    },
    "environment": {
        "init": {
            "grid_size": 1,
            "visibility": 3,
            "blocks": [
                "orange",
                "red",
                "blue",
                "yellow"
            ],
            "initial_state": [
                "hand_empty()",
                "clear(orange)",
                "on(red, blue)",
                "on(orange, yellow)",
                "on(yellow, red)",
                "on_table(blue)"
            ],
            "goal_state": [
                "on(red, orange)",
                "on(orange, yellow)",
                "on(yellow, blue)"
            ]
        },
        "public_information": [
            "The task is to arrange colored blocks into specific stacks using a single robotic arm.",
            "Available Actions: Pick up a block, Unstack a block, Put down a block, Stack a block.",
            "Constraint 1 (Holding): Only one block can be held at a time. Hand must be empty to Pick up/Unstack.",
            "Constraint 2 (Clear Status): A block is clear if no other block is on top of it AND it is not currently being held.",
            "Constraint 3 (Pick up): Block must be on the table and clear.",
            "Constraint 4 (Unstack): The block being unstacked must be clear and resting on a specific supporting block.",
            "Constraint 5 (Effect of grabbing): Picking up or Unstacking results in holding the block.",
            "Constraint 6 (Put down/Stack Precondition): Must be holding the block to Put down or Stack.",
            "Constraint 7 (Stack Target): When Stacking A onto B, block B must be clear.",
            "Constraint 8 (Effect of releasing): Putting down or Stacking results in an empty hand.",
            "Constraint 9 (Effect of Stacking): Stacking block A onto block B makes block B no longer clear."
        ]
    },
    "workflow": {
        "planner": {
            "pddl": {
                "input": [],
                "output": "pddl_initial",
                "system_prompt": "You are an expert with PDDL problems (Planning Domain Definition Language). You always provide a PDDL domain and a PDDL problem file to solve the task. You always enclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags.",
                "prompt": "Your name is planner. You must create the PDDL domain and problem for the Blocks arrangement task. The environment context is:\n{environment->public_information}\nInitial State: {environment->init->initial_state}\nGoal State: {environment->init->goal_state}\nThink step by step and provide a PDDL domain and a PDDL problem file to solve the task. Ensure all constraints are modeled correctly, especially those concerning 'clear' status and 'holding'.\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "auditor": {
            "refine": {
                "input": [
                    "pddl_initial"
                ],
                "output": "pddl_refined",
                "system_prompt": "You are an expert PDDL auditor specializing in ensuring causal consistency and adherence to strict planning constraints. You analyze given PDDL code and refine it if necessary to perfectly match the environment rules.",
                "prompt": "Your name is auditor. You have received an initial PDDL output from the planner:\n{pddl_initial}\nReview this PDDL thoroughly against the Blocksworld rules:\n{environment->public_information}\nEnsure that the actions (pick_up, unstack, put_down, stack) correctly model preconditions and effects, specifically regarding 'hand_empty', 'holding', 'on', 'on_table', and 'clear' predicates. If you find any inconsistencies or missing constraints, correct the Domain and Problem files. Provide the complete, validated PDDL domain and problem. Enclose the PDDL domain between <domain></domain> tags, and the PDDL problem between <problem></problem> tags."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "pddl_refined"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert with PDDL problems (Planning Domain Definition Language), specialized in generating the final actionable planning file for the FastDownwards solver.",
                "prompt": "Your name is orchestrator. You have received the validated PDDL output from the auditor:\n{pddl_refined}\nThis PDDL represents the final, verified solution for the Blocksworld task. Present this final PDDL domain and problem without making any further changes.\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "planner.pddl->auditor.refine",
            "auditor.refine->orchestrator.pddl"
        ]
    }
}