{
    "name": "BlocksworldMediumScaling2",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "planner",
            "auditor",
            "orchestrator"
        ],
        "planner": {
            "private_information": [
                "I am an expert in classical planning tasks based on Blocksworld rules.",
                "The blocks involved are Red (R), Orange (O), Blue (B), and Yellow (Y)."
            ],
            "goal": "Generate a valid PDDL domain and problem file to transform the initial state into the desired goal state based on the explicit rules provided."
        },
        "auditor": {
            "private_information": [],
            "goal": "Audit the generated PDDL for temporal and causal consistency, ensuring it strictly adheres to all specified Blocksworld rules and initial conditions."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Provide the final, consolidated PDDL environment suitable for execution by the FastDownwards solver."
        }
    },
    "environment": {
        "init": {
            "grid_size": 1,
            "visibility": 5
        },
        "public_information": [
            "This is a Blocksworld task involving stacking and unstacking operations on four blocks (Red, Orange, Blue, Yellow).",
            "Available actions include: Pick up a block (from table), Unstack a block (from another block), Put down a block (onto table), Stack a block (onto another block).",
            "Action Constraints:",
            "1. Hand Status: Only one block can be held at a time. Hand must be empty to pick up or unstack.",
            "2. Clear Condition: A block must be 'clear' (no blocks on top) to be picked up or unstacked.",
            "3. Pick Up (Block X): Requires X is on the table and X is clear. Effects: Hand holds X, X is no longer on table, hand is no longer empty.",
            "4. Unstack (Block X from Block Y): Requires X is on Y and X is clear and hand is empty. Effects: Hand holds X, Y becomes clear, X is no longer on Y, hand is no longer empty.",
            "5. Put Down (Block X): Requires hand holds X. Effects: Hand becomes empty, X is now on the table, X is clear.",
            "6. Stack (Block X onto Block Y): Requires hand holds X and Y is clear. Effects: Hand becomes empty, X is on Y, Y is no longer clear.",
            "Initial State (Predicates): (clear Red), (clear Orange), (handempty), (on Blue Yellow), (on Orange Blue), (ontable Red), (ontable Yellow).",
            "Goal State: (on Red Orange) AND (on Blue Red)."
        ]
    },
    "workflow": {
        "planner": {
            "pddl": {
                "input": [],
                "output": "pddl_plan",
                "system_prompt": "You are an expert with PDDL problems (Planning Domain Definition Language). You always provide a PDDL domain and a PDDL problem file to solve the task. You always enclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags.",
                "prompt": "Your name is planner. You are responsible for generating the PDDL definition for the Blocksworld task. Analyze the following environment specifications and constraints:\nEnvironment Public Information:\n{environment->public_information}\nAgent Knowledge:\n{agents->planner->private_information}\nGlobal Goal:\n{agents->planner->goal}\n\nStrictly adhere to the described action preconditions and effects. Think step by step and provide a PDDL domain and a PDDL problem file to solve the task.\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "pddl_plan"
                ],
                "output": "pddl_audited",
                "system_prompt": "You are a planning auditor specialized in verifying PDDL definitions against stated human constraints. You must check for causal consistency, ensuring that the PDDL domain accurately reflects all preconditions and effects described in the environment rules. If the PDDL is valid and consistent, you must output the PDDL provided in the input, unchanged. If inconsistencies are found, you must provide the corrected PDDL, maintaining the <domain> and <problem> tags.",
                "prompt": "Your role is to audit the PDDL generated by the planner against the Blocksworld rules defined in the environment. Pay close attention to action definitions (pick-up, unstack, put-down, stack) and how they modify predicates like (clear), (holding), and (handempty). The planner generated the following PDDL:\n{pddl_plan}\n\nReview the PDDL and ensure it is temporally and causally consistent with the following Blocksworld rules:\n{environment->public_information}\n\nIf the PDDL is correct, output it exactly as received. If you must make corrections to ensure fidelity to the rules, output the corrected version. Always provide the full PDDL domain and problem files, enclosed in <domain></domain> and <problem></problem> tags."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "pddl_audited"
                ],
                "output": "pddl_final",
                "system_prompt": "You are the final orchestrator. Your task is to provide the final PDDL solution ready for the FastDownwards planner. You must present the PDDL received from the auditing stage.",
                "prompt": "The planning and auditing stages for the Blocksworld task are complete. You have received the final, verified PDDL definition. Present this PDDL solution.\nReceived PDDL:\n{pddl_audited}\n\nProvide the PDDL domain and PDDL problem file, enclosed in <domain></domain> tags, and <problem></problem> tags respectively."
            }
        },
        "constraints": [
            "planner.pddl->auditor.audit",
            "auditor.audit->orchestrator.pddl"
        ]
    }
}