{
    "name": "BlocksworldMediumScaling3",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "Planner",
            "Auditor",
            "orchestrator"
        ],
        "Planner": {
            "private_information": [],
            "goal": "Generate a PDDL domain and problem definition to solve the blocks world rearrangement task described in the environment."
        },
        "Auditor": {
            "private_information": [],
            "goal": "Verify the completeness and causal consistency of the PDDL generated by the Planner, ensuring all blocksworld rules and constraints are correctly modeled."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Coordinate the planning process and present the final, verified PDDL solution ready for execution by a solver."
        }
    },
    "environment": {
        "init": {
            "grid_size": 1,
            "visibility": 4,
            "blocks": [
                "red",
                "blue",
                "yellow",
                "orange"
            ],
            "objects": [
                "table"
            ]
        },
        "public_information": [
            "This is a Blocksworld problem involving four blocks: red (R), blue (B), yellow (Y), and orange (O).",
            "Initial state setup:",
            "  - The red block is clear, the blue block is clear, and the hand is empty.",
            "  - Stack 1 configuration: R is on Y, Y is on O, O is on the table.",
            "  - Stack 2 configuration: B is on the table.",
            "Goal state: The blue block must be on top of the orange block AND the yellow block must be on top of the red block. (i.e., (on blue orange) and (on yellow red)).",
            "Constraints: Actions include Pick up (from table), Unstack (from another block), Put down (onto table), and Stack (onto another block).",
            "Only one block can be held at a time. Picking up or unstacking requires an empty hand. Stacking or putting down makes the hand empty.",
            "A block can only be picked up or stacked onto if it is clear (nothing on top of it)."
        ]
    },
    "workflow": {
        "Planner": {
            "pddl_draft": {
                "input": [],
                "output": "pddl_planner_draft",
                "system_prompt": "You are an expert with PDDL problems (Planning Domain Definition Language). You always provide a PDDL domain and a PDDL problem file to solve the task. You always enclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags.",
                "prompt": "Your name is Planner. You are tasked with solving a Blocks World problem described below. You are in an environment with the following public information:\n{environment->public_information}\nThis is the global goal to solve:\n{agents->Planner->goal}\nBased on the initial state and rules provided, translate this task into a PDDL domain and problem.\nEnsure your domain accurately captures the constraints regarding 'hand-empty', 'clear' blocks, 'on' relationships, and the four allowed actions (pick-up, unstack, put-down, stack).\nThink step by step and provide a PDDL domain and a PDDL problem file to solve the task.\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "Auditor": {
            "pddl_audit": {
                "input": [
                    "pddl_planner_draft"
                ],
                "output": "pddl_audit_review",
                "system_prompt": "You are an expert in reviewing and auditing PDDL definitions for temporal and causal consistency. Your primary role is to ensure that action preconditions and effects strictly adhere to the physical constraints described in the environment specification, particularly regarding state changes (e.g., ensuring a block is marked as (clear) only if nothing is on it, and (hand-empty) is correctly toggled). You must provide feedback on the consistency of the provided PDDL and, if necessary, provide a revised, corrected PDDL domain and problem.",
                "prompt": "Your name is Auditor. You are reviewing the following PDDL draft intended to solve the Blocks World problem:\n{pddl_planner_draft}\nReview this PDDL against the public information and constraints:\n{environment->public_information}\nFocus on checking the temporal/causal relationships, ensuring no bookkeeping shortcuts are present, and that the definitions of 'clear' and 'hand-empty' are robust across all actions (pick-up, unstack, put-down, stack).\nIf the PDDL is consistent and correct, state so explicitly. If corrections are needed, provide the revised PDDL domain and problem, ensuring they are enclosed in <domain> and <problem> tags respectively."
            }
        },
        "orchestrator": {
            "pddl_final": {
                "input": [
                    "pddl_planner_draft",
                    "pddl_audit_review"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in integrating PDDL components and finalizing planning solutions suitable for solvers like FastDownwards. You ensure the final output is coherent and complete.",
                "prompt": "Your name is orchestrator. You have received a draft PDDL plan and an audit review for a Blocks World problem. Your task is to finalize the integrated solution.\nOriginal PDDL Draft:\n{pddl_planner_draft}\nAudit Review:\n{pddl_audit_review}\nAnalyze the review. If the Auditor suggests revisions, incorporate them into the final domain and problem. If the Auditor confirms the original draft is correct, use the original draft.\nProvide the final, consolidated PDDL domain and problem that solves the task {agents->orchestrator->goal}.\nThink step by step and provide a PDDL domain and a PDDL problem file to solve the task.\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "Planner.pddl_draft->Auditor.pddl_audit",
            "Planner.pddl_draft->orchestrator.pddl_final",
            "Auditor.pddl_audit->orchestrator.pddl_final"
        ]
    }
}