{
    "name": "ChildsnackExample1",
    "author": "Human",
    "agents": {
        "number": 2,
        "names": [
            "pddl_modeler",
            "orchestrator"
        ],
        "pddl_modeler": {
            "private_information": [
                "The natural language description of the domain outlines six actions: make_sandwich_no_gluten, make_sandwich, put_on_tray, serve_sandwich_no_gluten, serve_sandwich, and move_tray.",
                "The task requires filling in the PDDL domain definition including predicates, preconditions, and effects for these actions, based on the provided natural language rules.",
                "The goal is to produce a valid PDDL domain and problem pair for the Child-Snack task."
            ],
            "goal": "Generate the complete PDDL domain definition, integrating it with the provided PDDL problem definition."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Finalize and present the complete PDDL domain and problem files required to solve the planning task using FastDownwards."
        }
    },
    "environment": {
        "init": {
            "grid_size": 0,
            "visibility": 0
        },
        "public_information": [
            "This is a symbolic planning task using the Child-Snack domain.",
            "Domain NL description:\n<domain_nl>The child-snack domain is designed to plan the preparation and serving of sandwiches to children, some of whom have gluten allergies. The domain includes actions for making sandwiches with and without gluten, placing sandwiches on trays, moving trays between places, and serving the sandwiches to the children. The actions defined in this domain include:\n1. make_sandwich_no_gluten: Preconditions: gluten-free bread, gluten-free content available in the kitchen, sandwich must not already exist. Effects: gluten-free bread/content consumed, gluten-free sandwich available in the kitchen.\n2. make_sandwich: Preconditions: bread and content available in the kitchen, sandwich must not already exist. Effects: bread/content consumed, sandwich available in the kitchen.\n3. put_on_tray: Preconditions: sandwich in the kitchen, tray at the kitchen. Effects: sandwich moves from kitchen to tray.\n4. serve_sandwich_no_gluten: Preconditions: child allergic to gluten, waiting at a place, gluten-free sandwich on tray at that place. Effects: child served, sandwich removed from tray.\n5. serve_sandwich: Preconditions: child not allergic to gluten, waiting at a place, sandwich on tray at that place. Effects: child served, sandwich removed from tray.\n6. move_tray: Precondition: tray at starting place. Effect: tray moves to destination place.</domain_nl>",
            "Problem NL description:\n<problem_nl>Seven children (child1-7) need to be served. Two trays (tray1, tray2) start at the kitchen. Seven bread portions (bread1-7) and seven content portions (content1-7) start at the kitchen. GF ingredients: bread2, bread6, content3, content7. Allergic children: child1, child5. Waiting positions specified: child1 (table2), child2 (table1), child3 (table3), child4 (table2), child5 (table1), child6 (table1), child7 (table2). Goal: All children served.</problem_nl>",
            "PDDL Domain Template:\n<domain_template>(define (domain child-snack)\n  (:requirements :typing :equality)\n  (:types child bread-portion content-portion sandwich tray place)\n  (:constants kitchen - place)\n  (:predicates)\n  (:action make_sandwich_no_gluten ...)\n  (:action make_sandwich ...)\n  (:action put_on_tray ...)\n  (:action serve_sandwich_no_gluten ...)\n  (:action serve_sandwich ...)\n  (:action move_tray ...)\n)</domain_template>",
            "PDDL Problem Template:\n<problem_pddl>; child-snack task with 7 children and 0.4 gluten factor \n; constant factor of 1.3\n; random seed: 234324\n\n(define (problem prob-snack)\n  (:domain child-snack)\n  (:objects\n    child1 child2 child3 child4 child5 child6 child7 - child\n    bread1 bread2 bread3 bread4 bread5 bread6 bread7 - bread-portion\n    content1 content2 content3 content4 content5 content6 content7 - content-portion\n    tray1 tray2 - tray\n    table1 table2 table3 - place\n    sandw1 sandw2 sandw3 sandw4 sandw5 sandw6 sandw7 sandw8 sandw9 sandw10 - sandwich\n  )\n  (:init\n     (at tray1 kitchen)\n     (at tray2 kitchen)\n     (at_kitchen_bread bread1)\n     (at_kitchen_bread bread2)\n     (at_kitchen_bread bread3)\n     (at_kitchen_bread bread4)\n     (at_kitchen_bread bread5)\n     (at_kitchen_bread bread6)\n     (at_kitchen_bread bread7)\n     (at_kitchen_content content1)\n     (at_kitchen_content content2)\n     (at_kitchen_content content3)\n     (at_kitchen_content content4)\n     (at_kitchen_content content5)\n     (at_kitchen_content content6)\n     (at_kitchen_content content7)\n     (no_gluten_bread bread2)\n     (no_gluten_bread bread6)\n     (no_gluten_content content3)\n     (no_gluten_content content7)\n     (allergic_gluten child1)\n     (allergic_gluten child5)\n     (not_allergic_gluten child2)\n     (not_allergic_gluten child3)\n     (not_allergic_gluten child4)\n     (not_allergic_gluten child6)\n     (not_allergic_gluten child7)\n     (waiting child1 table2)\n     (waiting child2 table1)\n     (waiting child3 table3)\n     (waiting child4 table2)\n     (waiting child5 table1)\n     (waiting child6 table1)\n     (waiting child7 table2)\n     (notexist sandw1)\n     (notexist sandw2)\n     (notexist sandw3)\n     (notexist sandw4)\n     (notexist sandw5)\n     (notexist sandw6)\n     (notexist sandw7)\n     (notexist sandw8)\n     (notexist sandw9)\n     (notexist sandw10)\n  )\n  (:goal\n    (and\n     (served child1)\n     (served child2)\n     (served child3)\n     (served child4)\n     (served child5)\n     (served child6)\n     (served child7)\n    )\n  )\n)\n</problem_pddl>"
        ]
    },
    "workflow": {
        "pddl_modeler": {
            "modeling": {
                "input": [],
                "output": "pddl_draft",
                "system_prompt": "You are an expert PDDL modeler. You must complete the provided PDDL domain template based on the natural language rules provided. You must also include the full PDDL problem definition based on the provided template and natural language constraints. You must output the completed PDDL domain and problem enclosed in <domain> and <problem> tags respectively. Note that for the 'make_sandwich' action, you must ensure it does not consume ingredients explicitly marked as gluten-free, typically requiring the use of negative preconditions.",
                "prompt": "Based on the NL domain description and the PDDL templates provided in the public information, generate the complete PDDL domain definition, including all necessary predicates, preconditions, and effects for the actions. Ensure the domain is compatible with the provided problem template.\n\nPDDL Domain Template:\n{environment->public_information[2]}\n\nPDDL Problem Template:\n{environment->public_information[3]}\n\nNatural Language Domain Rules:\n{environment->public_information[1]}\n\nOutput the completed PDDL domain between <domain></domain> tags and the completed PDDL problem (using the provided template) between <problem></problem> tags."
            }
        },
        "orchestrator": {
            "output": {
                "input": [
                    "pddl_draft"
                ],
                "output": "pddl_final",
                "system_prompt": "You are an expert in combining and verifying PDDL files for submission to the FastDownwards planner. Ensure the domain and problem are valid, logically consistent, and correctly formatted using the required tags.",
                "prompt": "Review the generated PDDL domain and problem files:\n{pddl_draft}\n\nEnsure that the PDDL domain accurately reflects the six actions and their constraints described in the Child-Snack domain NL, and that the PDDL problem accurately reflects the initial state described. Combine the verified PDDL domain and PDDL problem into a single response, using <domain></domain> tags and <problem></problem> tags respectively."
            }
        },
        "constraints": [
            "pddl_modeler.modeling->orchestrator.output"
        ]
    }
}