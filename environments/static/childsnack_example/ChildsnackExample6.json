{
    "name": "ChildsnackExample6",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "domain_expert",
            "problem_setter",
            "orchestrator"
        ],
        "domain_expert": {
            "private_information": [
                "My role is to accurately define predicates and actions based on the provided natural language domain description."
            ],
            "goal": "Generate a complete and correct PDDL domain definition for the Child-Snack problem."
        },
        "problem_setter": {
            "private_information": [
                "My role is to verify and formalize the initial state (:init) and the goal state (:goal) based on the natural language problem description."
            ],
            "goal": "Generate a complete and correct PDDL problem initialization and goal state definition."
        },
        "orchestrator": {
            "private_information": [
                "My role is to combine the domain and problem definitions provided by the experts and ensure the final output is a valid PDDL pair suitable for FastDownwards."
            ],
            "goal": "Generate the final integrated PDDL domain and problem files that solve the task."
        }
    },
    "environment": {
        "init": {
            "grid_size": 1,
            "visibility": 1
        },
        "public_information": [
            "This is a single-agent PDDL planning challenge focused on the Child-Snack domain.",
            "The objective is to prepare and serve nine children with appropriate sandwiches based on their dietary restrictions and location."
        ]
    },
    "workflow": {
        "domain_expert": {
            "pddl": {
                "input": [],
                "output": "pddl_domain_completed",
                "system_prompt": "You are an expert in PDDL Domain definition. You must fill in the missing predicates, preconditions, and effects in the provided PDDL domain template based strictly on the natural language description of the domain. You always provide a complete PDDL domain definition enclosed between <domain></domain> tags.",
                "prompt": "You are tasked with defining the PDDL domain for the Child-Snack planning problem. Use the following natural language domain description and complete the provided PDDL domain template:\n\nNATURAL LANGUAGE DOMAIN DESCRIPTION:\n<domain_nl>\nThe child-snack domain is designed to plan the preparation and serving of sandwiches to children, some of whom have gluten allergies. The domain includes actions for making sandwiches with and without gluten, placing sandwiches on trays, moving trays between places, and serving the sandwiches to the children.\n\nThe actions defined in this domain include:\n\n1. make_sandwich_no_gluten: This action is for making a gluten-free sandwich. The preconditions for this action are that there must be gluten-free bread and gluten-free content available in the kitchen, and the sandwich must not already exist. The effect of this action is that the gluten-free bread and content are no longer available in the kitchen, and a gluten-free sandwich is now available in the kitchen.\n\n2. make_sandwich: This action is for making a regular sandwich that may contain gluten. The preconditions are that there must be bread and content available in the kitchen, and the sandwich must not already exist. The effect of this action is that the bread and content are no longer available in the kitchen, and a sandwich is now available in the kitchen.\n\n3. put_on_tray: This action is for placing a sandwich on a tray. The preconditions are that the sandwich must be in the kitchen and the tray must be at the kitchen. The effect is that the sandwich is no longer in the kitchen and is now on the tray.\n\n4. serve_sandwich_no_gluten: This action is for serving a gluten-free sandwich to a child who is allergic to gluten. The preconditions are that the child is allergic to gluten, waiting at a place, and there is a gluten-free sandwich on a tray at the same place. The effect is that the sandwich is no longer on the tray and the child is served.\n\n5. serve_sandwich: This action is for serving a sandwich to a child who is not allergic to gluten. The preconditions are that the child is not allergic to gluten, waiting at a place, and there is a sandwich on a tray at the same place. The effect is that the sandwich is no longer on the tray and the child is served.\n\n6. move_tray: This action allows a tray to be moved from one place to another. The precondition is that the tray is at the starting place. The effect is that the tray is no longer at the starting place and is now at the destination place.\n</domain_nl>\n\nPDDL DOMAIN TEMPLATE:\n<domain_template>\n(define (domain child-snack)\n  (:requirements :typing :equality)\n  (:types child bread-portion content-portion sandwich tray place)\n  (:constants kitchen - place)\n\n  (:predicates)\n\n  (:action make_sandwich_no_gluten\n    :parameters (?s - sandwich ?b - bread-portion ?c - content-portion)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action make_sandwich\n    :parameters (?s - sandwich ?b - bread-portion ?c - content-portion)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action put_on_tray\n    :parameters (?s - sandwich ?t - tray)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action serve_sandwich_no_gluten\n    :parameters (?s - sandwich ?c - child ?t - tray ?p - place)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action serve_sandwich\n    :parameters (?s - sandwich ?c - child ?t - tray ?p - place)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action move_tray\n    :parameters (?t - tray ?p1 ?p2 - place)\n    :precondition ()\n    :effect ()\n  )\n)\n</domain_template>\n\nBased on the NL description, define the necessary predicates and fill in the preconditions and effects for all actions. Provide the final, complete PDDL domain only."
            }
        },
        "problem_setter": {
            "pddl": {
                "input": [],
                "output": "pddl_problem_details",
                "system_prompt": "You are an expert PDDL problem setter. You confirm the objects, initial state, and goal state based on the provided natural language problem description and the PDDL problem template. You always provide a complete PDDL problem definition enclosed between <problem></problem> tags.",
                "prompt": "You are tasked with confirming the PDDL problem definition for the Child-Snack scenario. Analyze the provided natural language problem description and ensure the PDDL problem template accurately reflects it. If the template is correct, reproduce it exactly. If it is incomplete or incorrect based on the NL description, fix it.\n\nNATURAL LANGUAGE PROBLEM DESCRIPTION:\n<problem_nl>\nYou are tasked with preparing and serving sandwiches to nine children, some of whom have gluten allergies, using a set of actions that involve making sandwiches, placing them on trays, moving trays, and serving the sandwiches.\n\nInitially:\n- There are three trays, tray1, tray2, and tray3, all located in the kitchen.\n- There are nine portions of bread, bread1 through bread9, all in the kitchen.\n- There are nine portions of content, content1 through content9, all in the kitchen.\n- Bread portions bread6, bread2, and bread7 are gluten-free.\n- Content portions content9, content4, and content5 are gluten-free.\n- Child9, child2, and child3 are allergic to gluten.\n- Child1, child4, child5, child6, child7, and child8 are not allergic to gluten.\n- Child1 is waiting at table3.\n- Child2, child4, child5, and child6 are waiting at table1.\n- Child3 and child7 are waiting at table3.\n- Child8 and child9 are waiting at table2.\n- There are twelve sandwiches, sandw1 through sandw12, which do not exist yet.\n\nYour goal is to ensure that:\n- All nine children, child1 through child9, are served with a sandwich that they are not allergic to.\n</problem_nl>\n\nPDDL PROBLEM TEMPLATE:\n<problem_pddl>\n; child-snack task with 9 children and 0.4 gluten factor \n; constant factor of 1.3\n; random seed: 101\n\n(define (problem prob-snack)\n  (:domain child-snack)\n  (:objects\n    child1 child2 child3 child4 child5 child6 child7 child8 child9 - child\n    bread1 bread2 bread3 bread4 bread5 bread6 bread7 bread8 bread9 - bread-portion\n    content1 content2 content3 content4 content5 content6 content7 content8 content9 - content-portion\n    tray1 tray2 tray3 - tray\n    table1 table2 table3 - place\n    sandw1 sandw2 sandw3 sandw4 sandw5 sandw6 sandw7 sandw8 sandw9 sandw10 sandw11 sandw12 - sandwich\n  )\n  (:init\n     (at tray1 kitchen)\n     (at tray2 kitchen)\n     (at tray3 kitchen)\n     (at_kitchen_bread bread1)\n     (at_kitchen_bread bread2)\n     (at_kitchen_bread bread3)\n     (at_kitchen_bread bread4)\n     (at_kitchen_bread bread5)\n     (at_kitchen_bread bread6)\n     (at_kitchen_bread bread7)\n     (at_kitchen_bread bread8)\n     (at_kitchen_bread bread9)\n     (at_kitchen_content content1)\n     (at_kitchen_content content2)\n     (at_kitchen_content content3)\n     (at_kitchen_content content4)\n     (at_kitchen_content content5)\n     (at_kitchen_content content6)\n     (at_kitchen_content content7)\n     (at_kitchen_content content8)\n     (at_kitchen_content content9)\n     (no_gluten_bread bread6)\n     (no_gluten_bread bread2)\n     (no_gluten_bread bread7)\n     (no_gluten_content content9)\n     (no_gluten_content content4)\n     (no_gluten_content content5)\n     (allergic_gluten child9)\n     (allergic_gluten child2)\n     (allergic_gluten child3)\n     (not_allergic_gluten child1)\n     (not_allergic_gluten child4)\n     (not_allergic_gluten child5)\n     (not_allergic_gluten child6)\n     (not_allergic_gluten child7)\n     (not_allergic_gluten child8)\n     (waiting child1 table3)\n     (waiting child2 table1)\n     (waiting child3 table3)\n     (waiting child4 table1)\n     (waiting child5 table1)\n     (waiting child6 table1)\n     (waiting child7 table3)\n     (waiting child8 table2)\n     (waiting child9 table2)\n     (notexist sandw1)\n     (notexist sandw2)\n     (notexist sandw3)\n     (notexist sandw4)\n     (notexist sandw5)\n     (notexist sandw6)\n     (notexist sandw7)\n     (notexist sandw8)\n     (notexist sandw9)\n     (notexist sandw10)\n     (notexist sandw11)\n     (notexist sandw12)\n  )\n  (:goal\n    (and\n     (served child1)\n     (served child2)\n     (served child3)\n     (served child4)\n     (served child5)\n     (served child6)\n     (served child7)\n     (served child8)\n     (served child9)\n    )\n  )\n)\n</problem_pddl>\n\nProvide the final, complete PDDL problem only."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "pddl_domain_completed",
                    "pddl_problem_details"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are the final stage orchestrator. Your task is to combine the previously generated PDDL Domain and PDDL Problem specifications into a final, coherent pair suitable for a standard PDDL solver like FastDownwards. Ensure the domain and problem are consistent.",
                "prompt": "Here is the completed PDDL Domain:\n{pddl_domain_completed}\n\nHere is the verified PDDL Problem:\n{pddl_problem_details}\n\nReview the two pieces for consistency (especially predicate usage) and output the final, confirmed PDDL Domain followed by the final PDDL Problem. Enclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "domain_expert.pddl->orchestrator.pddl",
            "problem_setter.pddl->orchestrator.pddl"
        ]
    }
}