{
    "name": "Depots19",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "hoist_operator",
            "truck_driver",
            "logistics_auditor",
            "orchestrator"
        ],
        "hoist_operator": {
            "private_information": [
                "I operate hoists that can lift, drop, load, and unload crates.",
                "Hoists are located at places and can be available or lifting.",
                "Hoists cannot move by themselves; they act only at the place where they are located."
            ],
            "goal": "Contribute models and constraints for hoist-related actions so the global goal can be achieved: crate0 on crate1 and crate1 on pallet1."
        },
        "truck_driver": {
            "private_information": [
                "I operate trucks that drive between places (depots and distributors).",
                "A truck must be at a place to be driven from that place to another place.",
                "Driving changes the truck's location from origin to destination."
            ],
            "goal": "Contribute models and constraints for truck driving actions so the global goal can be achieved: crate0 on crate1 and crate1 on pallet1."
        },
        "logistics_auditor": {
            "private_information": [
                "I audit temporal and causal consistency of multi-agent plans.",
                "I remove bookkeeping shortcuts (quota tokens, post-hoc penalties) and produce corrected invariants and ordering constraints.",
                "I check for implicit assumptions (e.g., uniqueness of places, surfaces) and request explicit invariants."
            ],
            "goal": "Audit the models from hoist_operator and truck_driver for temporal/causal consistency, produce corrections, and emit invariants that the orchestrator must integrate."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate models and audit corrections and produce a final PDDL domain and problem suitable for the FastDownwards planner that achieves: crate0 on crate1 and crate1 on pallet1."
        }
    },
    "environment": {
        "init": {
            "grid_size": 6,
            "visibility": 2,
            "places": 4,
            "depots": 3,
            "distributors": 1,
            "pallets": 4,
            "crates": 3,
            "hoists": 4,
            "trucks": 3
        },
        "public_information": [
            "There are places of two types: depots and distributors.",
            "Depots: depot0, depot1, depot2. Distributors: distributor0.",
            "Surfaces: pallets and crates (pallets: pallet0..pallet3; crates: crate0..crate2).",
            "Hoists: hoist0..hoist3. Trucks: truck0..truck2.",
            "Roads connect every pair of places (trucks can drive between any two places).",
            "Action types available in the domain: drive(truck, from, to), hoist-lift(hoist, crate, surface, place), hoist-drop(hoist, crate, surface, place), hoist-load(hoist, crate, truck, place), hoist-unload(hoist, crate, truck, place).",
            "Action restrictions summary (to be expanded by agents): a truck can be driven only if it is at the origin place; lifting requires hoist and crate at same place, hoist available and crate clear; dropping requires hoist lifting the crate and target surface clear; loading requires hoist lifting the crate and truck at same place; unloading requires hoist available at place and crate in truck.",
            "Initial state (explicit): crate0 at depot0; crate1 at depot0; crate2 at depot2; hoist0 at depot0; hoist1 at depot1; hoist2 at depot2; hoist3 at distributor0; pallet0 at depot0; pallet1 at depot1; pallet2 at depot2; pallet3 at distributor0; truck0 at depot0; truck1 at depot2; truck2 at distributor0; hoist0 available; hoist1 available; hoist2 available; hoist3 available; crate1 clear; crate2 clear; pallet1 clear; pallet3 clear; crate0 on pallet0; crate1 on crate0; crate2 on pallet2.",
            "Explicit goal: crate0 on crate1 and crate1 on pallet1."
        ]
    },
    "workflow": {
        "hoist_operator": {
            "modeling": {
                "input": [],
                "output": "hoist_model",
                "system_prompt": "You are the hoist operator domain expert. Produce a clear, structured, non-PDDL specification of hoist-related actions (lift, drop, load, unload). For each action list: parameters, preconditions, effects (explicit positive and negative facts), and any typing information (which parameters are places, surfaces, hoists, trucks, crates). Do not emit PDDL. Use plain structured lists or JSON-like entries. Identify any ambiguities or missing invariants the orchestrator should be aware of.",
                "prompt": "You are hoist_operator. Use the environment public information: {environment->public_information} and your private knowledge: {agents->hoist_operator->private_information}. Produce a structured model of hoist-related actions that includes parameters, preconditions, effects, and typing for surfaces and places. Explicitly state assumptions you make."
            }
        },
        "truck_driver": {
            "modeling": {
                "input": [],
                "output": "truck_model",
                "system_prompt": "You are the truck-driving domain expert. Produce a clear, structured, non-PDDL specification of driving-related actions. For each action list: parameters, preconditions, effects, and typing. Enumerate invariants about place connectivity and truck location updates. Do not emit PDDL.",
                "prompt": "You are truck_driver. Use the environment public information: {environment->public_information} and your private knowledge: {agents->truck_driver->private_information}. Produce a structured model for drive actions including exact preconditions and effects and any required typing or mutual exclusions. State any assumptions."
            }
        },
        "logistics_auditor": {
            "audit": {
                "input": [
                    "hoist_model",
                    "truck_model"
                ],
                "output": "audit_report",
                "system_prompt": "You are the logistics auditor. Analyze the hoist_model and truck_model for temporal and causal consistency, remove bookkeeping shortcuts (e.g., tokens or implicit 'after-the-fact' repairs), and produce a corrected set of invariants and ordering constraints. Provide explicit suggestions for required predicates/axioms (e.g., available/ lifting/ in-truck) and highlight any conflicts or missing mutual exclusion constraints. Output a machine-friendly report (structured text or JSON) but not PDDL.",
                "prompt": "You are logistics_auditor. Receive: {hoist_model} and {truck_model}. Audit them with respect to the public initial state: {environment->public_information} and your private knowledge: {agents->logistics_auditor->private_information}. Produce an audit_report that enumerates: (1) required invariants and typing, (2) causal/temporal ordering constraints between hoist and truck actions, (3) corrections to models to avoid bookkeeping shortcuts, and (4) any additional predicates needed for sound planning."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "hoist_model",
                    "truck_model",
                    "audit_report"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are the orchestrator responsible for producing a final PDDL domain and problem targeting the FastDownwards planner. Integrate the structured models and the audit_report into a single coherent PDDL domain and PDDL problem. Use explicit typing (places, depots, distributors, hoists, trucks, pallets, crates). Keep each agent's actions distinct by prefixing action names with agent identifiers when appropriate. Ensure preconditions and effects reflect the audit corrections (no bookkeeping shortcuts), include necessary invariants, and ensure the problem encodes the given initial state and goal. Enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags. Target FastDownwards compatibility: include :requirements (at least :typing, :negative-preconditions, :strips, :conditional-effects if used), and avoid constructs unsupported by FastDownwards. Produce only the PDDL domain and problem enclosed in the tags.",
                "prompt": "You are orchestrator. Integrate these inputs: \n- hoist_model: {hoist_model}\n- truck_model: {truck_model}\n- audit_report: {audit_report}\nUse the public information and initial state: {environment->public_information}\nGlobal goal: {agents->orchestrator->goal}\nThink step by step, resolve naming ambiguities, ensure actions remain distinct across agents, apply audit corrections, and output a final PDDL domain and problem suitable for FastDownwards. Enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "hoist_operator.modeling->orchestrator.pddl",
            "truck_driver.modeling->orchestrator.pddl",
            "logistics_auditor.audit->orchestrator.pddl"
        ]
    },
    "constraints": [
        "hoist_operator.modeling->orchestrator.pddl",
        "truck_driver.modeling->orchestrator.pddl",
        "logistics_auditor.audit->orchestrator.pddl"
    ]
}