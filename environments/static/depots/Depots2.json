{
    "name": "Depots2",
    "author": "Human",
    "agents": {
        "number": 5,
        "names": [
            "driver",
            "hoist_operator",
            "depot_manager",
            "auditor",
            "orchestrator"
        ],
        "driver": {
            "private_information": [
                "I am responsible for routing and driving trucks between places.",
                "Trucks can drive along roads connecting any two depots or distributors.",
                "Driving a truck requires the truck to be at the origin place."
            ],
            "goal": "Transport crates so that crate1 is on pallet0 and crate2 is on pallet3."
        },
        "hoist_operator": {
            "private_information": [
                "I operate hoists that can lift, drop, load into trucks, and unload from trucks.",
                "A hoist can only manipulate a crate if it is at the same place as the crate.",
                "Hoists have availability status and can be lifting a crate or available."
            ],
            "goal": "Coordinate hoist actions to move crates to achieve crate1 on pallet0 and crate2 on pallet3."
        },
        "depot_manager": {
            "private_information": [
                "I manage the inventory and surfaces (pallets and crates) at depots and distributors.",
                "Surfaces include pallets and crates, and 'clear' indicates nothing is on top of that surface."
            ],
            "goal": "Ensure crates and pallets are placed and sequenced so the overall delivery goal is met."
        },
        "auditor": {
            "private_information": [
                "I audit temporal and causal consistency of plans and remove bookkeeping shortcuts or implicit assumptions.",
                "I check for missing preconditions, race conditions, concurrency issues, and post-hoc penalties."
            ],
            "goal": "Provide an audit report that enforces explicit causal tokens and removes bookkeeping shortcuts so plans are executable and consistent."
        },
        "orchestrator": {
            "private_information": [
                "I integrate specifications from other agents and produce the final PDDL domain and problem suitable for the FastDownwards solver.",
                "I must keep each agent's actions distinct and resolve naming or modeling ambiguities."
            ],
            "goal": "Produce a combined PDDL domain and problem that achieves crate1 on pallet0 and crate2 on pallet3 and is compatible with FastDownwards."
        }
    },
    "environment": {
        "init": {
            "places": [
                "depot0",
                "depot1",
                "depot2",
                "distributor0"
            ],
            "pallets": [
                "pallet0",
                "pallet1",
                "pallet2",
                "pallet3"
            ],
            "crates": [
                "crate0",
                "crate1",
                "crate2"
            ],
            "hoists": [
                "hoist0",
                "hoist1",
                "hoist2",
                "hoist3"
            ],
            "trucks": [
                "truck0",
                "truck1",
                "truck2"
            ],
            "initial_facts": [
                "crate0 is at depot2",
                "crate1 is at depot0",
                "crate2 is at depot2",
                "hoist0 is at depot0",
                "hoist1 is at depot1",
                "hoist2 is at depot2",
                "hoist3 is at distributor0",
                "pallet0 is at depot0",
                "pallet1 is at depot1",
                "pallet2 is at depot2",
                "pallet3 is at distributor0",
                "truck0 is at depot2",
                "truck1 is at depot0",
                "truck2 is at depot2",
                "hoist0 is available",
                "hoist1 is available",
                "hoist2 is available",
                "hoist3 is available",
                "crate1 is clear",
                "crate2 is clear",
                "pallet1 is clear",
                "pallet3 is clear",
                "crate0 is on pallet2",
                "crate1 is on pallet0",
                "crate2 is on crate0"
            ],
            "goal_facts": [
                "crate1 is on pallet0",
                "crate2 is on pallet3"
            ]
        },
        "public_information": [
            "There are places of type depot and distributor.",
            "Depots and distributors are fully connected by roads so trucks can drive between any pair of places.",
            "A depot is a type of place.",
            "A distributor is a type of place.",
            "A pallet is a type of surface.",
            "A crate is a type of surface and crates can be stacked.",
            "Actions available are drive truck, hoist lift, hoist drop, hoist load-into-truck, hoist unload-from-truck.",
            "Driving a truck moves the truck from origin place to destination place and requires the truck to be at the origin.",
            "Hoist lift requires hoist and crate to be at the same place, the hoist to be available, and the crate to be clear.",
            "After hoist lift the crate is held by the hoist, the hoist is not available, the crate is no longer at the place, and the previous surface becomes clear.",
            "Hoist drop requires hoist and target surface to be at the same place, the surface to be clear, and the hoist to be lifting that crate.",
            "After hoist drop the hoist becomes available, the crate is at the place on the surface, the surface is not clear, the crate is clear, and the hoist is not lifting the crate.",
            "Hoist load-into-truck requires hoist and truck to be at the same place and the hoist to be lifting the crate.",
            "Hoist unload-from-truck requires hoist and truck at the same place, the hoist to be available, and the crate to be in the truck. After unload the crate is held by the hoist and the hoist becomes not available.",
            "Modeling should avoid bookkeeping shortcuts and must make preconditions and effects explicit for temporal and concurrent execution."
        ]
    },
    "workflow": {
        "driver": {
            "spec": {
                "input": [],
                "output": "spec_driver",
                "system_prompt": "You are the driver expert. Provide a concise specification of the driving actions for trucks including preconditions, effects, parameters, and any required invariants. Do not emit PDDL. Focus on the motion model, required location predicates, and concurrency considerations.",
                "prompt": "Your role is driver. You see the public information and initial facts. Describe the drive action from one place to another, list required predicates and typical preconditions and effects, and call out any modeling choices or ambiguities that an orchestrator must resolve. Mention assumptions about instantaneous versus durative driving and resource conflicts for trucks."
            }
        },
        "hoist_operator": {
            "spec": {
                "input": [],
                "output": "spec_hoist_operator",
                "system_prompt": "You are the hoist operations expert. Provide a concise specification of hoist actions including lift, drop, load-into-truck, and unload-from-truck. Do not emit PDDL. Include preconditions, effects, parameters, and constraints about availability and place alignment. Highlight stacking rules and surface clearance semantics.",
                "prompt": "Your role is hoist operator. Use the public information and initial facts to describe hoist-related actions in detail. Enumerate predicates needed to represent hoist availability, lifting state, crate-in-truck state, crate-on-surface state, and any necessary invariants. Note any ambiguities such as how to represent 'lifting' versus 'in-truck' and whether load and unload are atomic."
            }
        },
        "depot_manager": {
            "spec": {
                "input": [],
                "output": "spec_depot_manager",
                "system_prompt": "You are the depot and inventory expert. Provide a concise specification of surface and stacking semantics and of initial placement interpretation. Do not emit PDDL. Emphasize constraints about 'clear' predicates, stacking order, and how to represent 'crate on crate' and 'crate on pallet'.",
                "prompt": "Your role is depot manager. Using the public information and initial facts, describe the ontology of pallets and crates, the semantics of 'clear', and any constraints that must be encoded for safe hoist operations. Point out potential inconsistencies in the initial facts and recommend explicit predicates to model stacks and surfaces."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "spec_driver",
                    "spec_hoist_operator",
                    "spec_depot_manager"
                ],
                "output": "audit_report",
                "system_prompt": "You are an auditor focused on temporal and causal consistency. Produce an audit report that identifies missing preconditions, concurrency hazards, and any bookkeeping shortcuts. Recommend explicit causal tokens and model corrections to remove implicit assumptions. Do not emit PDDL.",
                "prompt": "Your role is auditor. Review the three specifications provided and the initial facts and goal. Identify race conditions, places where resource locking is required, where implicit effects or inverse effects were omitted, and where modeling choices could break under parallel execution. Produce a prioritized list of fixes the orchestrator should apply before PDDL generation."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "spec_driver",
                    "spec_hoist_operator",
                    "spec_depot_manager",
                    "audit_report"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are the orchestrator who must integrate agent specifications and the auditor report and produce a PDDL domain and PDDL problem suitable for the FastDownwards solver. Keep actions produced by different agents distinct and resolve naming mismatches. Enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem>. Ensure the model is explicit about preconditions, effects, mutexes or resources, and stack semantics so the produced files work with FastDownwards.",
                "prompt": "You are the orchestrator. Integrate inputs from drivers, hoist operators, depot manager, and the auditor. Resolve ambiguities and produce a complete PDDL domain and problem that achieves the goal crate1 on pallet0 and crate2 on pallet3. Keep each agent's actions namespaced so actions remain distinct across agents. Output only the PDDL domain and problem enclosed in <domain> and <problem> tags."
            }
        },
        "constraints": [
            "driver.spec->orchestrator.pddl",
            "hoist_operator.spec->orchestrator.pddl",
            "depot_manager.spec->orchestrator.pddl",
            "auditor.audit->orchestrator.pddl"
        ]
    }
}