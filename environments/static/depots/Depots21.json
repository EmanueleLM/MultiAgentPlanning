{
    "name": "Depots21",
    "author": "Human",
    "agents": {
        "number": 5,
        "names": [
            "driver",
            "hoist_operator",
            "planner",
            "auditor",
            "orchestrator"
        ],
        "driver": {
            "private_information": [
                "Trucks can drive between any two depots or distributors using existing roads.",
                "A truck can be driven only if it is at the origin place.",
                "Driving a truck moves it from the origin to the destination."
            ],
            "goal": "Arrange crates so that crate0 is on pallet2, crate1 is on pallet0, and crate2 is on crate1."
        },
        "hoist_operator": {
            "private_information": [
                "Hoists operate at places and can lift, drop, load to truck and unload from truck.",
                "Hoist operations require the hoist to be at the same place as the relevant object.",
                "Hoist availability and object clearance are important preconditions."
            ],
            "goal": "Arrange crates so that crate0 is on pallet2, crate1 is on pallet0, and crate2 is on crate1."
        },
        "planner": {
            "private_information": [
                "Depots and distributors are types of places and are directly connected by roads.",
                "Pallets and crates are surfaces and can support crates.",
                "High-level sequencing and resource allocation are needed to achieve the goal."
            ],
            "goal": "Provide a high-level plan to achieve that crate0 is on pallet2, crate1 is on pallet0, and crate2 is on crate1."
        },
        "auditor": {
            "private_information": [
                "You audit temporal and causal consistency and remove bookkeeping shortcuts such as tokens or post-hoc penalties.",
                "You must ensure action schemas do not rely on implicit bookkeeping shortcuts and that preconditions and effects fully capture causal dependencies."
            ],
            "goal": "Audit specifications from other agents for causal and temporal consistency and provide corrected action schemas without bookkeeping shortcuts."
        },
        "orchestrator": {
            "private_information": [
                "You integrate agent specifications to produce a final PDDL domain and problem targeted to the FastDownwards solver."
            ],
            "goal": "Integrate component specifications and produce a single PDDL domain and PDDL problem that achieves the crate placement goals for FastDownwards."
        }
    },
    "environment": {
        "init": {
            "places": [
                "depot0",
                "depot1",
                "depot2",
                "distributor0"
            ],
            "pallets": [
                "pallet0",
                "pallet1",
                "pallet2",
                "pallet3"
            ],
            "crates": [
                "crate0",
                "crate1",
                "crate2"
            ],
            "hoists": [
                "hoist0",
                "hoist1",
                "hoist2",
                "hoist3"
            ],
            "trucks": [
                "truck0",
                "truck1",
                "truck2"
            ],
            "grid_size": 5,
            "visibility": 2
        },
        "public_information": [
            "A depot is a type of place.",
            "A distributor is a type of place.",
            "A pallet is a type of surface.",
            "A crate is a type of surface.",
            "Actions available: drive truck between places, lift crate with hoist from a surface at a place, drop crate with hoist to a surface at a place, load crate into a truck with a hoist at a place, unload crate from a truck with a hoist at a place.",
            "Action constraints summary: truck drive requires truck at origin; after drive truck is at destination and not at origin; lift requires hoist and crate at same place, hoist available, crate clear; after lift crate is held by hoist, hoist unavailable, surface becomes clear, crate not on surface, crate not at place; drop requires hoist at place with surface and surface clear and hoist holding crate; after drop hoist becomes available, hoist not holding crate, crate at place, surface not clear, crate is clear, crate on surface; load requires hoist at place, truck at same place, hoist holding crate; unload requires hoist at same place as truck, hoist available, crate in truck; after unload crate not in truck, hoist unavailable, hoist holding crate.",
            "Initial facts: crate0 is at distributor0.",
            "Initial facts: crate1 is at depot1.",
            "Initial facts: crate2 is at distributor0.",
            "Initial facts: hoist0 is at depot0.",
            "Initial facts: hoist1 is at depot1.",
            "Initial facts: hoist2 is at depot2.",
            "Initial facts: hoist3 is at distributor0.",
            "Initial facts: pallet0 is at depot0.",
            "Initial facts: pallet1 is at depot1.",
            "Initial facts: pallet2 is at depot2.",
            "Initial facts: pallet3 is at distributor0.",
            "Initial facts: truck0 is at depot0.",
            "Initial facts: truck1 is at depot0.",
            "Initial facts: truck2 is at depot2.",
            "Initial facts: hoist0 is available.",
            "Initial facts: hoist1 is available.",
            "Initial facts: hoist2 is available.",
            "Initial facts: hoist3 is available.",
            "Initial facts: crate1 is clear.",
            "Initial facts: crate2 is clear.",
            "Initial facts: pallet0 is clear.",
            "Initial facts: pallet2 is clear.",
            "Initial facts: crate0 is on pallet3.",
            "Initial facts: crate1 is on pallet1.",
            "Initial facts: crate2 is on crate0.",
            "Goal facts: crate0 is on pallet2.",
            "Goal facts: crate1 is on pallet0.",
            "Goal facts: crate2 is on crate1."
        ]
    },
    "workflow": {
        "driver": {
            "analyze": {
                "input": [],
                "output": "spec_driver",
                "system_prompt": "You are an expert in modeling vehicle movement and logistics constraints. Provide a precise specification of the drive action and the relevant domain types and object roles. Enumerate preconditions and effects for driving and list any derived predicates or invariants that the orchestrator should be aware of. Do not produce PDDL. Focus on correctness of causal links and resource usage.",
                "prompt": "Your name is driver. You see these public facts: {environment->public_information} You have these private facts: {agents->driver->private_information} The global goal is: {agents->driver->goal} Analyze and produce a clear formal description of drive actions, types, relevant objects and expected effects, and any assumptions you require. Do not emit PDDL."
            }
        },
        "hoist_operator": {
            "analyze_hoist": {
                "input": [],
                "output": "spec_hoist_operator",
                "system_prompt": "You are an expert in modeling manipulator/hoist operations. Produce detailed, unambiguous action schemas for lift, drop, load and unload operations including complete preconditions and effects. Highlight resource constraints such as hoist availability and object clearance. Do not produce PDDL.",
                "prompt": "Your name is hoist_operator. You see these public facts: {environment->public_information} You have these private facts: {agents->hoist_operator->private_information} The global goal is: {agents->hoist_operator->goal} Provide precise action schemas for hoist operations, enumerate required predicates, and point out any dependencies with truck locations and surfaces. Do not emit PDDL."
            }
        },
        "planner": {
            "plan": {
                "input": [],
                "output": "plan_planner",
                "system_prompt": "You are an expert logistics planner. Produce a high-level stepwise plan that assigns crates to hoists and trucks, sequences drives and hoist operations to achieve the goal. Provide contingencies and potential parallelisms. Do not produce PDDL.",
                "prompt": "Your name is planner. You see these public facts: {environment->public_information} You have these private facts: {agents->planner->private_information} The global goal is: {agents->planner->goal} Produce a high-level plan that can be translated to PDDL actions, indicating allocation of hoists and trucks, orderings, and which operations must precede others. Do not emit PDDL."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "spec_driver",
                    "spec_hoist_operator",
                    "plan_planner"
                ],
                "output": "audit_auditor",
                "system_prompt": "You are an auditor of temporal and causal consistency. Your task is to examine the provided specifications and high-level plan, remove any bookkeeping shortcuts (such as quota tokens, ad-hoc availability counters that are not justified by action effects) and produce corrected and complete action schemas that capture true causal dependencies. Explicitly state any assumptions you resolve, unify names, and produce corrected preconditions and effects. Do not produce PDDL.",
                "prompt": "Your name is auditor. You will receive specifications and a plan from other agents: {spec_driver}, {spec_hoist_operator}, {plan_planner} Also consider the public facts: {environment->public_information} and your private facts: {agents->auditor->private_information} Your goal: {agents->auditor->goal} Produce a clear audited set of action schemas and notes about removed bookkeeping shortcuts and any unifications or corrections. Do not emit PDDL."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "spec_driver",
                    "spec_hoist_operator",
                    "plan_planner",
                    "audit_auditor"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert with multi-agent PDDL problems targeted to the FastDownwards planner. Integrate the component specifications and audited schemas provided by other agents and produce a single PDDL domain and PDDL problem file. Enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags. Keep actions from different agents distinct by prefixing action names with agent identifiers (for example driver-drive, hoist-lift). Ensure the domain is compatible with FastDownwards (strip unnecessary bookkeeping constructs), and include type declarations, predicates, objects and initial state reflecting the environment public information and the audited schemas.",
                "prompt": "You are orchestrator. Inputs: {spec_driver}, {spec_hoist_operator}, {plan_planner}, {audit_auditor} Global goal: {agents->orchestrator->goal} Integrate the inputs, resolve naming mismatches, preserve distinct agent actions, and produce a PDDL domain and problem suitable for FastDownwards. Enclose the domain in <domain></domain> and the problem in <problem></problem>."
            }
        },
        "constraints": [
            "driver.analyze->orchestrator.pddl",
            "hoist_operator.analyze_hoist->orchestrator.pddl",
            "planner.plan->orchestrator.pddl",
            "auditor.audit->orchestrator.pddl"
        ]
    }
}