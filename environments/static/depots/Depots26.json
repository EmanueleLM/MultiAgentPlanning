{
    "name": "Depots26",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "hoist_operator",
            "truck_operator",
            "auditor",
            "orchestrator"
        ],
        "hoist_operator": {
            "private_information": [
                "I operate and understand hoist equipment and its local constraints.",
                "I can observe hoist locations, availability, and crate/surface relationships at places."
            ],
            "goal": "Produce a precise, structured (non-PDDL) specification of hoist-related actions (lift, drop, load, unload) with clear preconditions and effects."
        },
        "truck_operator": {
            "private_information": [
                "I operate trucks and understand driving constraints between places.",
                "I can observe truck locations and how load/unload interacts with trucks at places."
            ],
            "goal": "Produce a precise, structured (non-PDDL) specification of the drive action and its interactions with loading/unloading."
        },
        "auditor": {
            "private_information": [
                "I audit temporal and causal consistency and remove bookkeeping shortcuts (e.g., quota tokens, implicit penalties).",
                "I ensure action specifications are conservative and explicit about resources and state changes."
            ],
            "goal": "Audit the hoist and truck specifications for causal/temporal consistency, eliminate implicit bookkeeping shortcuts, and produce an explicit, corrected specification."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate the agents' structured specifications and the environment description to produce a complete PDDL domain and problem for the FastDownward planner. Keep agent actions distinct."
        }
    },
    "environment": {
        "init": {
            "places": [
                "depot0",
                "depot1",
                "depot2",
                "distributor0"
            ],
            "pallets": [
                "pallet0",
                "pallet1",
                "pallet2",
                "pallet3"
            ],
            "crates": [
                "crate0",
                "crate1",
                "crate2"
            ],
            "trucks": [
                "truck0",
                "truck1",
                "truck2"
            ],
            "hoists": [
                "hoist0",
                "hoist1",
                "hoist2",
                "hoist3"
            ],
            "initial_facts": [
                "crate0 at depot0",
                "crate1 at depot1",
                "crate2 at distributor0",
                "hoist0 at depot0",
                "hoist1 at depot1",
                "hoist2 at depot2",
                "hoist3 at distributor0",
                "pallet0 at depot0",
                "pallet1 at depot1",
                "pallet2 at depot2",
                "pallet3 at distributor0",
                "truck0 at depot0",
                "truck1 at depot1",
                "truck2 at depot0",
                "hoist0 available",
                "hoist1 available",
                "hoist2 available",
                "hoist3 available",
                "crate0 clear",
                "crate1 clear",
                "crate2 clear",
                "pallet2 clear",
                "crate0 on pallet0",
                "crate1 on pallet1",
                "crate2 on pallet3"
            ],
            "goal_facts": [
                "crate0 on pallet2",
                "crate1 on pallet3",
                "crate2 on pallet1"
            ],
            "grid_size": 4,
            "visibility": 1
        },
        "public_information": [
            "Domain: transport crates between depots and distributors using trucks and hoists.",
            "Places are of types: depot or distributor.",
            "Surfaces are of types: pallet or crate (a crate can act as a surface for stacking).",
            "Trucks can drive between any two places by roads (complete connectivity among places).",
            "Hoists operate at places and can lift, drop, load, and unload crates.",
            "Important actions: drive-truck, hoist-lift, hoist-drop, hoist-load-onto-truck, hoist-unload-from-truck.",
            "Key restrictions summarized:\n- Drive: truck must be at origin; after driving, truck is at destination and no longer at origin.\n- Hoist lift: hoist and crate must be co-located, hoist available, crate clear; after lift, hoist holds crate, hoist not available, crate not on surface, surface becomes clear.\n- Hoist drop: hoist and surface co-located, surface clear, hoist holding crate; after drop, crate on surface, surface not clear, crate clear, hoist available, hoist not holding crate.\n- Hoist load onto truck: hoist and truck co-located, hoist holding crate; after load, crate is in truck, hoist available, hoist not holding crate.\n- Hoist unload from truck: hoist and truck co-located, hoist available, crate in truck; after unload, crate not in truck, hoist holds crate, hoist not available.",
            "Initial state and goal are provided in environment.init.initial_facts and environment.init.goal_facts."
        ]
    },
    "workflow": {
        "hoist_operator": {
            "report": {
                "input": [],
                "output": "hoist_report",
                "system_prompt": "You are an expert on hoist operations. Provide detailed, structured (non-PDDL) specifications for the following hoist actions: lift, drop, load-onto-truck, unload-from-truck. Use explicit lists of preconditions and effects, and specify which predicates represent resources or exclusivity (e.g., hoist availability, crate clear). Do not emit PDDL. Be precise and machine-friendly (JSON-like text is fine).",
                "prompt": "Your name is hoist_operator. You have access to the public domain description:\n{environment->public_information}\nYou have the following local knowledge:\n{agents->hoist_operator->private_information}\nYour task is to output a structured specification (not PDDL) describing for each hoist action:\n- action name\n- parameters and their types\n- preconditions (explicit predicates)\n- effects (explicit predicates to add and delete)\n- any concurrency or resource constraints (e.g., hoist becomes unavailable when lifting)\nReturn the specification as clear JSON-like text that can be consumed by an orchestrator."
            }
        },
        "truck_operator": {
            "report": {
                "input": [],
                "output": "truck_report",
                "system_prompt": "You are an expert on truck logistics. Provide a detailed, structured (non-PDDL) specification of the drive action and its interactions with loading/unloading. Specify preconditions, effects, and any side conditions concerning co-location and object containment.",
                "prompt": "Your name is truck_operator. You have access to the public domain description:\n{environment->public_information}\nYou have the following local knowledge:\n{agents->truck_operator->private_information}\nYour task is to output a structured specification (not PDDL) describing the drive action:\n- action name\n- parameters and their types\n- preconditions and effects\n- how driving affects the 'at' predicate for trucks\n- any constraints relevant to loading/unloading (truck must be co-located with hoist and hoist must be in correct state)\nReturn the specification in clear JSON-like text for the orchestrator."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "hoist_report",
                    "truck_report"
                ],
                "output": "audit_report",
                "system_prompt": "You are an auditor specializing in temporal and causal consistency. Your job is to examine provided action specifications and remove bookkeeping shortcuts or implicit assumptions. Ensure resources and mutual exclusion are explicit and conservative so that a planner cannot rely on post-hoc penalties or hidden tokens.",
                "prompt": "Your name is auditor. You will receive structured specifications from hoist_operator and truck_operator:\n{hoist_report}\n{truck_report}\nYour task:\n- Identify any implicit bookkeeping shortcuts (e.g., implicit resource tokens, post-hoc penalties, hidden conditions).\n- Make explicit any resource constraints (hoist availability, truck occupancy, crate clearance) and temporal orderings needed to avoid causal cycles or unrealistic shortcuts.\n- Propose corrected preconditions/effects or additional predicates to represent resources explicitly.\nReturn a corrected, consolidated specification (JSON-like) highlighting changes you made and why."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "hoist_report",
                    "truck_report",
                    "audit_report"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in multi-agent planning and PDDL authoring for the FastDownward planner. Your job is to integrate the agents' structured (non-PDDL) specifications and the audited corrections to produce a complete, correct PDDL domain and PDDL problem that FastDownward can consume. You must keep hoist and truck actions distinct and preserve resource constraints introduced by the auditor. Enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags. Target FastDownward by including appropriate :requirements and typing.",
                "prompt": "You are the orchestrator. Integrate these pieces into a final PDDL domain and problem for FastDownward.\nPublic domain info:\n{environment->public_information}\nInitial facts:\n{environment->init->initial_facts}\nGoal facts:\n{environment->init->goal_facts}\nAgent reports and audit:\n{hoist_report}\n{truck_report}\n{audit_report}\nRequirements:\n- Keep agent actions distinct (hoist actions prefixed with hoist-, truck actions prefixed with drive- or truck-).\n- Include types for places, pallets, crates, trucks, hoists, and surfaces as needed.\n- Make resource predicates explicit (e.g., (available hoist), (in-truck crate truck), (clear surface)).\n- Ensure all preconditions and effects reflect the audited corrections, avoiding implicit bookkeeping shortcuts.\n- Produce a PDDL domain and a PDDL problem that represent the initial state and the stated goals. The domain and problem must be compatible with FastDownward.\nOutput instructions:\n- Enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags.\n- Ensure types, predicates, actions, :requirements, and initial/goal sections are complete and consistent."
            }
        },
        "constraints": [
            "hoist_operator.report->auditor.audit",
            "truck_operator.report->auditor.audit",
            "hoist_operator.report->orchestrator.pddl",
            "truck_operator.report->orchestrator.pddl",
            "auditor.audit->orchestrator.pddl"
        ]
    }
}