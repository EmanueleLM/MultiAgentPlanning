{
    "name": "Depots3",
    "author": "Human",
    "agents": {
        "number": 5,
        "names": [
            "depot_planner",
            "hoist_operator",
            "truck_driver",
            "auditor",
            "orchestrator"
        ],
        "depot_planner": {
            "private_information": [
                "A depot is a type of place labeled depot0, depot1, depot2",
                "A distributor is a type of place labeled distributor0",
                "Depots and distributors are connected by bidirectional roads and trucks can drive between any two places",
                "Initial crate locations: crate0 at depot2, crate2 at depot1, crate1 at distributor0",
                "Pallets are surfaces located at places: pallet0 at depot0, pallet1 at depot1, pallet2 at depot2, pallet3 at distributor0"
            ],
            "goal": "Achieve crate0 on pallet0 and crate1 on pallet1 and crate2 on pallet3"
        },
        "hoist_operator": {
            "private_information": [
                "Hoists are entities hoist0 hoist1 hoist2 hoist3 located initially at hoist0 at depot0, hoist1 at depot1, hoist2 at depot2, hoist3 at distributor0",
                "Hoists can lift crates from surfaces, drop crates to surfaces, load crates into trucks, and unload crates from trucks",
                "Hoist availability initial state: hoist0 available, hoist1 available, hoist2 available, hoist3 available",
                "Action preconditions and effects include spatial co-location, availability toggles, making surfaces clear or not clear, and crate on-surface and in-truck predicates"
            ],
            "goal": "Provide precise causal preconditions and conditional effects needed to move crates using hoists so the global goal can be realized"
        },
        "truck_driver": {
            "private_information": [
                "Trucks are truck0 truck1 truck2 and are initially at truck0 at depot1, truck1 at depot1, truck2 at depot1",
                "Trucks can be driven between any two places if the truck is at the origin; after driving the truck is at the destination",
                "Loading a crate into a truck requires both hoist and truck at same place and hoist lifting the crate; unloading similarly requires hoist and truck co-location and hoist availability"
            ],
            "goal": "Provide constraints and necessary sequencing for truck movements that allow crates to be delivered to target pallets without violating causal constraints"
        },
        "auditor": {
            "private_information": [
                "You verify temporal and causal consistency across plan fragments and remove bookkeeping shortcuts such as implicit quota tokens or post-hoc penalties",
                "You must flag any action schema that uses shortcuts like instantaneous teleportation, hidden counters, or implicit resource creation",
                "You should produce corrections or refinements that make the fragment executable under standard STRIPS-like assumptions and explicit resource/availability predicates"
            ],
            "goal": "Audit and correct plan fragments to ensure temporal and causal consistency and provide an annotated set of required predicates and invariants for the orchestrator"
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate analyses and produce a single PDDL domain and PDDL problem file suitable for the FastDownwards solver that achieves crate0 on pallet0 and crate1 on pallet1 and crate2 on pallet3"
        }
    },
    "environment": {
        "init": {
            "places": 4,
            "surfaces": 4,
            "crates": 3,
            "trucks": 3,
            "hoists": 4
        },
        "public_information": [
            "There are places: depot0 depot1 depot2 distributor0",
            "There are surfaces: pallet0 pallet1 pallet2 pallet3 and surfaces are located at respective places",
            "There are crates: crate0 crate1 crate2",
            "There are trucks: truck0 truck1 truck2 and trucks can drive between any two places",
            "There are hoists: hoist0 hoist1 hoist2 hoist3 used to lift, drop, load, and unload crates",
            "Action types available: drive(truck, from, to), hoist-lift(hoist, crate, surface, place), hoist-drop(hoist, crate, surface, place), hoist-load(hoist, crate, truck, place), hoist-unload(hoist, crate, truck, place)",
            "Action constraints summary: drive requires truck at origin and results in truck at destination; lift requires hoist co-located with crate and available and crate clear and results in crate lifted, hoist not available, and surface clear; drop requires hoist and surface co-located and surface clear and hoist lifting crate and results in crate on surface, surface not clear, hoist becomes available; load requires hoist and truck co-located and hoist lifting crate and results in crate in truck and hoist not available or depending on modeled effect; unload requires hoist co-located with truck and hoist available and crate in truck and results in crate lifted by hoist and hoist not available and crate removed from truck",
            "Initial facts: crate0 at depot2, crate1 at distributor0, crate2 at depot1",
            "Initial memberships: pallet0 at depot0, pallet1 at depot1, pallet2 at depot2, pallet3 at distributor0",
            "Initial hoist locations and availability: hoist0 at depot0 available, hoist1 at depot1 available, hoist2 at depot2 available, hoist3 at distributor0 available",
            "Initial crate clear flags and placements on surfaces: crate0 clear and crate0 on pallet2, crate1 clear and crate1 on pallet3, crate2 clear and crate2 on pallet1",
            "Initial truck positions: truck0 at depot1, truck1 at depot1, truck2 at depot1",
            "Global goal: crate0 on pallet0 and crate1 on pallet1 and crate2 on pallet3"
        ]
    },
    "workflow": {
        "depot_planner": {
            "analysis": {
                "input": [],
                "output": "analysis_depot_planner",
                "system_prompt": "You are an expert in logistics planning and domain modeling who extracts object lists, place locations, and high-level move requirements.",
                "prompt": "Your name is depot_planner. Use the public information {environment->public_information} and your private knowledge {agents->depot_planner->private_information}. Produce a concise list of domain objects, initial location predicates, target predicates, and high-level constraints about places and surfaces that the orchestrator can use. Do not emit PDDL domain or problem files. Emphasize spatial relationships and final placement requirements."
            }
        },
        "hoist_operator": {
            "analysis": {
                "input": [],
                "output": "analysis_hoist_operator",
                "system_prompt": "You are an expert on manipulation and lifting operations who specifies precise action preconditions, conditional effects, and required predicates for hoist operations.",
                "prompt": "Your name is hoist_operator. Use the public information {environment->public_information} and your private knowledge {agents->hoist_operator->private_information}. Provide detailed action schemata in structured form for lift, drop, load, and unload operations listing preconditions, add effects, and delete effects, and any invariants needed for correctness. Do not produce a full PDDL domain or problem; instead produce formalized fragments that the orchestrator can translate."
            }
        },
        "truck_driver": {
            "analysis": {
                "input": [],
                "output": "analysis_truck_driver",
                "system_prompt": "You are an expert on vehicle routing and sequencing who enumerates feasible drive actions and sequencing constraints between drives and hoist operations.",
                "prompt": "Your name is truck_driver. Use the public information {environment->public_information} and your private knowledge {agents->truck_driver->private_information}. Provide a structured description of drive actions including preconditions and effects, and indicate sequencing constraints relative to hoist operations needed to move crates between places. Do not output PDDL domain or problem files."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "analysis_depot_planner",
                    "analysis_hoist_operator",
                    "analysis_truck_driver"
                ],
                "output": "audit_report",
                "system_prompt": "You are an auditor that enforces temporal and causal consistency and removes informal bookkeeping shortcuts. You produce corrected predicates and flagged issues that must be resolved before formalizing into PDDL.",
                "prompt": "Your name is auditor. Receive the agents' analyses {analysis_depot_planner} {analysis_hoist_operator} {analysis_truck_driver} and your private knowledge {agents->auditor->private_information}. Identify any causal inconsistencies, implicit resource shortcuts, or missing predicates such as explicit hoist lifting state, truck occupancy predicates, or surface clearance invariants. Produce an audit report that corrects these issues and provides a normalized set of predicates and constraints for the orchestrator. Do not produce PDDL domain or problem files."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "analysis_depot_planner",
                    "analysis_hoist_operator",
                    "analysis_truck_driver",
                    "audit_report"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in multi-agent PDDL modeling and in producing PDDL compatible with the FastDownwards solver. Integrate input fragments and the auditor corrections into a single coherent PDDL domain and a PDDL problem file. Keep agent actions distinct when appropriate.",
                "prompt": "You are the orchestrator. Integrate the provided analyses {analysis_depot_planner} {analysis_hoist_operator} {analysis_truck_driver} and the auditor report {audit_report} to produce a complete PDDL domain and a PDDL problem targeting the FastDownwards solver. The domain must include clear action schemas for drive, hoist-lift, hoist-drop, hoist-load, and hoist-unload with explicit preconditions and effects, define types for places surfaces trucks hoists and crates, and include all initial facts from the public information. Ensure there are no informal shortcuts and that resource availability and co-location are modeled explicitly. Enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "depot_planner.analysis->orchestrator.pddl",
            "hoist_operator.analysis->orchestrator.pddl",
            "truck_driver.analysis->orchestrator.pddl",
            "auditor.audit->orchestrator.pddl"
        ]
    }
}