{
    "name": "Depots3",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "LogisticsPlanner",
            "Auditor",
            "orchestrator"
        ],
        "LogisticsPlanner": {
            "private_information": [
                "The task involves moving crates between depots and distributors using trucks and hoists.",
                "Initial Locations: crate0 at depot2, crate1 at distributor0, crate2 at depot1. Hoists and pallets are spread across all four places. Trucks are all at depot1.",
                "Initial placement: crate0 is on pallet2 (pallet2 not clear), crate1 is on pallet3 (pallet3 not clear), crate2 is on pallet1 (pallet1 not clear). crate0, crate1, crate2, and pallet0 are clear."
            ],
            "goal": "Solve the logistics problem: crate0 must be on pallet0, crate1 must be on pallet1, and crate2 must be on pallet3."
        },
        "Auditor": {
            "private_information": [],
            "goal": "Verify the PDDL plan generated by the LogisticsPlanner adheres strictly to the constraints and causal dependencies described for all actions (Drive, Lift, Drop, Load, Unload)."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Present the final, verified PDDL domain and problem specification for solving the logistics task using the FastDownwards planner."
        }
    },
    "environment": {
        "init": {
            "places": [
                "depot0",
                "depot1",
                "depot2",
                "distributor0"
            ],
            "trucks": [
                "truck0",
                "truck1",
                "truck2"
            ],
            "hoists": [
                "hoist0",
                "hoist1",
                "hoist2",
                "hoist3"
            ],
            "crates": [
                "crate0",
                "crate1",
                "crate2"
            ],
            "pallets": [
                "pallet0",
                "pallet1",
                "pallet2",
                "pallet3"
            ]
        },
        "public_information": [
            "PDDL Types: (place), (surface), (truck), (hoist), (crate). (depot) and (distributor) are subtypes of (place). (pallet) and (crate) are subtypes of (surface).",
            "Connectivity: All Places (Depots/Distributors) are directly connected via roads, allowing trucks to drive between any two places.",
            "Key PDDL Predicates: (at ?obj ?place), (on ?crate ?surface), (in ?crate ?truck), (clear ?surface), (available ?hoist), (lifting ?hoist ?crate).",
            "Action Drive constraints: Truck must be at origin. Effect: Not at origin, At destination.",
            "Action Lift constraints: Hoist and crate at same place, hoist available, crate clear. Effect: Crate not at place, Hoist lifting crate, Hoist not available, Surface clear, Crate not on surface.",
            "Action Drop constraints: Hoist and surface at same place, surface clear, hoist lifting crate. Effect: Hoist available, Not lifting crate, Crate at place, Surface not clear, Crate clear, Crate on surface.",
            "Action Load constraints: Hoist and truck at same place, hoist lifting crate. Effect: Crate is in truck, Hoist available, Not lifting crate.",
            "Action Unload constraints: Hoist and truck at same place, hoist available, crate in truck. Effect: Crate not in truck, Hoist not available, Hoist lifting crate."
        ]
    },
    "workflow": {
        "LogisticsPlanner": {
            "pddl": {
                "input": [],
                "output": "pddl_logistics_plan",
                "system_prompt": "You are an expert with PDDL problems (Planning Domain Definition Language). You must define a domain and a problem file that accurately models the complex logistics scenario described, ensuring all preconditions and effects match the constraints precisely. You must always provide a PDDL domain and a PDDL problem file to solve the task. You always enclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags.",
                "prompt": "You are the LogisticsPlanner. Define the objects, initial state, goal state, and actions necessary to achieve the global goal based on the following environment and initial conditions.\nEnvironment Public Information:\n{environment->public_information}\nAgent Private Information:\n{agents->LogisticsPlanner->private_information}\nGlobal Goal:\n{agents->LogisticsPlanner->goal}\n\nThink step by step and provide a complete PDDL domain and a PDDL problem file to solve this multi-step logistics task. Ensure the domain covers actions like Drive, Lift, Drop, Load, and Unload with their specific restrictions."
            }
        },
        "Auditor": {
            "review": {
                "input": [
                    "pddl_logistics_plan"
                ],
                "output": "audit_review",
                "system_prompt": "You are a Temporal and Causal Consistency Auditor. Your task is to verify complex PDDL planning structures. You must focus on checking if the preconditions and effects defined in the PDDL domain strictly adhere to the causal constraints described in the problem statement, specifically ensuring no bookkeeping shortcuts are present and temporal dependencies are sound.",
                "prompt": "Review the provided PDDL domain and problem specification for the logistics task, focusing heavily on the action definitions (Drive, Lift, Drop, Load, Unload). Check for causal consistency against the public constraints listed below. Provide a summary of your findings and confirm if the PDDL is suitable for execution.\nPublic Constraints:\n{environment->public_information}\n\nPDDL received:\n{pddl_logistics_plan}\n\nOutput a short statement indicating acceptance or rejection and why."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "pddl_logistics_plan",
                    "audit_review"
                ],
                "output": "final_pddl_solution",
                "system_prompt": "You are the Orchestrator, specializing in compiling and presenting verified PDDL solutions suitable for the FastDownwards planner. You must ensure the final output is robust, correctly formatted, and includes both the domain and the problem file.",
                "prompt": "You have received the PDDL plan draft and an audit review. Based on the input, present the final PDDL Domain and Problem files required to solve the logistics task. Ensure the format is strictly adhered to for a PDDL solver.\nAudit Review:\n{audit_review}\n\nPDDL Draft:\n{pddl_logistics_plan}\n\nEnclose the final PDDL domain between <domain></domain> tags, and the PDDL problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "LogisticsPlanner.pddl->Auditor.review",
            "LogisticsPlanner.pddl->orchestrator.pddl",
            "Auditor.review->orchestrator.pddl"
        ]
    }
}