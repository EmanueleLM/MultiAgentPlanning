{
    "name": "Depots4",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "LogisticsPlanner",
            "Auditor",
            "orchestrator"
        ],
        "LogisticsPlanner": {
            "private_information": [
                "Depot and Distributor are subtypes of Place.",
                "Pallet and Crate are subtypes of Surface (something can be placed on them).",
                "Initial State: crate0 is on pallet0, crate1 is on crate0, crate2 is on pallet1. Locations: crate0, crate1, pallet0, hoist0 are at depot0. crate2, pallet1, truck1, hoist1 are at depot1. truck0, truck2, pallet2, hoist2 are at depot2. pallet3, hoist3 are at distributor0. All hoists are available. The following surfaces are clear: crate1, crate2, pallet2, pallet3.",
                "Goal State: crate0 is on pallet1, crate1 is on crate0, and crate2 is on pallet0."
            ],
            "goal": "Generate a comprehensive PDDL domain and problem specification to achieve the required crate movement goals."
        },
        "Auditor": {
            "private_information": [
                "The task involves complex logistics planning across multiple locations using hoists and trucks, requiring careful sequence of loading, unloading, stacking, and driving actions."
            ],
            "goal": "Audit the complexity of the generated PDDL and identify any obvious resource conflicts or logical inconsistencies in the setup before final compilation."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate the PDDL plan and the audit report to finalize the solvable PDDL domain and problem file."
        }
    },
    "environment": {
        "init": {
            "grid_size": 1,
            "visibility": 4
        },
        "public_information": [
            "The environment involves moving crates between Depots and Distributors.",
            "Movement is handled by Trucks driving along roads between any two Places.",
            "Loading and unloading operations are handled by Hoists.",
            "Places include Depots and Distributors.",
            "Surfaces include Pallets and Crates (used for stacking)."
        ]
    },
    "workflow": {
        "LogisticsPlanner": {
            "pddl": {
                "input": [],
                "output": "pddl_logistics_plan",
                "system_prompt": "You are an expert with PDDL problems (Planning Domain Definition Language). You always provide a PDDL domain and a PDDL problem file to solve the task. You always enclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags.",
                "prompt": "Your task is to model a complex logistics planning problem involving movement of crates using hoists and trucks. Use the provided information about initial state, goal state, types, and actions to create a complete PDDL domain and problem file.\n\nGlobal Goal:\n{agents->LogisticsPlanner->goal}\n\nYou have the following knowledge:\n{agents->LogisticsPlanner->private_information}\n\nRequired actions to model: Drive, Lift, Drop, Load, Unload.\n\nThink step by step, define the object types, predicates, and actions necessary for the logistics operations, and then provide the PDDL solution.\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "Auditor": {
            "text": {
                "input": [
                    "pddl_logistics_plan"
                ],
                "output": "audit_report",
                "system_prompt": "You are a logistics auditor specialized in analyzing PDDL structure. Your role is to ensure that the domain supports the necessary actions and that the problem instance is consistent. You must audit temporal and causal consistency.",
                "prompt": "Analyze the following PDDL response generated by the LogisticsPlanner:\n{pddl_logistics_plan}\n\nBased on the logistics description (transporting crates using hoists and trucks, handling stacks), evaluate:\n1. Does the PDDL domain appear to correctly capture the five required actions (Drive, Lift, Drop, Load, Unload) including all complex preconditions and effects specified in the task description?\n2. Does the PDDL problem correctly encode the complex initial state, especially regarding the derived states (e.g., clarity of stacked items)?\n3. Are there any inherent resource conflicts or logical inconsistencies in the setup that might prevent achieving the goal state?\nProvide a brief audit report, focusing on consistency and feasibility."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "pddl_logistics_plan",
                    "audit_report"
                ],
                "output": "pddl_final_solution",
                "system_prompt": "You are an expert with PDDL problems (Planning Domain Definition Language). You finalize and validate PDDL outputs, ensuring the combined solution is syntactically correct and solvable by FastDownwards. You always provide a PDDL domain and a PDDL problem file to solve the task. You always enclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags.",
                "prompt": "You have received the initial PDDL plan and an audit report. Finalize the PDDL domain and problem to ensure they are complete and solvable by FastDownwards.\n\nPDDL Plan:\n{pddl_logistics_plan}\n\nAudit Report:\n{audit_report}\n\nIf the audit report highlights minor inconsistencies or potential errors, correct the PDDL accordingly. If the audit suggests major issues, describe how you would adapt the domain/problem to achieve a solvable state. Provide the final, integrated PDDL domain and problem.\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "LogisticsPlanner.pddl->Auditor.text",
            "LogisticsPlanner.pddl->orchestrator.pddl",
            "Auditor.text->orchestrator.pddl"
        ]
    }
}