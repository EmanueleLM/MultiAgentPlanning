{
    "name": "ChildsnackExample0",
    "author": "Expert Planner",
    "agents": {
        "number": 3,
        "names": [
            "domain_expert",
            "problem_expert",
            "orchestrator"
        ],
        "domain_expert": {
            "private_information": [
                "The task is the Child-Snack planning problem.",
                "I am responsible for defining the PDDL domain structure (predicates and action definitions) based on the behavioral description."
            ],
            "goal": "Generate a complete and correct PDDL domain definition based on the natural language description provided."
        },
        "problem_expert": {
            "private_information": [
                "The task is the Child-Snack planning problem.",
                "I am responsible for instantiating the PDDL problem (objects, initial state, goal state) based on the natural language description. I must correct any discrepancies in the provided template."
            ],
            "goal": "Generate a complete and correct PDDL problem definition based on the natural language description provided."
        },
        "orchestrator": {
            "private_information": [
                "I ensure temporal and causal consistency between the generated domain and problem definitions.",
                "I compile the final runnable PDDL files suitable for FastDownwards."
            ],
            "goal": "Combine the domain and problem artifacts to create the final PDDL environment specification for the child-snack task."
        }
    },
    "environment": {
        "init": {
            "grid_size": 0,
            "visibility": 0
        },
        "public_information": [
            "You are solving the Child-Snack PDDL planning problem.",
            "The overall goal is to serve six children using two trays, ensuring that allergic children receive gluten-free sandwiches."
        ]
    },
    "workflow": {
        "domain_expert": {
            "pddl_domain": {
                "input": [],
                "output": "pddl_domain_partial",
                "system_prompt": "You are an expert in PDDL Domain Definition Language. You must complete the provided PDDL domain template by defining all necessary predicates and completing the action definitions (preconditions and effects) exactly matching the behavior described in the natural language domain description. Ensure strict PDDL syntax and declare the `:negative-preconditions` requirement.",
                "prompt": "Here is the natural language description of the domain:\n{domain_nl}\n\nUse the following PDDL domain template. Your response must ONLY contain the completed PDDL domain definition enclosed in <domain></domain> tags.\n\n<domain_template>\n(define (domain child-snack)\n  (:requirements :typing :equality :negative-preconditions)\n  (:types child bread-portion content-portion sandwich tray place)\n  (:constants kitchen - place)\n\n  (:predicates)\n\n  (:action make_sandwich_no_gluten\n    :parameters (?s - sandwich ?b - bread-portion ?c - content-portion)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action make_sandwich\n    :parameters (?s - sandwich ?b - bread-portion ?c - content-portion)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action put_on_tray\n    :parameters (?s - sandwich ?t - tray)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action serve_sandwich_no_gluten\n    :parameters (?s - sandwich ?c - child ?t - tray ?p - place)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action serve_sandwich\n    :parameters (?s - sandwich ?c - child ?t - tray ?p - place)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action move_tray\n    :parameters (?t - tray ?p1 ?p2 - place)\n    :precondition ()\n    :effect ()\n  )\n)\n</domain_template>"
            }
        },
        "problem_expert": {
            "pddl_problem": {
                "input": [],
                "output": "pddl_problem_partial",
                "system_prompt": "You are an expert in PDDL Problem definition. You must verify and complete the PDDL problem template provided, ensuring the objects, initial state (:init), and goal state (:goal) accurately reflect the natural language problem description. Pay special attention to precise initialization details, specifically correcting any children's waiting locations if they conflict with the NL description.",
                "prompt": "Here is the natural language description of the problem:\n{problem_nl}\n\nUse the following PDDL problem template. Note the location for child3 in the template and correct it to match the NL description (child3 is waiting at table3, not table1). Your response must ONLY contain the completed PDDL problem definition enclosed in <problem></problem> tags.\n\n<problem_pddl>\n(define (problem prob-snack)\n  (:domain child-snack)\n  (:objects\n    child1 child2 child3 child4 child5 child6 - child\n    bread1 bread2 bread3 bread4 bread5 bread6 - bread-portion\n    content1 content2 content3 content4 content5 content6 - content-portion\n    tray1 tray2 - tray\n    table1 table2 table3 - place\n    sandw1 sandw2 sandw3 sandw4 sandw5 sandw6 sandw7 sandw8 - sandwich\n  )\n  (:init\n     (at tray1 kitchen)\n     (at tray2 kitchen)\n     (at_kitchen_bread bread1)\n     (at_kitchen_bread bread2)\n     (at_kitchen_bread bread3)\n     (at_kitchen_bread bread4)\n     (at_kitchen_bread bread5)\n     (at_kitchen_bread bread6)\n     (at_kitchen_content content1)\n     (at_kitchen_content content2)\n     (at_kitchen_content content3)\n     (at_kitchen_content content4)\n     (at_kitchen_content content5)\n     (at_kitchen_content content6)\n     (no_gluten_bread bread4)\n     (no_gluten_bread bread1)\n     (no_gluten_content content6)\n     (no_gluten_content content5)\n     (allergic_gluten child3)\n     (allergic_gluten child4)\n     (not_allergic_gluten child1)\n     (not_allergic_gluten child2)\n     (not_allergic_gluten child5)\n     (not_allergic_gluten child6)\n     (waiting child1 table1)\n     (waiting child2 table1)\n     (waiting child3 table1)\n     (waiting child4 table3)\n     (waiting child5 table1)\n     (waiting child6 table3)\n     (notexist sandw1)\n     (notexist sandw2)\n     (notexist sandw3)\n     (notexist sandw4)\n     (notexist sandw5)\n     (notexist sandw6)\n     (notexist sandw7)\n     (notexist sandw8)\n  )\n  (:goal\n    (and\n     (served child1)\n     (served child2)\n     (served child3)\n     (served child4)\n     (served child5)\n     (served child6)\n    )\n  )\n)\n</problem_pddl>"
            }
        },
        "orchestrator": {
            "compiler": {
                "input": [
                    "pddl_domain_partial",
                    "pddl_problem_partial"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are the final validation and compilation expert for PDDL planning environments. You receive partial PDDL domain and problem definitions. Your task is to combine them into the final, complete, and runnable PDDL files (domain and problem) suitable for a standard solver like FastDownwards. Ensure predicates are correctly defined and used consistently across both files. Provide the final PDDL domain enclosed in <domain></domain> tags and the final PDDL problem enclosed in <problem></problem> tags.",
                "prompt": "You have received the following PDDL domain and problem specifications from the experts. You need to combine them and ensure structural and logical consistency, focusing on the correct definition of predicates and initialization values. Review the definitions and confirm that all necessary elements for solving the planning problem are present and correct.\n\nDomain definition:\n{pddl_domain_partial}\n\nProblem definition:\n{pddl_problem_partial}\n\nOutput the final, verified PDDL Domain and PDDL Problem."
            }
        },
        "constraints": [
            "domain_expert.pddl_domain->orchestrator.compiler",
            "problem_expert.pddl_problem->orchestrator.compiler"
        ]
    }
}