{
    "name": "ChildsnackExample4",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "pddl_constructor",
            "auditor",
            "orchestrator"
        ],
        "pddl_constructor": {
            "private_information": [
                "I must complete the PDDL domain template by filling in the predicates, preconditions, and effects for all actions based on the natural language description."
            ],
            "goal": "Generate a complete and syntactically correct PDDL domain and problem definition for the Child-Snack task."
        },
        "auditor": {
            "private_information": [
                "I specialize in verifying PDDL syntax, semantics, and compliance with provided natural language constraints, particularly focusing on temporal and causal logic."
            ],
            "goal": "Verify the PDDL output generated by the constructor and ensure it adheres strictly to the provided natural language descriptions, removing any unnecessary bookkeeping shortcuts."
        },
        "orchestrator": {
            "private_information": [
                "I am responsible for consolidating the final, verified PDDL files."
            ],
            "goal": "Output the final PDDL domain and problem files required to solve the planning task."
        }
    },
    "environment": {
        "init": {
            "grid_size": 1,
            "visibility": 1
        },
        "public_information": [
            "This is a single-agent planning task based on the Child-Snack domain.",
            "The task involves preparing and serving sandwiches, some gluten-free, to children with specific dietary needs."
        ]
    },
    "workflow": {
        "pddl_constructor": {
            "generate": {
                "input": [],
                "output": "drafted_pddl",
                "system_prompt": "You are an expert PDDL (Planning Domain Definition Language) synthesizer. You are provided with natural language descriptions of a domain and problem, along with PDDL templates. Your task is to complete the templates accurately to generate a complete, valid PDDL domain and problem file. You must always enclose the PDDL domain between <domain></domain> tags, and the PDDL problem between <problem></problem> tags.",
                "prompt": "You are tasked with completing a PDDL domain and problem based on the following specifications:\n\n1. Natural Language Domain Description:\n<DOMAIN_NL>\nThe child-snack domain is designed to plan the preparation and serving of sandwiches to children, some of whom have gluten allergies. The domain includes actions for making sandwiches with and without gluten, placing sandwiches on trays, moving trays between places, and serving the sandwiches to the children.\n\nThe actions defined in this domain include:\n\n1. make_sandwich_no_gluten: This action is for making a gluten-free sandwich. The preconditions for this action are that there must be gluten-free bread and gluten-free content available in the kitchen, and the sandwich must not already exist. The effect of this action is that the gluten-free bread and content are no longer available in the kitchen, and a gluten-free sandwich is now available in the kitchen.\n\n2. make_sandwich: This action is for making a regular sandwich that may contain gluten. The preconditions are that there must be bread and content available in the kitchen, and the sandwich must not already exist. The effect of this action is that the bread and content are no longer available in the kitchen, and a sandwich is now available in the kitchen.\n\n3. put_on_tray: This action is for placing a sandwich on a tray. The preconditions are that the sandwich must be in the kitchen and the tray must be at the kitchen. The effect is that the sandwich is no longer in the kitchen and is now on the tray.\n\n4. serve_sandwich_no_gluten: This action is for serving a gluten-free sandwich to a child who is allergic to gluten. The preconditions are that the child is allergic to gluten, waiting at a place, and there is a gluten-free sandwich on a tray at the same place. The effect is that the sandwich is no longer on the tray and the child is served.\n\n5. serve_sandwich: This action is for serving a sandwich to a child who is not allergic to gluten. The preconditions are that the child is not allergic to gluten, waiting at a place, and there is a sandwich on a tray at the same place. The effect is that the sandwich is no longer on the tray and the child is served.\n\n6. move_tray: This action allows a tray to be moved from one place to another. The precondition is that the tray is at the starting place. The effect is that the tray is no longer at the starting place and is now at the destination place.\n</DOMAIN_NL>\n\n2. Natural Language Problem Description:\n<PROBLEM_NL>\nYou are tasked with preparing and serving sandwiches to eight children, some of whom have gluten allergies, using a set of actions that involve making sandwiches, placing them on trays, moving trays, and serving the sandwiches.\n\nInitially:\n- There are two trays, tray1 and tray2, both located in the kitchen.\n- There are eight portions of bread, bread1 through bread8, all in the kitchen.\n- There are eight portions of content, content1 through content8, all in the kitchen.\n- Bread portions bread2, bread5, and bread6 are gluten-free.\n- Content portions content4, content7, and content8 are gluten-free.\n- Child2, child7, and child8 are allergic to gluten.\n- Child1, child3, child4, child5, and child6 are not allergic to gluten.\n- Child1 and child3 are waiting at table3.\n- Child2, child4, child5, and child6 are waiting at table1.\n- Child7 is waiting at table3.\n- Child8 is waiting at table2.\n- There are eleven sandwiches, sandw1 through sandw11, which do not exist yet.\n\nYour goal is to ensure that:\n- All eight children, child1 through child8, are served with a sandwich that they are not allergic to.\n</PROBLEM_NL>\n\n3. PDDL Domain Template:\n<DOMAIN_TEMPLATE>\n(define (domain child-snack)\n  (:requirements :typing :equality)\n  (:types child bread-portion content-portion sandwich tray place)\n  (:constants kitchen - place)\n\n  (:predicates)\n\n  (:action make_sandwich_no_gluten\n    :parameters (?s - sandwich ?b - bread-portion ?c - content-portion)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action make_sandwich\n    :parameters (?s - sandwich ?b - bread-portion ?c - content-portion)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action put_on_tray\n    :parameters (?s - sandwich ?t - tray)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action serve_sandwich_no_gluten\n    :parameters (?s - sandwich ?c - child ?t - tray ?p - place)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action serve_sandwich\n    :parameters (?s - sandwich ?c - child ?t - tray ?p - place)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action move_tray\n    :parameters (?t - tray ?p1 ?p2 - place)\n    :precondition ()\n    :effect ()\n  )\n)\n</DOMAIN_TEMPLATE>\n\n4. PDDL Problem Template:\n<PROBLEM_TEMPLATE>\n; child-snack task with 8 children and 0.4 gluten factor \n; constant factor of 1.3\n; random seed: 101\n\n(define (problem prob-snack)\n  (:domain child-snack)\n  (:objects\n    child1 child2 child3 child4 child5 child6 child7 child8 - child\n    bread1 bread2 bread3 bread4 bread5 bread6 bread7 bread8 - bread-portion\n    content1 content2 content3 content4 content5 content6 content7 content8 - content-portion\n    tray1 tray2 - tray\n    table1 table2 table3 - place\n    sandw1 sandw2 sandw3 sandw4 sandw5 sandw6 sandw7 sandw8 sandw9 sandw10 sandw11 - sandwich\n  )\n  (:init\n     (at tray1 kitchen)\n     (at tray2 kitchen)\n     (at_kitchen_bread bread1)\n     (at_kitchen_bread bread2)\n     (at_kitchen_bread bread3)\n     (at_kitchen_bread bread4)\n     (at_kitchen_bread bread5)\n     (at_kitchen_bread bread6)\n     (at_kitchen_bread bread7)\n     (at_kitchen_bread bread8)\n     (at_kitchen_content content1)\n     (at_kitchen_content content2)\n     (at_kitchen_content content3)\n     (at_kitchen_content content4)\n     (at_kitchen_content content5)\n     (at_kitchen_content content6)\n     (at_kitchen_content content7)\n     (at_kitchen_content content8)\n     (no_gluten_bread bread5)\n     (no_gluten_bread bread2)\n     (no_gluten_bread bread6)\n     (no_gluten_content content8)\n     (no_gluten_content content4)\n     (no_gluten_content content7)\n     (allergic_gluten child8)\n     (allergic_gluten child2)\n     (allergic_gluten child7)\n     (not_allergic_gluten child1)\n     (not_allergic_gluten child3)\n     (not_allergic_gluten child4)\n     (not_allergic_gluten child5)\n     (not_allergic_gluten child6)\n     (waiting child1 table3)\n     (waiting child2 table1)\n     (waiting child3 table3)\n     (waiting child4 table1)\n     (waiting child5 table1)\n     (waiting child6 table1)\n     (waiting child7 table3)\n     (waiting child8 table2)\n     (notexist sandw1)\n     (notexist sandw2)\n     (notexist sandw3)\n     (notexist sandw4)\n     (notexist sandw5)\n     (notexist sandw6)\n     (notexist sandw7)\n     (notexist sandw8)\n     (notexist sandw9)\n     (notexist sandw10)\n     (notexist sandw11)\n  )\n  (:goal\n    (and\n     (served child1)\n     (served child2)\n     (served child3)\n     (served child4)\n     (served child5)\n     (served child6)\n     (served child7)\n     (served child8)\n    )\n  )\n)\n</PROBLEM_TEMPLATE>\n\nThink step by step and output the resulting complete PDDL domain and PDDL problem files.\nEnclose the PDDL domain between <domain></domain> tags, and the PDDL problem between <problem></problem> tags."
            }
        },
        "auditor": {
            "check": {
                "input": [
                    "drafted_pddl"
                ],
                "output": "audited_pddl",
                "system_prompt": "You are an expert PDDL auditor. Your role is to check the generated PDDL domain and problem for logical errors, consistency, and compliance with the original natural language specification. You must remove any unnecessary bookkeeping elements or potential shortcuts. If changes are needed, provide the corrected PDDL domain and problem. You must always enclose the PDDL domain between <domain></domain> tags, and the PDDL problem between <problem></problem> tags.",
                "prompt": "Review the following drafted PDDL domain and problem generated by the constructor. Ensure all actions, predicates, initial states, and goals are correctly implemented according to the Child-Snack domain specification.\n\nDrafted PDDL:\n{drafted_pddl}\n\nVerify and provide the finalized, error-free PDDL domain and problem files.\nEnclose the PDDL domain between <domain></domain> tags, and the PDDL problem between <problem></problem> tags."
            }
        },
        "orchestrator": {
            "finalize": {
                "input": [
                    "audited_pddl"
                ],
                "output": "final_pddl",
                "system_prompt": "You are the orchestrator. You are responsible for taking the final, verified PDDL domain and problem files and presenting them as the solution. You must ensure the output is ready to be parsed by a standard PDDL solver like FastDownwards. You always enclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags.",
                "prompt": "The PDDL files have been constructed and audited. Provide the final set of PDDL domain and problem files.\n\nAudited PDDL:\n{audited_pddl}\n\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "pddl_constructor.generate->auditor.check",
            "auditor.check->orchestrator.finalize"
        ]
    }
}