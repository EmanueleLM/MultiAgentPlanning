{
    "name": "Depots1",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "logistics_planner",
            "auditor",
            "orchestrator"
        ],
        "logistics_planner": {
            "private_information": [],
            "goal": "Generate a valid and efficient PDDL plan (domain and problem) to move crates to their designated final locations using available logistics resources."
        },
        "auditor": {
            "private_information": [],
            "goal": "Review the PDDL produced by the logistics_planner for logical errors, causal consistency, and adherence to the defined action constraints (preconditions and effects)."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate the planning output and audit results to finalize the PDDL domain and problem specification for the FastDownwards solver."
        }
    },
    "environment": {
        "init": {
            "grid_size": 0,
            "visibility": 4
        },
        "public_information": [
            "This is a logistics environment involving crates, hoists, trucks, depots, and distributors.",
            "Types: place (depot, distributor), surface (pallet, crate), truck, hoist.",
            "Objects:",
            "  - Places: depot0, depot1, depot2, distributor0.",
            "  - Surfaces: pallet0, pallet1, pallet2, pallet3, crate0, crate1, crate2.",
            "  - Trucks: truck0, truck1, truck2.",
            "  - Hoists: hoist0, hoist1, hoist2, hoist3.",
            "Initial State:",
            "  - Locations (at): crate0@depot0, crate1@depot0, crate2@depot2.",
            "  - Hoists locations (at): hoist0@depot0, hoist1@depot1, hoist2@depot2, hoist3@distributor0.",
            "  - Pallets locations (at): pallet0@depot0, pallet1@depot1, pallet2@depot2, pallet3@distributor0.",
            "  - Trucks locations (at): truck0@depot0, truck1@depot1, truck2@depot0.",
            "  - Availability/Status:",
            "    - All hoists (0-3) are available.",
            "    - Clear objects: crate1, crate2, pallet1, pallet3.",
            "  - Stacking (on): crate0 is on pallet0, crate1 is on crate0, crate2 is on pallet2.",
            "Goal State:",
            "  - crate0 is on pallet3.",
            "  - crate1 is on pallet0.",
            "  - crate2 is on crate0."
        ]
    },
    "workflow": {
        "logistics_planner": {
            "pddl": {
                "input": [],
                "output": "pddl_initial",
                "system_prompt": "You are an expert PDDL planner for complex logistics problems. Your task is to define the Domain and Problem files based on the provided environment description, focusing on efficient movement and stacking constraints. Ensure the PDDL actions (Drive, Lift, Drop, Load, Unload) strictly follow the specified preconditions and effects.",
                "prompt": "You are the logistics_planner. Analyze the public information detailing the environment, initial state, goal state, and resource constraints. Define the necessary PDDL types, predicates, and actions to solve the task. Note the restrictions on actions:\n- Drive: Truck must be at origin. Effect: Not at origin, at destination.\n- Lift: Hoist and crate at same place. Hoist available, crate clear. Effect: Crate not at place, hoist lifting crate, hoist not available, old surface clear, crate not on surface.\n- Drop: Hoist and surface at place, surface clear, hoist lifting crate. Effect: Hoist available, not lifting crate, crate at place, surface not clear, crate clear, crate on surface.\n- Load: Hoist/Truck at place, hoist lifting crate. Effect: Crate in truck, hoist available, not lifting crate.\n- Unload: Hoist/Truck at place, hoist available, crate in truck. Effect: Crate not in truck, hoist not available, hoist lifting crate.\nEnclose the PDDL domain between <domain></domain> tags, and the PDDL problem between <problem></problem> tags."
            }
        },
        "auditor": {
            "review": {
                "input": [
                    "pddl_initial"
                ],
                "output": "pddl_review",
                "system_prompt": "You are an expert PDDL auditor specialized in logistics planning. Your role is to check the provided PDDL (domain and problem) for logical consistency, ensuring all predicates and effects align strictly with the physical constraints of the environment. Specifically, check that hoisting/loading/driving preconditions and effects are correctly modeled, and that no bookkeeping shortcuts (like dummy time tracking or generic penalties) are used. You must focus solely on temporal and causal validity.",
                "prompt": "Review the following PDDL generated by the logistics_planner:\n{pddl_initial}\nProvide a detailed analysis focusing on whether the planning constraints correctly model the flow of objects and resources. Ensure correct handling of the 'clear' predicate status during lifting/dropping/stacking operations. If you find issues, suggest necessary corrections.\nDo not generate a full PDDL output; provide your critique and suggestions as text."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "pddl_initial",
                    "pddl_review"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are the Orchestrator. You receive the initial PDDL plan and a professional review of its consistency. Your final task is to produce the verified, optimized PDDL domain and problem ready for the FastDownwards planner. Ensure the domain covers all required actions (Drive, Lift, Drop, Load, Unload) with correct preconditions and effects, integrating any necessary corrections identified by the auditor.",
                "prompt": "Here is the initial PDDL plan:\n{pddl_initial}\nHere is the auditor's review and suggested corrections:\n{pddl_review}\nSynthesize this information. Create the final, robust PDDL Domain and PDDL Problem files that accurately model the logistics scenario and achieve the specified goal state. Ensure the plan strictly adheres to the definitions of the actions and constraints provided in the environment specification.\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "logistics_planner.pddl->auditor.review",
            "auditor.review->orchestrator.pddl"
        ]
    }
}