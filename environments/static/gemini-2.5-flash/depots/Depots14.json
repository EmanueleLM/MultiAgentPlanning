{
    "name": "Depots14",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "planner",
            "auditor",
            "orchestrator"
        ],
        "planner": {
            "private_information": [],
            "goal": "Create a PDDL domain and problem file to model the logistics task of moving crates based on the provided initial state and goal."
        },
        "auditor": {
            "private_information": [
                "A truck can be driven from one place to another place only if the truck is at the origin place.",
                "Once a truck has been driven from one place to another, it is not at the origin place and is at the destination place.",
                "A crate can be lifted by a hoist only if the hoist is at the same place as the crate, the hoist is available, and the crate is clear.",
                "Once a crate has been lifted by a hoist from a surface at a place, the crate is not at the place, the hoist is lifting the crate, the hoist is not available, the surface is clear, and the crate is not on the surface.",
                "A crate can be dropped by a hoist to a surface only if the hoist and surface are both at the place, the surface is clear, and the hoist is lifting the crate.",
                "Once a crate has been dropped by a hoist to a surface at a place, the hoist is available, the hoist is not lifting the crate, the crate is at the place, the surface is not clear, the crate is clear, and the crate is on the surface.",
                "A crate can be loaded by a hoist onto a truck at a place only if the hoist is at the same place, the truck is at the same place, and the hoist is lifting the crate.",
                "Once a crate has been loaded by a hoist onto a truck at a place, the hoist is available, the hoist is not lifting the crate, and the crate is in the truck.",
                "A crate can be unloaded by a hoist from a truck at a place only if the hoist is at the same place as the truck, the hoist is available, and the crate is in the truck.",
                "Once a crate has been unloaded by a hoist from a truck at a place, the crate is not in the truck, the hoist is not available, and the hoist is lifting the crate."
            ],
            "goal": "Verify the temporal and causal consistency of the PDDL domain and problem generated by the planner against the specific restrictions provided."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Produce the final, verified PDDL domain and problem file targeted for the FastDownwards solver to solve the defined logistics task."
        }
    },
    "environment": {
        "init": {
            "grid_size": 4,
            "visibility": 1
        },
        "public_information": [
            "The domain involves depots, distributors (places), trucks, hoists, crates, and pallets (surfaces).",
            "Depots and distributors are directly connected by roads.",
            "Initial State: crate0 is at depot2, crate1 is at distributor0, crate2 is at distributor0.",
            "Initial State: hoist0 is at depot0, hoist1 is at depot1, hoist2 is at depot2, hoist3 is at distributor0.",
            "Initial State: pallet0 is at depot0, pallet1 is at depot1, pallet2 is at depot2, pallet3 is at distributor0.",
            "Initial State: truck0 is at distributor0, truck1 is at depot0, truck2 is at depot0.",
            "Initial State: All hoists (hoist0, hoist1, hoist2, hoist3) are available.",
            "Initial State: crate0, crate2, pallet0, pallet1 are clear (no object on top).",
            "Initial State: crate0 is on pallet2, crate1 is on pallet3, and crate2 is on crate1 (stacking).",
            "Goal: crate0 is on pallet0, crate1 is on pallet2, and crate2 is on pallet1."
        ]
    },
    "workflow": {
        "planner": {
            "pddl": {
                "input": [],
                "output": "pddl_draft",
                "system_prompt": "You are an expert with PDDL problems (Planning Domain Definition Language). You always provide a PDDL domain and a PDDL problem file to solve the task. You always enclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags.",
                "prompt": "Your name is planner. You are responsible for modeling the logistics task described. You are in an environment with the following public information:\n{environment->public_information}\nThis is the global goal to solve:\n{agents->planner->goal}\nDefine the necessary object types, predicates, and actions (Drive, Lift, Drop, Load, Unload) based on the implicit connectivity and capabilities described. Think step by step and provide a PDDL domain and a PDDL problem file to solve the task.\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "auditor": {
            "check": {
                "input": [
                    "pddl_draft"
                ],
                "output": "pddl_feedback",
                "system_prompt": "You are an expert auditor specializing in verifying PDDL specifications against detailed constraints. You only output your analysis and suggested revisions enclosed in <feedback></feedback> tags.",
                "prompt": "Your name is auditor. You have received a preliminary PDDL attempt. Your task is to verify its accuracy against the detailed operational restrictions you possess:\n{agents->auditor->private_information}\nReview the following PDDL draft:\n{pddl_draft}\nFocus specifically on whether the preconditions and effects of the PDDL actions correctly enforce all logistical constraints described in your private knowledge (e.g., clearance requirements, location checks, availability updates). If the PDDL is consistent and complete, state so. If inconsistencies are found, detail them precisely and propose corrective revisions to the PDDL domain and problem structure. Output your feedback enclosed between <feedback></feedback> tags. Do not output PDDL."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "pddl_draft",
                    "pddl_feedback"
                ],
                "output": "pddl_final",
                "system_prompt": "You are an expert with PDDL problems (Planning Domain Definition Language). You always provide a PDDL domain and a PDDL problem file to solve the task, optimized for solvers like FastDownwards. You always enclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags.",
                "prompt": "Your name is orchestrator. You are tasked with finalizing the PDDL model for the logistics problem. You received the initial PDDL draft and feedback regarding its consistency.\nInitial PDDL Draft:\n{pddl_draft}\nAuditor Feedback:\n{pddl_feedback}\nIntegrate the feedback (if any) and ensure the final PDDL domain and problem strictly follow the planning requirements defined in the environment specification, resulting in a model solvable by FastDownwards. Think step by step and provide the final PDDL domain and a PDDL problem file.\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "planner.pddl->auditor.check",
            "planner.pddl->orchestrator.pddl",
            "auditor.check->orchestrator.pddl"
        ]
    }
}