{
    "name": "Depots19",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "planner",
            "auditor",
            "orchestrator"
        ],
        "planner": {
            "private_information": [
                "I am responsible for deriving the PDDL representation of the logistics problem.",
                "The environment involves trucks, hoists, crates, pallets, depots, and distributors."
            ],
            "goal": "Generate a valid PDDL plan to achieve the specified goal state."
        },
        "auditor": {
            "private_information": [
                "I must verify that the PDDL generated by the planner accurately reflects all physical constraints and action preconditions/effects described in the environment specification, ensuring temporal and causal consistency."
            ],
            "goal": "Review the PDDL for correct modeling of types, predicates, initial state, and action mechanics (like clearance and location tracking)."
        },
        "orchestrator": {
            "private_information": [
                "I ensure the final plan is correctly structured for external consumption by planning solvers like FastDownwards."
            ],
            "goal": "Produce the final, verified PDDL domain and problem."
        }
    },
    "environment": {
        "init": {
            "grid_size": null,
            "visibility": null
        },
        "public_information": [
            "The planning task involves logistics: transporting crates between depots and distributors using trucks and hoists.",
            "Places: Depot (depot0, depot1, depot2), Distributor (distributor0). All places are connected by roads.",
            "Surfaces: Pallet (pallet0, pallet1, pallet2, pallet3), Crate (crate0, crate1, crate2).",
            "Objects: Hoist (hoist0, hoist1, hoist2, hoist3), Truck (truck0, truck1, truck2).",
            "Initial State Key Facts:",
            "Locations: crate0/crate1/truck0/hoist0/pallet0 at depot0; hoist1/pallet1 at depot1; crate2/truck1/hoist2/pallet2 at depot2; truck2/hoist3/pallet3 at distributor0.",
            "Conditions: All hoists are available. crate1, crate2, pallet1, pallet3 are clear.",
            "Stacking: crate0 is on pallet0, crate1 is on crate0, crate2 is on pallet2.",
            "Goal: Achieve 'on(crate0, crate1)' and 'on(crate1, pallet1)'."
        ]
    },
    "workflow": {
        "planner": {
            "pddl": {
                "input": [],
                "output": "pddl_draft",
                "system_prompt": "You are an expert in classical PDDL planning (Planning Domain Definition Language). You must define a comprehensive PDDL domain and problem file that captures the logistics environment, actions, initial state, and goal provided in the prompt. You always enclose the PDDL domain between <domain></domain> tags, and the PDDL problem between <problem></problem> tags.",
                "prompt": "Your name is planner. You are setting up a logistics planning problem. The environment description and constraints are:\n{environment->public_information}\nYour goal is:\n{agents->planner->goal}\n\nDefine the PDDL domain based on the required actions (Drive, Lift, Drop, Load, Unload) and their restrictions described in the human specification. Ensure the types and predicates accurately reflect location, clearance, stacking, and hoist status. Then, define the PDDL problem based on the provided initial state and goal.\nThink step by step and provide the PDDL domain and a PDDL problem file to solve the task."
            }
        },
        "auditor": {
            "review": {
                "input": [
                    "pddl_draft"
                ],
                "output": "pddl_validated",
                "system_prompt": "You are a specialized audit agent responsible for checking the temporal and causal consistency of PDDL domain and problem definitions. Your primary task is to ensure that the definition accurately reflects the constraints and initial state specified in the environment description, specifically verifying predicate usage (like 'clear' states, 'lifting' state, and 'at' locations) across all actions. You must review the structure and integrity of the PDDL files provided.",
                "prompt": "Your name is auditor. You have received the following PDDL draft:\n{pddl_draft}\nReview this PDDL domain and problem definition against the full environment specification. Pay close attention to:\n1. Ensuring that actions like Lift and Drop correctly manage the 'clear' status of crates and pallets.\n2. Verifying that the effects of Load/Unload correctly manage the 'in' status of crates within trucks.\n3. Confirming the initial state accurately maps all specified object locations and relationships.\n\nIf the PDDL is correct and complete, confirm it. If corrections are necessary, provide the revised PDDL domain and problem. Always enclose the PDDL domain between <domain></domain> tags, and the PDDL problem between <problem></problem> tags."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "pddl_validated"
                ],
                "output": "final_pddl_plan",
                "system_prompt": "You are an orchestrator specializing in finalizing PDDL outputs for planning engines like FastDownwards. You receive validated PDDL files and ensure they are presented in the required final format.",
                "prompt": "Your name is orchestrator. You have received the validated PDDL domain and problem file from the auditor:\n{pddl_validated}\nConfirm that this is the final PDDL required to solve the task. Output the complete, verified PDDL domain and PDDL problem exactly as received.\nAlways enclose the PDDL domain between <domain></domain> tags, and the PDDL problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "planner.pddl->auditor.review",
            "auditor.review->orchestrator.pddl"
        ]
    }
}