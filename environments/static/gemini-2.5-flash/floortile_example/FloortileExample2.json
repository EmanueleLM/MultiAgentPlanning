{
    "name": "FloortileExample2",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "planner",
            "auditor",
            "orchestrator"
        ],
        "planner": {
            "private_information": [
                "I am responsible for mapping natural language rules into PDDL syntax."
            ],
            "goal": "Analyze the floor-tile domain and problem specifications to determine the exact PDDL predicates, functions, and action structure required."
        },
        "auditor": {
            "private_information": [
                "I specialize in verifying PDDL definitions against stated natural language constraints, particularly regarding action costs and temporal consistency."
            ],
            "goal": "Verify the derived PDDL structure, ensuring all action costs and movement/painting rules are correctly implemented before final compilation."
        },
        "orchestrator": {
            "private_information": [
                "I combine analysis from agents to produce the final runnable PDDL files."
            ],
            "goal": "Generate the final, complete, and runnable PDDL domain and problem files for the floor-tile task, minimizing total cost."
        }
    },
    "environment": {
        "init": {
            "grid_size": "5x3",
            "robots": 2,
            "colors": 2
        },
        "public_information": [
            "The task requires solving a multi-robot planning problem on a floor tile grid to achieve specific coloring goals.",
            "The final plan must minimize the total cost of actions.",
            "The domain uses requirements: :typing and :action-costs."
        ]
    },
    "workflow": {
        "planner": {
            "analysis": {
                "input": [],
                "output": "planner_notes",
                "system_prompt": "You are an expert PDDL analyst. You must analyze the provided NL domain description and PDDL domain template. Your output should detail the required PDDL predicates and the complete precondition and effect blocks for every action, including the action costs.",
                "prompt": "Analyze the following natural language domain description and PDDL domain template. Detail all necessary predicates (e.g., robot-at, clear, painted, connectivity relations like up/down/left/right) and provide the complete PDDL definition (parameters, preconditions, effects, and costs) for every action specified.\n\n[NL Domain Description]\nThe floor-tile domain is designed for planning the actions of robots to paint floor tiles with two colors. Each robot can move in four directions (up, down, right, left), change the color of paint it is carrying, and paint adjacent tiles. The domain also tracks the total cost of actions performed.\n\nThe actions defined in this domain include:\n\n1. change-color: This action allows a robot to change the color it has. The preconditions are that the robot currently has a color and the new color is available. The effect is that the robot no longer has the old color and now has the new color. This action increases the total cost by 5.\n\n2. paint-up: This action allows a robot to paint the tile above its current position. The preconditions are that the robot has a color, is at a certain tile, the tile above is clear, and the robot can move up. The effect is that the tile above is no longer clear and is now painted with the robot's color. This action increases the total cost by 2.\n\n3. paint-down: This action allows a robot to paint the tile below its current position. The preconditions are that the robot has a color, is at a certain tile, the tile below is clear, and the robot can move down. The effect is that the tile below is no longer clear and is now painted with the robot's color. This action increases the total cost by 2.\n\n4. up: This action allows a robot to move up to the tile above its current position. The preconditions are that the robot is at a certain tile, the tile above is clear, and the robot can move up. The effect is that the robot is now at the tile above, the tile it was previously at is now clear, and the tile it moved to is no longer clear. This action increases the total cost by 3.\n\n5. down: This action allows a robot to move down to the tile below its current position. The preconditions are that the robot is at a certain tile, the tile below is clear, and the robot can move down. The effect is that the robot is now at the tile below, the tile it was previously at is now clear, and the tile it moved to is no longer clear. This action increases the total cost by 1.\n\n6. right: This action allows a robot to move to the right to the tile adjacent to its current position. The preconditions are that the robot is at a certain tile, the tile to the right is clear, and the robot can move right. The effect is that the robot is now at the tile to the right, the tile it was previously at is now clear, and the tile it moved to is no longer clear. This action increases the total cost by 1.\n\n7. left: This action allows a robot to move to the left to the tile adjacent to its current position. The preconditions are that the robot is at a certain tile, the tile to the left is clear, and the robot can move left. The effect is that the robot is now at the tile to the left, the tile it was previously at is now clear, and the tile it moved to is no longer clear. This action increases the total cost by 1.\n\n[PDDL Domain Template]\n(define (domain floor-tile)\n  (:requirements :typing :action-costs)\n  (:types robot tile color - object)\n  (:predicates)\n  (:functions (total-cost))\n\n  (:action change-color\n    :parameters (?r - robot ?c - color ?c2 - color)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action paint-up\n    :parameters (?r - robot ?y - tile ?x - tile ?c - color)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action paint-down\n    :parameters (?r - robot ?y - tile ?x - tile ?c - color)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action up\n    :parameters (?r - robot ?x - tile ?y - tile)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action down\n    :parameters (?r - robot ?x - tile ?y - tile)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action right\n    :parameters (?r - robot ?x - tile ?y - tile)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action left\n    :parameters (?r - robot ?x - tile ?y - tile)\n    :precondition ()\n    :effect ()\n  )\n)"
            }
        },
        "auditor": {
            "check": {
                "input": [
                    "planner_notes"
                ],
                "output": "auditor_report",
                "system_prompt": "You are a PDDL auditor. You receive a detailed analysis of domain requirements. Your task is to verify that all constraints, especially action costs and state changes (like tile clearance and painting), are correctly captured according to the original natural language problem description.",
                "prompt": "You are auditing the planning notes provided below ({planner_notes}) against the original specifications. Confirm that:\n1. All action costs (5, 2, 3, 1) are correctly associated.\n2. The rules for movement (only clear tiles) and painting (tiles become not clear/painted, painted tiles cannot be stood on) are consistent with the problem statement.\n\n[NL Problem Description]\nYou control a set of robots that can paint floor tiles with different colors. The robots can move in four directions: up, down, left, and right. They can paint with one color at a time and can change the color of their spray guns. Tiles can only be painted in the front (up) or behind (down) the robot, and once a tile is painted, no robot can stand on it.\n\n[Planner Analysis]\n{planner_notes}\n\nProvide your detailed consistency report."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "planner_notes",
                    "auditor_report"
                ],
                "output": "final_pddl",
                "system_prompt": "You are an expert PDDL compiler and planner targeting the FastDownwards solver. You must use the analysis provided by the planner and the audit report to finalize the PDDL domain and problem files. Ensure the output is accurate and runnable.",
                "prompt": "Using the analysis ({planner_notes}) and audit report ({auditor_report}), construct the final PDDL domain and PDDL problem files. Ensure the domain correctly implements all predicates and costs. Ensure the problem file adheres exactly to the initial state and goal defined in the provided template.\n\n[PDDL Domain Template]\n(define (domain floor-tile)\n  (:requirements :typing :action-costs)\n  (:types robot tile color - object)\n  (:predicates)\n  (:functions (total-cost))\n\n  (:action change-color\n    :parameters (?r - robot ?c - color ?c2 - color)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action paint-up\n    :parameters (?r - robot ?y - tile ?x - tile ?c - color)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action paint-down\n    :parameters (?r - robot ?y - tile ?x - tile ?c - color)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action up\n    :parameters (?r - robot ?x - tile ?y - tile)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action down\n    :parameters (?r - robot ?x - tile ?y - tile)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action right\n    :parameters (?r - robot ?x - tile ?y - tile)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action left\n    :parameters (?r - robot ?x - tile ?y - tile)\n    :precondition ()\n    :effect ()\n  )\n)\n\n[PDDL Problem Template]\n(define (problem p03-432)\n (:domain floor-tile)\n (:objects tile_0-1 tile_0-2 tile_0-3 \n           tile_1-1 tile_1-2 tile_1-3 \n           tile_2-1 tile_2-2 tile_2-3 \n           tile_3-1 tile_3-2 tile_3-3 \n           tile_4-1 tile_4-2 tile_4-3 - tile\n           robot1 robot2 - robot\n           white black - color\n)\n (:init \n   (= (total-cost) 0)\n   (robot-at robot1 tile_2-3)\n   (robot-has robot1 white)\n   (robot-at robot2 tile_1-1)\n   (robot-has robot2 black)\n   (available-color white)\n   (available-color black)\n   (clear tile_0-1)\n   (clear tile_0-2)\n   (clear tile_0-3)\n   (clear tile_1-2)\n   (clear tile_1-3)\n   (clear tile_2-1)\n   (clear tile_2-2)\n   (clear tile_3-1)\n   (clear tile_3-2)\n   (clear tile_3-3)\n   (clear tile_4-1)\n   (clear tile_4-2)\n   (clear tile_4-3)\n   (up tile_1-1 tile_0-1)\n   (up tile_1-2 tile_0-2)\n   (up tile_1-3 tile_0-3)\n   (up tile_2-1 tile_1-1)\n   (up tile_2-2 tile_1-2)\n   (up tile_2-3 tile_1-3)\n   (up tile_3-1 tile_2-1)\n   (up tile_3-2 tile_2-2)\n   (up tile_3-3 tile_2-3)\n   (up tile_4-1 tile_3-1)\n   (up tile_4-2 tile_3-2)\n   (up tile_4-3 tile_3-3)\n   (down tile_0-1 tile_1-1)\n   (down tile_0-2 tile_1-2)\n   (down tile_0-3 tile_1-3)\n   (down tile_1-1 tile_2-1)\n   (down tile_1-2 tile_2-2)\n   (down tile_1-3 tile_2-3)\n   (down tile_2-1 tile_3-1)\n   (down tile_2-2 tile_3-2)\n   (down tile_2-3 tile_3-3)\n   (down tile_3-1 tile_4-1)\n   (down tile_3-2 tile_4-2)\n   (down tile_3-3 tile_4-3)\n   (right tile_0-2 tile_0-1)\n   (right tile_0-3 tile_0-2)\n   (right tile_1-2 tile_1-1)\n   (right tile_1-3 tile_1-2)\n   (right tile_2-2 tile_2-1)\n   (right tile_2-3 tile_2-2)\n   (right tile_3-2 tile_3-1)\n   (right tile_3-3 tile_3-2)\n   (right tile_4-2 tile_4-1)\n   (right tile_4-3 tile_4-2)\n   (left tile_0-1 tile_0-2)\n   (left tile_0-2 tile_0-3)\n   (left tile_1-1 tile_1-2)\n   (left tile_1-2 tile_1-3)\n   (left tile_2-1 tile_2-2)\n   (left tile_2-2 tile_2-3)\n   (left tile_3-1 tile_3-2)\n   (left tile_3-2 tile_3-3)\n   (left tile_4-1 tile_4-2)\n   (left tile_4-2 tile_4-3)\n)\n (:goal (and\n    (painted tile_1-1 white)\n    (painted tile_1-2 black)\n    (painted tile_1-3 white)\n    (painted tile_2-1 black)\n    (painted tile_2-2 white)\n    (painted tile_2-3 black)\n    (painted tile_3-1 white)\n    (painted tile_3-2 black)\n    (painted tile_3-3 white)\n    (painted tile_4-1 black)\n    (painted tile_4-2 white)\n    (painted tile_4-3 black)\n))\n (:metric minimize (total-cost))\n)\n\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "planner.analysis->auditor.check",
            "auditor.check->orchestrator.pddl"
        ]
    }
}