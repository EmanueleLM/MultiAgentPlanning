{
    "name": "FloortileExample7",
    "author": "Expert Planner System",
    "agents": {
        "number": 3,
        "names": [
            "pddl_generator",
            "auditor",
            "orchestrator"
        ],
        "pddl_generator": {
            "private_information": [],
            "goal": "Generate a complete and logically consistent PDDL domain and problem file for the floor-tile painting scenario, strictly following the provided natural language descriptions and templates."
        },
        "auditor": {
            "private_information": [
                "Action costs must be strictly adhered to: change-color (5), paint actions (2), up (3), down/right/left (1).",
                "Movement actions must correctly update the 'clear' status of both the source and destination tiles.",
                "Painting actions must ensure the target tile is 'clear' before painting and mark it 'painted' afterward, removing the 'clear' status."
            ],
            "goal": "Audit the PDDL domain and problem generated by the planner for logical soundness, adherence to the natural language rules, and compliance with action costs and requirements (:action-costs, :typing)."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Present the final, validated PDDL domain and problem files, optimized for minimal total cost, suitable for the FastDownwards solver."
        }
    },
    "environment": {
        "init": {
            "grid_size_x": 5,
            "grid_size_y": 3,
            "robots": 2,
            "colors": 2
        },
        "public_information": [
            "Natural Language Domain Description: The floor-tile domain involves robots painting tiles with two colors. Robots can move (up/down/right/left), change color (cost 5), and paint adjacent tiles (up/down, cost 2). Movement costs are: up (3), down/right/left (1). Tiles must be clear to be moved onto or painted. Once painted, tiles cannot be moved onto. Movement changes the 'clear' status of tiles.",
            "Natural Language Problem Description: A 5x3 grid of tiles (tile_0-1 to tile_5-3). Robot1 (white, at tile_4-2). Robot2 (black, at tile_5-3). Goal: Paint specific tiles alternating white/black. Minimize total action cost.",
            "PDDL Domain Template: (define (domain floor-tile)\n  (:requirements :typing :action-costs)\n  (:types robot tile color - object)\n  (:predicates)\n  (:functions (total-cost))\n\n  (:action change-color\n    :parameters (?r - robot ?c - color ?c2 - color)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action paint-up\n    :parameters (?r - robot ?y - tile ?x - tile ?c - color)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action paint-down\n    :parameters (?r - robot ?y - tile ?x - tile ?c - color)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action up\n    :parameters (?r - robot ?x - tile ?y - tile)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action down\n    :parameters (?r - robot ?x - tile ?y - tile)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action right\n    :parameters (?r - robot ?x - tile ?y - tile)\n    :precondition ()\n    :effect ()\n  )\n\n  (:action left\n    :parameters (?r - robot ?x - tile ?y - tile)\n    :precondition ()\n    :effect ()\n  )\n)",
            "PDDL Problem Template: (define (problem p08-532)\n (:domain floor-tile)\n (:objects tile_0-1 tile_0-2 tile_0-3 \n           tile_1-1 tile_1-2 tile_1-3 \n           tile_2-1 tile_2-2 tile_2-3 \n           tile_3-1 tile_3-2 tile_3-3 \n           tile_4-1 tile_4-2 tile_4-3 \n           tile_5-1 tile_5-2 tile_5-3 - tile\n           robot1 robot2 - robot\n           white black - color\n)\n (:init \n   (= (total-cost) 0)\n   (robot-at robot1 tile_4-2)\n   (robot-has robot1 white)\n   (robot-at robot2 tile_5-3)\n   (robot-has robot2 black)\n   (available-color white)\n   (available-color black)\n   (clear tile_0-1)\n   (clear tile_0-2)\n   (clear tile_0-3)\n   (clear tile_1-1)\n   (clear tile_1-2)\n   (clear tile_1-3)\n   (clear tile_2-1)\n   (clear tile_2-2)\n   (clear tile_2-3)\n   (clear tile_3-1)\n   (clear tile_3-2)\n   (clear tile_3-3)\n   (clear tile_4-1)\n   (clear tile_4-3)\n   (clear tile_5-1)\n   (clear tile_5-2)\n   (up tile_1-1 tile_0-1)\n   (up tile_1-2 tile_0-2)\n   (up tile_1-3 tile_0-3)\n   (up tile_2-1 tile_1-1)\n   (up tile_2-2 tile_1-2)\n   (up tile_2-3 tile_1-3)\n   (up tile_3-1 tile_2-1)\n   (up tile_3-2 tile_2-2)\n   (up tile_3-3 tile_2-3)\n   (up tile_4-1 tile_3-1)\n   (up tile_4-2 tile_3-2)\n   (up tile_4-3 tile_3-3)\n   (up tile_5-1 tile_4-1)\n   (up tile_5-2 tile_4-2)\n   (up tile_5-3 tile_4-3)\n   (down tile_0-1 tile_1-1)\n   (down tile_0-2 tile_1-2)\n   (down tile_0-3 tile_1-3)\n   (down tile_1-1 tile_2-1)\n   (down tile_1-2 tile_2-2)\n   (down tile_1-3 tile_2-3)\n   (down tile_2-1 tile_3-1)\n   (down tile_2-2 tile_3-2)\n   (down tile_2-3 tile_3-3)\n   (down tile_3-1 tile_4-1)\n   (down tile_3-2 tile_4-2)\n   (down tile_3-3 tile_4-3)\n   (down tile_4-1 tile_5-1)\n   (down tile_4-2 tile_5-2)\n   (down tile_4-3 tile_5-3)\n   (right tile_0-2 tile_0-1)\n   (right tile_0-3 tile_0-2)\n   (right tile_1-2 tile_1-1)\n   (right tile_1-3 tile_1-2)\n   (right tile_2-2 tile_2-1)\n   (right tile_2-3 tile_2-2)\n   (right tile_3-2 tile_3-1)\n   (right tile_3-3 tile_3-2)\n   (right tile_4-2 tile_4-1)\n   (right tile_4-3 tile_4-2)\n   (right tile_5-2 tile_5-1)\n   (right tile_5-3 tile_5-2)\n   (left tile_0-1 tile_0-2)\n   (left tile_0-2 tile_0-3)\n   (left tile_1-1 tile_1-2)\n   (left tile_1-2 tile_1-3)\n   (left tile_2-1 tile_2-2)\n   (left tile_2-2 tile_2-3)\n   (left tile_3-1 tile_3-2)\n   (left tile_3-2 tile_3-3)\n   (left tile_4-1 tile_4-2)\n   (left tile_4-2 tile_4-3)\n   (left tile_5-1 tile_5-2)\n   (left tile_5-2 tile_5-3)\n)\n (:goal (and\n    (painted tile_1-1 white)\n    (painted tile_1-2 black)\n    (painted tile_1-3 white)\n    (painted tile_2-1 black)\n    (painted tile_2-2 white)\n    (painted tile_2-3 black)\n    (painted tile_3-1 white)\n    (painted tile_3-2 black)\n    (painted tile_3-3 white)\n    (painted tile_4-1 black)\n    (painted tile_4-2 white)\n    (painted tile_4-3 black)\n    (painted tile_5-1 white)\n    (painted tile_5-2 black)\n    (painted tile_5-3 white)\n))\n (:metric minimize (total-cost))\n)"
        ]
    },
    "workflow": {
        "pddl_generator": {
            "pddl": {
                "input": [],
                "output": "initial_pddl",
                "system_prompt": "You are an expert with PDDL problems (Planning Domain Definition Language). Your task is to synthesize a complete and correct PDDL domain and problem based on the provided natural language specifications and templates. You must rigorously define all missing predicates, preconditions, and effects for the actions, ensuring compliance with the action costs specified in the domain description. You must utilize the :action-costs requirement.",
                "prompt": "Using the NL Domain Description and NL Problem Description provided in the public information, complete the PDDL Domain Template and PDDL Problem Template to create a solvable planning task. Ensure the domain includes predicates for robot location, color possession, tile clear status, painted status, and directional movement (up, down, left, right). Pay special attention to enforcing the action costs and the logical updates required by movement and painting actions (e.g., updating 'clear' predicates).\nEnclose the full PDDL domain between <domain></domain> tags, and the full PDDL problem between <problem></problem> tags."
            }
        },
        "auditor": {
            "pddl": {
                "input": [
                    "initial_pddl"
                ],
                "output": "audited_pddl",
                "system_prompt": "You are a PDDL consistency auditor. You check PDDL submissions for errors, omissions, and compliance with specific constraints, especially regarding action costs and bookkeeping logic (like tile clearance updates).",
                "prompt": "Review the following generated PDDL domain and problem:\n{initial_pddl}\n\nCheck the following:\n1. Does the domain correctly define and use the `(total-cost)` function and the `:action-costs` requirement?\n2. Are the action costs accurately reflected: change-color (5), paint-up/paint-down (2), up (3), down/right/left (1)?\n3. Do movement actions correctly enforce that the destination tile must be 'clear' and update the 'clear' status of both source (becomes clear) and destination (becomes not clear) tiles?\n4. Do painting actions enforce the tile must be 'clear' and update it to 'painted' (and not 'clear')?\n5. Is the initial state correct based on the NL Problem Description?\n\nIf any logical or cost issues are found, correct the PDDL entirely. Output the revised, validated PDDL domain and problem. If the PDDL is correct, output it as is.\nEnclose the full PDDL domain between <domain></domain> tags, and the full PDDL problem between <problem></problem> tags."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "audited_pddl"
                ],
                "output": "final_pddl",
                "system_prompt": "You are the final workflow orchestrator. Your task is to present the verified PDDL domain and problem ready for execution by a solver.",
                "prompt": "The PDDL environment specification has been audited and finalized. Present the complete PDDL domain and problem obtained from the previous step:\n{audited_pddl}\nEnclose the full PDDL domain between <domain></domain> tags, and the full PDDL problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "pddl_generator.pddl->auditor.pddl",
            "auditor.pddl->orchestrator.pddl"
        ]
    }
}