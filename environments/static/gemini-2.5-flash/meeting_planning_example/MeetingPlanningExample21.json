{
    "name": "MeetingPlanningExample21",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "planner",
            "auditor",
            "orchestrator"
        ],
        "planner": {
            "private_information": [
                "I must model time accurately using metric fluents to handle duration and scheduling constraints.",
                "The primary goal is to maximize meeting potential, which currently involves meeting Margaret successfully."
            ],
            "goal": "Develop a schedule (PDDL domain and problem) that meets Margaret within her available window, respects travel times, and ensures a minimum 30-minute meeting duration."
        },
        "auditor": {
            "private_information": [
                "I specialize in verifying PDDL temporal models, ensuring that time tracking and duration constraints are non-ambiguous and correctly enforced."
            ],
            "goal": "Audit the proposed schedule for temporal consistency and refine the PDDL problem definition if necessary to ensure strict validity and adherence to all constraints (arrival time, travel time, duration)."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Produce the final, validated PDDL domain and problem that represents the optimal schedule for meeting Margaret, suitable for the FastDownwards solver."
        }
    },
    "environment": {
        "init": {
            "start_time": "9:00 AM",
            "start_location": "Mission District"
        },
        "public_information": [
            "Locations: Mission District (MD) and Haight-Ashbury (HA).",
            "Travel time MD -> HA: 12 minutes.",
            "Travel time HA -> MD: 11 minutes.",
            "Friend Margaret is at Haight-Ashbury.",
            "Margaret's availability: 8:00 AM to 3:45 PM (or 480 minutes to 945 minutes, assuming minute 0 is 00:00).",
            "Minimum meeting duration required: 30 minutes."
        ]
    },
    "workflow": {
        "planner": {
            "pddl": {
                "input": [],
                "output": "pddl_schedule",
                "system_prompt": "You are an expert PDDL planner specializing in scheduling and metric optimization problems. You must use PDDL features suitable for timeline management and duration constraints.",
                "prompt": "Your goal is: {agents->planner->goal}. You must start at 9:00 AM (540 minutes).\nEnvironment details:\n{environment->public_information}\nThink step by step and provide a PDDL domain (using time/metric fluents) and a PDDL problem file to define the optimal schedule. Ensure the plan includes the necessary fluents to track time accurately. Enclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "auditor": {
            "check_pddl": {
                "input": [
                    "pddl_schedule"
                ],
                "output": "pddl_validated_schedule",
                "system_prompt": "You are an expert PDDL auditor and temporal constraint checker. Your primary role is to ensure bookkeeping and temporal modeling is flawless. You must audit for causal and temporal consistency.",
                "prompt": "You have received the following initial PDDL plan for a scheduling problem:\n{pddl_schedule}\nGoal: {agents->auditor->goal}\n\nReview the PDDL domain and problem carefully against the following external constraints:\n1. Start Time: 9:00 AM (540 minutes).\n2. Margaret's Window: 8:00 AM to 3:45 PM (480 minutes to 945 minutes).\n3. Minimum Meeting Duration: 30 minutes.\n4. Travel times (12 min / 11 min).\n\nIdentify any modeling flaws, temporal inconsistencies, or bookkeeping shortcuts (like using simple reachability goals when duration constraints are required). If inconsistencies are found, refine the PDDL domain and problem to ensure strict temporal validity. If the PDDL is valid, confirm its validity. Always output the complete, corrected, or validated PDDL pair.\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "pddl_validated_schedule"
                ],
                "output": "pddl_final",
                "system_prompt": "You are an expert in integrating and finalizing validated PDDL plans for optimal scheduling problems. You prepare the final output for execution by the FastDownwards solver.",
                "prompt": "You have received the validated PDDL components from the auditor:\n{pddl_validated_schedule}\nYour task is to finalize this PDDL set, ensuring it is ready for execution by the FastDownwards planner to determine the optimal schedule. The final PDDL should solve the global goal: {agents->orchestrator->goal}.\nThink step by step and provide the final PDDL domain and PDDL problem file.\nEnclose the pddl domain between <domain></domain> tags, and the pddl problem between <problem></problem> tags."
            }
        },
        "constraints": [
            "planner.pddl->auditor.check_pddl",
            "auditor.check_pddl->orchestrator.pddl"
        ]
    }
}