{
    "name": "ChildsnackExample9",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "kitchen",
            "server",
            "auditor",
            "orchestrator"
        ],
        "kitchen": {
            "private_information": [
                "I manage ingredients and sandwich assembly in the kitchen.",
                "I know which bread and content portions are gluten-free and which are not.",
                "I can pair one bread portion with one content portion to create one sandwich and consume both portions in the process.",
                "There are three trays initially located in the kitchen."
            ],
            "goal": "Assess resource feasibility and produce a structured report mapping available bread/content to possible sandwiches, indicating which sandwiches are gluten-free and counts available."
        },
        "server": {
            "private_information": [
                "I manage trays, their locations, movement between places (kitchen and tables), placing sandwiches on trays and serving to waiting children.",
                "I know the initial waiting locations of each child (table1, table2, table3).",
                "I can move trays and place sandwiches on them; each tray can hold multiple sandwiches (not explicitly bounded in this report unless identified)."
            ],
            "goal": "Produce a movement and serving feasibility report: available trays, reachable places, minimal sequence ideas for moving trays and serving children at their waiting places."
        },
        "auditor": {
            "private_information": [
                "I audit temporal and causal consistency, ensuring no bookkeeping shortcuts are used (no artificial 'quota tokens' or post-hoc penalties).",
                "I check that resource consumption and generation are modeled causally (e.g., making a sandwich consumes bread and content and creates a sandwich), and that serving consumes or places sandwiches accordingly.",
                "I will flag any assumptions that simplify time/causal relations in an unrealistic way."
            ],
            "goal": "Produce an audit report that lists causal consistency issues, suggests removals of bookkeeping shortcuts, and prescribes realistic predicate choices and effects for correct temporal/causal modeling."
        },
        "orchestrator": {
            "private_information": [
                "I integrate reports from kitchen, server, and auditor and produce the final PDDL domain and problem files targeted to the FastDownwards solver.",
                "I must keep actions distinct if they are performed by logically distinct roles (preparation vs movement vs serving).",
                "I must ensure the final domain encodes resource consumption correctly, typing is consistent, and the produced problem matches the described initial state and goal of serving all children."
            ],
            "goal": "Integrate inputs and produce a FastDownwards-compatible PDDL domain and problem that represent the child-snack scenario and enable automated planning to serve all eleven children safely (respecting gluten allergies)."
        }
    },
    "environment": {
        "init": {
            "children_count": 11,
            "trays_count": 3,
            "sandwich_slots": 15,
            "places": 3
        },
        "public_information": [
            "Domain summary: The child-snack domain models making sandwiches (gluten and non-gluten), placing sandwiches on trays, moving trays between places, and serving children. Gluten-sensitive children must receive gluten-free sandwiches.",
            "Problem summary: 11 children (child1..child11) with specified allergy statuses and waiting locations. 11 bread portions and 11 content portions are initially in the kitchen. Four bread portions and four content portions are gluten-free. There are 3 trays (tray1..tray3) initially in the kitchen. 15 sandwich names (sandw1..sandw15) exist as potential sandwiches (initially not created). Goal: every child must be served a sandwich they are not allergic to.",
            "PDDL problem template (provided to the orchestrator and for reference):",
            "(define (problem prob-snack)\n  (:domain child-snack)\n  (:objects\n    child1 child2 child3 child4 child5 child6 child7 child8 child9 child10 child11 - child\n    bread1 bread2 bread3 bread4 bread5 bread6 bread7 bread8 bread9 bread10 bread11 - bread-portion\n    content1 content2 content3 content4 content5 content6 content7 content8 content9 content10 content11 - content-portion\n    tray1 tray2 tray3 - tray\n    table1 table2 table3 - place\n    sandw1 sandw2 sandw3 sandw4 sandw5 sandw6 sandw7 sandw8 sandw9 sandw10 sandw11 sandw12 sandw13 sandw14 sandw15 - sandwich\n  )\n  (:init\n     ;; trays at kitchen\n     (at tray1 kitchen)\n     (at tray2 kitchen)\n     (at tray3 kitchen)\n     ;; breads and contents in kitchen\n     (at_kitchen_bread bread1)\n     (at_kitchen_bread bread2)\n     (at_kitchen_bread bread3)\n     (at_kitchen_bread bread4)\n     (at_kitchen_bread bread5)\n     (at_kitchen_bread bread6)\n     (at_kitchen_bread bread7)\n     (at_kitchen_bread bread8)\n     (at_kitchen_bread bread9)\n     (at_kitchen_bread bread10)\n     (at_kitchen_bread bread11)\n     (at_kitchen_content content1)\n     (at_kitchen_content content2)\n     (at_kitchen_content content3)\n     (at_kitchen_content content4)\n     (at_kitchen_content content5)\n     (at_kitchen_content content6)\n     (at_kitchen_content content7)\n     (at_kitchen_content content8)\n     (at_kitchen_content content9)\n     (at_kitchen_content content10)\n     (at_kitchen_content content11)\n     ;; gluten-free annotations\n     (no_gluten_bread bread3)\n     (no_gluten_bread bread10)\n     (no_gluten_bread bread4)\n     (no_gluten_bread bread9)\n     (no_gluten_content content2)\n     (no_gluten_content content9)\n     (no_gluten_content content5)\n     (no_gluten_content content11)\n     ;; allergies\n     (allergic_gluten child1)\n     (allergic_gluten child3)\n     (allergic_gluten child11)\n     (allergic_gluten child5)\n     (not_allergic_gluten child2)\n     (not_allergic_gluten child4)\n     (not_allergic_gluten child6)\n     (not_allergic_gluten child7)\n     (not_allergic_gluten child8)\n     (not_allergic_gluten child9)\n     (not_allergic_gluten child10)\n     ;; waiting positions\n     (waiting child1 table2)\n     (waiting child2 table1)\n     (waiting child3 table1)\n     (waiting child4 table2)\n     (waiting child5 table3)\n     (waiting child6 table3)\n     (waiting child7 table3)\n     (waiting child8 table2)\n     (waiting child9 table1)\n     (waiting child10 table3)\n     (waiting child11 table1)\n     ;; sandwiches do not exist yet\n     (notexist sandw1)\n     (notexist sandw2)\n     (notexist sandw3)\n     (notexist sandw4)\n     (notexist sandw5)\n     (notexist sandw6)\n     (notexist sandw7)\n     (notexist sandw8)\n     (notexist sandw9)\n     (notexist sandw10)\n     (notexist sandw11)\n     (notexist sandw12)\n     (notexist sandw13)\n     (notexist sandw14)\n     (notexist sandw15)\n  )\n  (:goal\n    (and\n     (served child1)\n     (served child2)\n     (served child3)\n     (served child4)\n     (served child5)\n     (served child6)\n     (served child7)\n     (served child8)\n     (served child9)\n     (served child10)\n     (served child11)\n    )\n  )\n)\n",
            "PDDL domain template (provided to the orchestrator and for reference):",
            "(define (domain child-snack)\n  (:requirements :typing :equality)\n  (:types child bread-portion content-portion sandwich tray place)\n  (:constants kitchen - place)\n\n  (:predicates\n    (at ?t - tray ?p - place)\n    (at_kitchen_bread ?b - bread-portion)\n    (at_kitchen_content ?c - content-portion)\n    (no_gluten_bread ?b - bread-portion)\n    (no_gluten_content ?c - content-portion)\n    (on_tray ?s - sandwich ?t - tray)\n    (in_kitchen ?s - sandwich)\n    (notexist ?s - sandwich)\n    (served ?c - child)\n    (waiting ?c - child ?p - place)\n    (allergic_gluten ?c - child)\n    (not_allergic_gluten ?c - child)\n  )\n\n  (:action make_sandwich_no_gluten\n    :parameters (?s - sandwich ?b - bread-portion ?c - content-portion)\n    :precondition (and (notexist ?s) (at_kitchen_bread ?b) (at_kitchen_content ?c) (no_gluten_bread ?b) (no_gluten_content ?c))\n    :effect (and (not (at_kitchen_bread ?b)) (not (at_kitchen_content ?c)) (not (notexist ?s)) (in_kitchen ?s))\n  )\n\n  (:action make_sandwich\n    :parameters (?s - sandwich ?b - bread-portion ?c - content-portion)\n    :precondition (and (notexist ?s) (at_kitchen_bread ?b) (at_kitchen_content ?c))\n    :effect (and (not (at_kitchen_bread ?b)) (not (at_kitchen_content ?c)) (not (notexist ?s)) (in_kitchen ?s))\n  )\n\n  (:action put_on_tray\n    :parameters (?s - sandwich ?t - tray ?p - place)\n    :precondition (and (in_kitchen ?s) (at ?t kitchen))\n    :effect (and (not (in_kitchen ?s)) (on_tray ?s ?t))\n  )\n\n  (:action move_tray\n    :parameters (?t - tray ?p1 - place ?p2 - place)\n    :precondition (at ?t ?p1)\n    :effect (and (not (at ?t ?p1)) (at ?t ?p2))\n  )\n\n  (:action serve_sandwich_no_gluten\n    :parameters (?s - sandwich ?ch - child ?t - tray ?p - place)\n    :precondition (and (allergic_gluten ?ch) (waiting ?ch ?p) (on_tray ?s ?t) (at ?t ?p))\n    :effect (and (not (on_tray ?s ?t)) (served ?ch))\n  )\n\n  (:action serve_sandwich\n    :parameters (?s - sandwich ?ch - child ?t - tray ?p - place)\n    :precondition (and (not_allergic_gluten ?ch) (waiting ?ch ?p) (on_tray ?s ?t) (at ?t ?p))\n    :effect (and (not (on_tray ?s ?t)) (served ?ch))\n  )\n)\n"
        ]
    },
    "workflow": {
        "kitchen": {
            "analyze": {
                "input": [],
                "output": "kitchen_report",
                "system_prompt": "You are the kitchen analyst. Your role is to inspect the initial resource state and produce a structured, actionable report (not PDDL) describing which sandwiches can be produced, which pairings yield gluten-free sandwiches, counts of gluten-free-capable sandwiches, and any resource shortfalls. Do not emit PDDL. Provide a clear mapping of bread+content -> potential sandwich ids (or counts) and mark gluten-free candidates.",
                "prompt": "You are the kitchen agent. Based on the public information about breads, contents, gluten annotations, trays, and that sandwiches currently are not created, produce a structured report containing:\n- total counts of bread and content available\n- list (or count mapping) of how many gluten-free sandwiches can be made (pairing available no_gluten_bread with no_gluten_content)\n- list (or count mapping) of how many regular sandwiches can be made\n- recommended assignment of specific sandwich names (sandw1..sandw15) to be produced as gluten-free vs regular given allergy distribution\nReturn the report as plain structured text or JSON-like text (not PDDL)."
            }
        },
        "server": {
            "analyze": {
                "input": [],
                "output": "server_report",
                "system_prompt": "You are the server analyst. Your role is to examine tray availability, places, and waiting positions and produce a clear feasibility report and suggested movement/serving sequencing ideas. Do not emit PDDL. Focus on physical movement, tray placement, and how to deliver sandwiches to waiting children with minimal relocations.",
                "prompt": "You are the server agent. Based on the public information and kitchen report (when available), produce a structured report containing:\n- tray capacities assumptions (state if you assume unbounded or give suggested capacity)\n- an ordered plan sketch for moving trays from kitchen to tables to serve children (per-tray suggestions)\n- mapping from trays to tables and which children each tray should serve to minimize moves\nReturn the report as plain structured text or JSON-like text (not PDDL)."
            }
        },
        "auditor": {
            "audit": {
                "input": [],
                "output": "audit_report",
                "system_prompt": "You are the causal/temporal auditor. Your role is to verify that the described actions and resource transitions are temporally and causally consistent, to remove or flag bookkeeping shortcuts (like quota tokens or effects that bypass consumption), and to propose corrections to predicate definitions or action effects to avoid unrealistic shortcuts. Do not emit PDDL domain/problem files; produce an audit report.",
                "prompt": "You are the auditor agent. Review the domain and problem natural-language descriptions and the provided templates. Produce a report that:\n- lists any causal shortcuts or unrealistic modeling choices (e.g., serving without consuming sandwiches, or using abstract quota tokens)\n- suggests explicit predicates and effects to ensure correct resource consumption and causal chains (for example: making a sandwich consumes a bread and content; serving removes the sandwich from the tray)\n- recommends any temporal considerations or sequential constraints that should be encoded in the domain to avoid parallelism mistakes\nReturn the audit as plain structured text or JSON-like text (not PDDL)."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "kitchen_report",
                    "server_report",
                    "audit_report"
                ],
                "output": "pddl_final",
                "system_prompt": "You are an expert PDDL author and multi-agent orchestrator. Your job is to integrate the kitchen, server, and auditor reports and produce the final PDDL domain and problem that are compatible with the FastDownwards planner. Keep actions distinct if they are logically distinct roles. Ensure typing, predicate names, preconditions, and effects reflect causal consumption and serving semantics as audited. Enclose the domain between <domain></domain> tags and the problem between <problem></problem>. Produce complete, ready-to-run PDDL (no placeholders) targeted at FastDownwards (STRIPS+typing requirements as needed).",
                "prompt": "You are the orchestrator. You will receive the kitchen, server, and auditor reports and must produce a final PDDL domain and problem that encode:\n- making gluten and non-gluten sandwiches (consuming bread+content, creating sandwich instances in_kitchen)\n- putting sandwiches on trays (requiring tray at kitchen and sandwich in kitchen), moving trays between places, and serving sandwiches to children respecting allergies\n- causal consistency: consumption of bread/content when making a sandwich and removal of sandwich from tray when served\n- include the initial state and goal: all children served\nUse the provided PDDL domain and problem templates as a starting point, incorporate auditor recommendations, and ensure the produced PDDL is compatible with FastDownwards. Enclose the domain between <domain></domain> tags and the problem between <problem></problem>."
            }
        },
        "constraints": [
            "kitchen.analyze->orchestrator.pddl",
            "server.analyze->orchestrator.pddl",
            "auditor.audit->orchestrator.pddl"
        ]
    }
}