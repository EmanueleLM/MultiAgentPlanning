{
    "name": "Depots11",
    "author": "Human",
    "agents": {
        "number": 5,
        "names": [
            "depot_manager",
            "hoist_operator",
            "truck_driver",
            "auditor",
            "orchestrator"
        ],
        "depot_manager": {
            "private_information": [
                "Knowledge about place layout and initial placement of crates and pallets at depots and distributors.",
                "Depots and distributors are both specializations of place.",
                "Pallets and crates are surfaces used to stack crates."
            ],
            "goal": "Extract and report the ground facts (objects, their initial locations and stacking relations) in a clear structured form to feed the orchestrator."
        },
        "hoist_operator": {
            "private_information": [
                "Semantic and precondition/effect description of hoist operations: lift, drop, load-into-truck, unload-from-truck.",
                "Hoists are devices located at places and may be available or busy; they can lift clear crates if co-located."
            ],
            "goal": "Formalize hoist-related action schemas, preconditions and effects in a structured, implementation-neutral specification for the orchestrator."
        },
        "truck_driver": {
            "private_information": [
                "Semantic and precondition/effect description of driving actions for trucks between places.",
                "Trucks move between places and carry crates when loaded; driving requires the truck to be at the origin."
            ],
            "goal": "Formalize truck-driving action schemas, movement constraints and state updates in a structured, implementation-neutral specification for the orchestrator."
        },
        "auditor": {
            "private_information": [
                "Role: audit temporal and causal consistency of the collected action schemas and initial facts.",
                "Role: identify and recommend removal of bookkeeping shortcuts (e.g., quota tokens or ad-hoc post-hoc penalties) and insist on explicit causal bookkeeping in the model."
            ],
            "goal": "Produce an audit report that ensures the action specifications and initial facts are temporally and causally consistent and free of bookkeeping shortcuts, and provide corrections or annotations for the orchestrator."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate the structured facts, action schemas and the audit report to produce a single coherent PDDL domain and PDDL problem targeting the FastDownward solver that achieves the stated stacking goal."
        }
    },
    "environment": {
        "init": {
            "grid_size": 6,
            "visibility": 2
        },
        "public_information": [
            "There are two types of places: depots and distributors. Both are places and trucks and hoists operate at places.",
            "Surfaces exist such as pallets and crates; crates may be stacked on surfaces or on other crates.",
            "Roads fully connect all depots and distributors: trucks can drive between any two places.",
            "Actions available in the domain include: drive(truck, from, to), hoist_lift(hoist, crate, surface, place), hoist_drop(hoist, crate, surface, place), hoist_load(hoist, crate, truck, place), hoist_unload(hoist, crate, truck, place).",
            "Restrictions summary: driving requires truck at origin; hoist lift requires hoist and crate co-located, hoist available, crate clear; lift makes hoist busy and crate no longer on surface; drop requires hoist lifting crate and surface clear; load requires hoist lifting crate and truck co-located; unload requires hoist available and crate in truck.",
            "Modeling note: the auditor will remove bookkeeping shortcuts and insist on explicit predicates for availability, lifting, clear, on, in-truck and at."
        ],
        "initial_state": [
            "crate0 is at depot0",
            "crate1 is at depot0",
            "crate2 is at depot0",
            "hoist0 is at depot0",
            "hoist1 is at depot1",
            "hoist2 is at depot2",
            "hoist3 is at distributor0",
            "pallet0 is at depot0",
            "pallet1 is at depot1",
            "pallet2 is at depot2",
            "pallet3 is at distributor0",
            "truck0 is at distributor0",
            "truck1 is at depot0",
            "truck2 is at depot0",
            "hoist0 is available",
            "hoist1 is available",
            "hoist2 is available",
            "hoist3 is available",
            "crate2 is clear",
            "pallet1 is clear",
            "pallet2 is clear",
            "pallet3 is clear",
            "crate0 is on pallet0",
            "crate1 is on crate0",
            "crate2 is on crate1"
        ],
        "goal": [
            "crate0 is on pallet1",
            "crate1 is on crate2",
            "crate2 is on pallet0"
        ],
        "domain_notes": [
            "All agents should keep action names and object names consistent so the orchestrator can integrate them.",
            "The final PDDL must be compatible with the FastDownward planner."
        ]
    },
    "workflow": {
        "depot_manager": {
            "analyze": {
                "input": [],
                "output": "facts_depot_manager",
                "system_prompt": "You are the depot manager analyst. Your job is to read the public information and the initial_state and produce a structured JSON facts file listing all objects (places, depots, distributors, pallets, crates, trucks, hoists), their types, all 'at' relations, and stacking relations (on). Do not emit PDDL. Provide no assumptions beyond the given initial facts. The output should be a compact structured representation suitable for consumption by an orchestrator.",
                "prompt": "As depot_manager, extract objects and ground facts from the environment public information and initial_state: {environment->initial_state}. Produce the facts as a structured JSON-like object containing lists of objects by type and explicit predicates (at, on)."
            }
        },
        "hoist_operator": {
            "analyze": {
                "input": [],
                "output": "spec_hoist_operator",
                "system_prompt": "You are the hoist operator specialist. Your job is to produce structured action schema specifications for hoist actions: lift, drop, load, unload. For each action provide: name, parameters with types, precise preconditions and effects expressed as lists of positive and negative literals over predicates (e.g., at, available, lifting, clear, on, in-truck). Do not produce PDDL. Keep the specifications explicit so they can be translated mechanically to PDDL by the orchestrator.",
                "prompt": "As hoist_operator, formalize hoist action schemas and their preconditions and effects in a structured form that the orchestrator can use to assemble a PDDL domain."
            }
        },
        "truck_driver": {
            "analyze": {
                "input": [],
                "output": "spec_truck_driver",
                "system_prompt": "You are the truck driving specialist. Your job is to describe the drive action as a structured action schema: name, parameters (truck, from, to), preconditions and effects (including location updates for the truck and implications for crates in-truck). Do not produce PDDL. Make clear any assumptions about trucks carrying crates and how 'in-truck' is modeled so the orchestrator can integrate it.",
                "prompt": "As truck_driver, provide a precise structured specification of drive(truck,from,to) including preconditions and effects."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "facts_depot_manager",
                    "spec_hoist_operator",
                    "spec_truck_driver"
                ],
                "output": "audit_report",
                "system_prompt": "You are the temporal and causal auditor. Your task is to inspect the structured facts and action specifications and produce an audit_report that (1) detects causal or temporal inconsistencies, (2) identifies and removes bookkeeping shortcuts (for example ad-hoc tokens, quotas, implicit post-hoc penalties), and (3) proposes explicit predicates and modifications to action preconditions/effects to preserve causal correctness. Provide corrective annotations in a structured form so the orchestrator can apply them. Do not produce PDDL.",
                "prompt": "As auditor, analyze the inputs: {workflow->depot_manager->analyze->output}, {workflow->hoist_operator->analyze->output}, {workflow->truck_driver->analyze->output}. Emit a structured audit_report with corrections and explicit recommended predicates and constraints."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "facts_depot_manager",
                    "spec_hoist_operator",
                    "spec_truck_driver",
                    "audit_report"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are the orchestrator responsible for producing the final PDDL domain and problem targeted to the FastDownward planner. Integrate the structured facts, action schemas and the auditor's corrections to produce a single coherent PDDL domain and PDDL problem. Ensure typing, consistent predicate naming, and include :requirements that are supported by FastDownward (for example :strips :typing :negative-preconditions only if justified). Keep agent actions distinct where relevant. Enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags. The output must be a complete PDDL domain and problem ready for FastDownward.",
                "prompt": "You receive the following inputs from other agents and the auditor:\n{pddl_inputs}\nIntegrate them to produce a final PDDL domain and PDDL problem that achieves the goal: {environment->goal} from the initial facts {environment->initial_state}. Enclose domain between <domain></domain> and problem between <problem></problem>. Target FastDownward."
            }
        },
        "constraints": [
            "depot_manager.analyze->orchestrator.pddl",
            "hoist_operator.analyze->orchestrator.pddl",
            "truck_driver.analyze->orchestrator.pddl",
            "auditor.audit->orchestrator.pddl"
        ]
    },
    "constraints": [
        "depot_manager.analyze->orchestrator.pddl",
        "hoist_operator.analyze->orchestrator.pddl",
        "truck_driver.analyze->orchestrator.pddl",
        "auditor.audit->orchestrator.pddl"
    ]
}