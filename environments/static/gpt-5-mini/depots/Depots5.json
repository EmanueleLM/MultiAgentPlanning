{
    "name": "Depots5",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "truck_driver",
            "hoist_operator",
            "auditor",
            "orchestrator"
        ],
        "truck_driver": {
            "private_information": [
                "I control trucks truck0 truck1 truck2",
                "Trucks may be driven only when they are at the origin place",
                "Driving moves a truck from origin to destination so it is no longer at the origin and is at the destination"
            ],
            "goal": "Deliver crates so that crate1 is on pallet1 and crate2 is on pallet2."
        },
        "hoist_operator": {
            "private_information": [
                "I control hoists hoist0 hoist1 hoist2 hoist3",
                "Hoists can lift crates from surfaces, drop crates to surfaces, load crates into trucks, and unload crates from trucks when the hoist and objects are appropriately co-located and available",
                "Lifting makes the hoist busy and removes the crate from its surface, dropping or loading updates crate placement and hoist availability accordingly"
            ],
            "goal": "Coordinate hoist operations to enable placement of crate1 on pallet1 and crate2 on pallet2."
        },
        "auditor": {
            "private_information": [
                "I audit temporal and causal consistency and remove bookkeeping shortcuts such as quota tokens and post-hoc penalties",
                "I look for implicit assumptions and ensure explicit preconditions and effects for actions"
            ],
            "goal": "Ensure the plan is temporally and causally consistent and that no bookkeeping shortcuts remain."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate reports and produce a final PDDL domain and problem targeting the FastDownwards solver that achieves crate1 on pallet1 and crate2 on pallet2."
        }
    },
    "environment": {
        "init": {
            "grid_size": 5,
            "visibility": 2
        },
        "public_information": [
            "Depot is a type of place",
            "Distributor is a type of place",
            "Pallet is a type of surface",
            "Crate is a type of surface",
            "Trucks can drive between any two depots or distributors using roads",
            "Actions available are drive a truck, hoist lift, hoist drop, hoist load, and hoist unload",
            "A truck can be driven only if the truck is at the origin place and then it ends at the destination and not at the origin",
            "A hoist can lift a crate only if the hoist is at the same place as the crate, the hoist is available, and the crate is clear",
            "After a lift the crate is held by the hoist, the hoist is not available, the crate is not at the place or on the surface, and the formerly occupied surface becomes clear",
            "A hoist can drop a crate to a surface only if the hoist and the surface are at the same place, the surface is clear, and the hoist is lifting the crate",
            "After a drop the hoist becomes available, the hoist is not lifting the crate, the crate is at the place and on the surface, the surface becomes not clear, and the crate becomes clear",
            "A hoist can load a crate into a truck only if the hoist and the truck are at the same place and the hoist is lifting the crate",
            "After a load the crate becomes inside the truck and no longer on a surface and the hoist becomes available and is not lifting the crate unless explicitly specified otherwise",
            "A hoist can unload a crate from a truck only if the hoist and the truck are at the same place, the hoist is available, and the crate is in the truck",
            "After an unload the crate is not in the truck and the hoist becomes not available while lifting the crate"
        ],
        "initial_state": [
            "crate0 is at distributor0",
            "crate1 is at distributor0",
            "crate2 is at distributor0",
            "hoist0 is at depot0",
            "hoist1 is at depot1",
            "hoist2 is at depot2",
            "hoist3 is at distributor0",
            "pallet0 is at depot0",
            "pallet1 is at depot1",
            "pallet2 is at depot2",
            "pallet3 is at distributor0",
            "truck0 is at depot0",
            "truck1 is at depot0",
            "truck2 is at depot1",
            "hoist0 is available",
            "hoist1 is available",
            "hoist2 is available",
            "hoist3 is available",
            "crate2 is clear",
            "pallet0 is clear",
            "pallet1 is clear",
            "pallet2 is clear",
            "crate0 is on pallet3",
            "crate1 is on crate0",
            "crate2 is on crate1"
        ],
        "goal": [
            "crate1 is on pallet1",
            "crate2 is on pallet2"
        ]
    },
    "workflow": {
        "truck_driver": {
            "report": {
                "input": [],
                "output": "report_truck_driver",
                "system_prompt": "You are a domain expert for truck routing and scheduling in symbolic logistics problems. Produce a clear, structured report describing truck capabilities, the current truck locations from the initial state, explicit preconditions and effects for driving actions expressed in plain symbolic form, and a high level ordered sequence of truck movements that you believe are necessary to support the global goal. Do not emit PDDL files. Focus on correctness, explicitness of preconditions, and any assumptions you make.",
                "prompt": "Agent truck_driver. Use the public information {environment->public_information} and your private information {agents->truck_driver->private_information}. Use the initial state {environment->initial_state} and the global goal {environment->goal}. Provide a structured report describing truck roles, valid drive transitions, necessary drive sequences to support crate movement, and any unresolved assumptions. Think step by step."
            }
        },
        "hoist_operator": {
            "report": {
                "input": [],
                "output": "report_hoist_operator",
                "system_prompt": "You are an expert on hoist operations and object manipulation in symbolic logistics. Produce a precise, structured report that lists hoist capabilities, explicit preconditions and effects for lift, drop, load, and unload actions in symbolic terms, which hoists are initially where, the surfaces and crates status, and a recommended sequence of hoist operations to enable the goal placements. Do not produce PDDL files. Emphasize preconditions, concurrency constraints, and resource availability.",
                "prompt": "Agent hoist_operator. Use the public information {environment->public_information} and your private information {agents->hoist_operator->private_information}. Use the initial state {environment->initial_state} and the global goal {environment->goal}. Provide a structured report describing hoist capabilities, preconditions and effects for lift, drop, load and unload, recommended hoist action sequences, and any assumptions or potential conflicts. Think step by step."
            }
        },
        "auditor": {
            "report": {
                "input": [],
                "output": "report_audit",
                "system_prompt": "You are an auditor specializing in temporal and causal consistency for multi-agent plans. Produce a report that inspects incoming plans and reports temporal ordering issues, missing causal links, implicit bookkeeping shortcuts, and recommends explicit constraints to remove such shortcuts. Identify places where concurrency or ordering must be enforced and suggest minimal additional preconditions or ordering constraints. Do not emit PDDL files.",
                "prompt": "Agent auditor. Use the public information {environment->public_information}, the initial state {environment->initial_state}, and the global goal {environment->goal}. Analyze prospective reports from truck_driver and hoist_operator and provide a consistency audit highlighting causal dependencies, temporal constraints, and removal of bookkeeping shortcuts. Produce explicit recommendations and any required clarifications. Think step by step."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "report_truck_driver",
                    "report_hoist_operator",
                    "report_audit"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in multi-agent PDDL modelling and planning. Your task is to integrate the structured reports from the truck driver, the hoist operator, and the auditor to produce a complete PDDL domain and a PDDL problem suitable for the FastDownwards solver. Keep actions of different agents distinct by prefixing or otherwise namespacing agent-specific actions. Be explicit about types, predicates, objects, initial state, and goal. Enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags. Target FastDownwards compatibility and avoid shortcuts. Think step by step.",
                "prompt": "Agent orchestrator. You will receive the following inputs: the truck driver report {report_truck_driver}, the hoist operator report {report_hoist_operator}, and the auditor report {report_audit}. Your job is to integrate these inputs to produce a final PDDL domain and problem that achieves the global goal crate1 on pallet1 and crate2 on pallet2. Ensure agent actions remain distinct and that the model includes all preconditions and effects identified by the auditor. Enclose the PDDL domain between <domain></domain> and the PDDL problem between <problem></problem>. Think step by step."
            }
        },
        "constraints": [
            "truck_driver.report->orchestrator.pddl",
            "hoist_operator.report->orchestrator.pddl",
            "auditor.report->orchestrator.pddl"
        ]
    }
}