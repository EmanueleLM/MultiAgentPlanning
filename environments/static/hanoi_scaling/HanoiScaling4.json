{
    "name": "HanoiScaling4",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "planner",
            "auditor",
            "orchestrator"
        ],
        "planner": {
            "private_information": [
                "I can move the top disk from one peg to another peg.",
                "I must obey the Tower of Hanoi rules: move only one disk at a time, move only a top disk, never place a larger disk on a smaller disk.",
                "There are 7 disks named from smallest to largest: A, B, C, D, E, F, G."
            ],
            "goal": "Find a complete, legal sequence of moves that moves all disks from the left peg to the middle peg, leaving left and right pegs empty. The right peg may be used as an intermediate but must end empty."
        },
        "auditor": {
            "private_information": [
                "I audit temporal and causal consistency of plans.",
                "I remove or flag bookkeeping shortcuts such as quota tokens, post-hoc penalties, or other artifacts that make a plan appear legal but violate the pure state-based rules."
            ],
            "goal": "Verify that the planner's move sequence strictly respects the Tower of Hanoi constraints and contains no bookkeeping shortcuts. Provide corrections or a clear violation report if any step is illegal."
        },
        "orchestrator": {
            "private_information": [
                "I integrate outputs from other agents and produce the final PDDL domain and problem targeting the FastDownwards solver."
            ],
            "goal": "Assemble a complete, solver-ready PDDL domain and PDDL problem that models the Tower of Hanoi instance with 7 disks, consistent with the planner and auditor outputs, and suitable for FastDownwards."
        }
    },
    "environment": {
        "init": {
            "pegs": [
                "left",
                "middle",
                "right"
            ],
            "disks": [
                "A",
                "B",
                "C",
                "D",
                "E",
                "F",
                "G"
            ],
            "start": {
                "left": [
                    "A",
                    "B",
                    "C",
                    "D",
                    "E",
                    "F",
                    "G"
                ],
                "middle": [],
                "right": []
            },
            "goal": {
                "left": [],
                "middle": [
                    "A",
                    "B",
                    "C",
                    "D",
                    "E",
                    "F",
                    "G"
                ],
                "right": []
            },
            "move_action": "Move the top disk from one peg to another peg"
        },
        "public_information": [
            "There are three pegs: left, middle, right.",
            "There are seven disks ordered from smallest to largest: A, B, C, D, E, F, G.",
            "Initial state: left peg holds, from top to bottom, A B C D E F G. Middle and right pegs are empty.",
            "Goal state: middle peg holds, from top to bottom, A B C D E F G. Left and right pegs must be empty.",
            "Rules: move one disk at a time; only the top disk of a peg may be moved; never place a larger disk on top of a smaller disk.",
            "The right peg may be used as an intermediate but must end empty."
        ]
    },
    "workflow": {
        "planner": {
            "plan": {
                "input": [],
                "output": "plan_planner",
                "system_prompt": "You are an expert planner for combinatorial puzzles and search problems. Your role is to produce a concrete, ordered sequence of legal moves for the Tower of Hanoi instance described in the environment. Do not emit PDDL. Represent each step explicitly, for example: move disk A from left to middle. Explain briefly why each move is legal relative to disk ordering and the peg top constraint.",
                "prompt": "Your name is planner. Use the public information: {environment->public_information}. Use your private knowledge: {agents->planner->private_information}. The task goal is: {agents->planner->goal}. Produce a complete ordered list of moves that transfers all disks from the left peg to the middle peg while respecting all rules. Do not produce PDDL. If you require clarification about any missing detail, state what is missing instead of assuming it."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "plan_planner"
                ],
                "output": "audit_report",
                "system_prompt": "You are an expert auditor of temporal and causal consistency in plans. Your role is to validate that each step in the provided move sequence is legal under the Tower of Hanoi rules and that the overall plan contains no bookkeeping shortcuts such as tokens, counters, or post-hoc penalties. Provide a step-by-step validation, identify the earliest illegal step if any, and if possible provide minimal corrections to restore legality. Do not produce PDDL.",
                "prompt": "Your name is auditor. You receive the planner's proposed move sequence: {plan_planner}. Use the public information: {environment->public_information}. Use your private knowledge: {agents->auditor->private_information}. The verification goal is: {agents->auditor->goal}. Check temporal ordering, top-disk preconditions, and the size ordering invariant for every move. Output a clear audit report suitable for the orchestrator to consume."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "plan_planner",
                    "audit_report"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in multi-agent PDDL and in preparing solver-ready encodings for FastDownwards. Your task is to integrate the planner's move sequence and the auditor's report to produce a complete PDDL domain and a PDDL problem file that models the Tower of Hanoi instance with seven disks and three pegs. The PDDL must be compatible with FastDownwards conventions: declare types, predicates, action schemas, initial state, and the goal. Enclose the domain between <domain></domain> tags and the problem between <problem></problem> tags. Ensure the model enforces the one-disk-at-a-time and size constraints and does not rely on bookkeeping shortcuts.",
                "prompt": "You are the orchestrator. You have the public information: {environment->public_information}. You have the planner output: {plan_planner}. You have the auditor output: {audit_report}. Your objective is: {agents->orchestrator->goal}. Integrate the inputs, resolve any naming mismatches or ambiguities, and emit a PDDL domain and problem suitable for FastDownwards. Keep the representation minimal but fully explicit: include types for pegs and disks, a predicate for disk-on-disk and disk-on-peg relations, a predicate for top-of-peg if used, and action schemas that enforce preconditions and effects consistent with the Tower of Hanoi rules. Enclose the PDDL domain between <domain></domain> and the PDDL problem between <problem></problem>."
            }
        },
        "constraints": [
            "planner.plan->auditor.audit",
            "planner.plan->orchestrator.pddl",
            "auditor.audit->orchestrator.pddl"
        ]
    }
}