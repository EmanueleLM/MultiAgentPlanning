{
    "name": "Logistics2",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "player",
            "auditor",
            "orchestrator"
        ],
        "player": {
            "private_information": [
                "I am the primary actor who executed and proposed plans involving actions: paltry, sip, clip, wretched, memory, tightfisted.",
                "I have access to the action schemas (preconditions and effects) and two scenario statements with initial facts and goals.",
                "I proposed a concrete plan sequence in the first scenario: memory object_0 object_6 object_5; sip object_8 object_0 object_5; memory object_0 object_5 object_6; paltry object_8 object_0 object_6."
            ],
            "goal": "Analyze planned action sequences against the provided action schemas and initial facts; report applicability, missing preconditions, and intermediate state changes."
        },
        "auditor": {
            "private_information": [
                "I am responsible for auditing temporal and causal consistency and removing bookkeeping shortcuts (e.g., token-like assumptions, post-hoc penalties).",
                "I focus on detecting implicit assumptions, name mismatches, and any post-hoc fixes that make plans appear valid without proper causal justification."
            ],
            "goal": "Produce an audit report that normalizes naming, highlights causal/temporal violations, and suggests concrete fixes to make plans causally correct."
        },
        "orchestrator": {
            "private_information": [
                "I receive structured analyses and audit reports from other agents and must integrate them into a final planning artifact."
            ],
            "goal": "Produce a final PDDL domain and problem (suitable for the FastDownward solver) that captures the corrected action models, initial facts, and goal for each scenario."
        }
    },
    "environment": {
        "init": {
            "grid_size": 9,
            "visibility": 1
        },
        "public_information": [
            "Objects: object_0 ... object_8 (indices used in plans and facts).",
            "Actions available and their informal schemas (preconditions -> add effects / delete effects):",
            "paltry(object_0,object_1,object_2): requires hand object_0, cats object_1, texture object_2, vase object_0 object_1, next object_1 object_2. Effects: adds next object_0 object_2; deletes vase object_0 object_1.",
            "sip(object_0,object_1,object_2): requires hand object_0, cats object_1, texture object_2, next object_0 object_2, next object_1 object_2. Effects: adds vase object_0 object_1; deletes next object_0 object_2.",
            "clip(object_0,object_1,object_2): requires hand object_0, sneeze object_1, texture object_2, next object_1 object_2, next object_0 object_2. Effects: adds vase object_0 object_1; deletes next object_0 object_2.",
            "wretched(object_0,object_1,object_2,object_3): requires sneeze object_0, texture object_1, texture object_2, stupendous object_3, next object_0 object_1, collect object_1 object_3, collect object_2 object_3. Effects: adds next object_0 object_2; deletes next object_0 object_1.",
            "memory(object_0,object_1,object_2): requires cats object_0, spring object_1, spring object_2, next object_0 object_1. Effects: adds next object_0 object_2; deletes next object_0 object_1.",
            "tightfisted(object_0,object_1,object_2): requires hand object_0, sneeze object_1, texture object_2, next object_1 object_2, vase object_0 object_1. Effects: adds next object_0 object_2; deletes vase object_0 object_1.",
            "Initial scenario 1 facts: cats object_0, collect object_5 object_1, collect object_6 object_2, hand object_7, hand object_8, next object_0 object_6, next object_3 object_5, next object_4 object_6, next object_7 object_6, next object_8 object_6, sneeze object_3, sneeze object_4, spring object_5, spring object_6, stupendous object_1, stupendous object_2, texture object_5, texture object_6.",
            "Goal for scenario 1: next object_7 object_6 AND next object_8 object_6.",
            "Proposed plan for scenario 1 (by player): memory object_0 object_6 object_5; sip object_8 object_0 object_5; memory object_0 object_5 object_6; paltry object_8 object_0 object_6.",
            "Initial scenario 2 facts: cats object_0, collect object_5 object_1, collect object_6 object_2, hand object_7, hand object_8, next object_0 object_6, next object_3 object_5, next object_4 object_6, next object_7 object_6, next object_8 object_6, sneeze object_3, sneeze object_4, spring object_5, spring object_6, stupendous object_1, stupendous object_2, texture object_5, texture object_6.",
            "Goal for scenario 2: next object_7 object_5 AND next object_8 object_5.",
            "Note: planners should not rely on bookkeeping shortcuts (implicit tokens, ad-hoc state renaming) and must justify each deleted/added fluent causally from action effects."
        ]
    },
    "workflow": {
        "player": {
            "analyze": {
                "input": [],
                "output": "player_analysis",
                "system_prompt": "You are an analyst that inspects proposed plans and the provided action schemas. You do NOT emit PDDL. Instead, you extract structured observations about applicability and state transitions. Provide a concise structured report (JSON-like text is fine) that lists for each plan step: the action instance, whether all preconditions are satisfied given the stated initial facts or preceding effects, any missing preconditions, the exact add and delete effects that would apply, and the resulting intermediate state after each step. If you detect ambiguous naming or unclear object references, flag them clearly.",
                "prompt": "Your name is player. You have the environment public information:\n{environment->public_information}\nYou have the following private knowledge:\n{agents->player->private_information}\nThis is your operational goal:\n{agents->player->goal}\nThink step by step. Do not produce a PDDL domain or problem. Produce a structured applicability and state-change report for the proposed plan(s)."
            }
        },
        "auditor": {
            "audit": {
                "input": [
                    "player_analysis"
                ],
                "output": "audit_report",
                "system_prompt": "You are an auditor specialized in temporal and causal consistency. You do NOT produce PDDL. Your job is to detect and remove bookkeeping shortcuts, normalize naming mismatches, identify where temporal ordering is insufficient or impossible, and propose concrete, minimal corrections to action preconditions/effects or to the plan ordering so the sequence becomes causally valid. Output a clear report with: (1) normalized facts and names, (2) detected violations, (3) suggested fixes, and (4) a short justification for each suggested change.",
                "prompt": "Your name is auditor. You receive the player's structured analysis:\n{player_analysis}\nYou have the following private knowledge:\n{agents->auditor->private_information}\nThis is your operational goal:\n{agents->auditor->goal}\nThink step by step. Produce an audit_report that normalizes names, removes bookkeeping shortcuts, and lists concrete corrections (no PDDL)."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "player_analysis",
                    "audit_report"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in multi-scenario PDDL modeling and know the FastDownward planner requirements. You will produce a PDDL domain and one or more PDDL problem files that encode the corrected action models, the validated initial facts, and the scenario goals. Target the FastDownward solver (use STRIPS-style constructs compatible with it). Enclose the PDDL domain between <domain></domain> tags and each PDDL problem between <problem></problem> tags. If there are multiple scenarios, provide one problem per scenario and clearly label them. Preserve distinct agent/action identities where relevant; resolve naming mismatches using the auditor's normalization. If an action or precondition must be adjusted to make the plan valid, integrate the auditor's suggested fixes; document any such changes briefly in a comment block at the top of the domain/problem pair.",
                "prompt": "There are contributions from two agents and audit artifacts. Integrate them and output a final PDDL domain and problem(s) to be solved by FastDownward.\nEnvironment public information:\n{environment->public_information}\nPlayer analysis:\n{player_analysis}\nAudit report:\n{audit_report}\nYour task is to produce a consistent PDDL domain and PDDL problem(s) that reflect the corrected models and initial states. Enclose the PDDL domain between <domain></domain> tags, and each PDDL problem between <problem></problem> tags. Make the PDDL suitable for FastDownward."
            }
        },
        "constraints": [
            "player.analyze->auditor.audit",
            "player.analyze->orchestrator.pddl",
            "auditor.audit->orchestrator.pddl"
        ]
    }
}