{
    "name": "Logistics2",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "truck_operator",
            "airplane_operator",
            "auditor",
            "orchestrator"
        ],
        "truck_operator": {
            "private_information": [
                "There is exactly one truck per city",
                "Trucks can drive between any two locations inside the same city",
                "A package can be loaded into or unloaded from a truck at the truck's current location"
            ],
            "goal": "Provide a complete and precise formal model of truck-related actions, instances and constraints for moving packages inside cities."
        },
        "airplane_operator": {
            "private_information": [
                "Each city has exactly one airport location",
                "Airplanes can fly between airports in different cities",
                "A package can be loaded into or unloaded from an airplane at the airplane's current location"
            ],
            "goal": "Provide a complete and precise formal model of airplane-related actions, instances and constraints for moving packages between cities."
        },
        "auditor": {
            "private_information": [
                "I check temporal and causal consistency across models",
                "I remove bookkeeping shortcuts and ensure the models are realistic for planner use"
            ],
            "goal": "Audit the agent models for causal correctness, remove implicit shortcuts, and produce an audit report of required model corrections and clarifications."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate agent models and the auditor report and produce a final PDDL domain and problem compatible with the FastDownwards solver that achieves the global logistics goal."
        }
    },
    "environment": {
        "init": {
            "cities": [
                "city_0",
                "city_1"
            ],
            "locations": [
                "location_0_0",
                "location_1_0"
            ],
            "airports": [
                "location_0_0",
                "location_1_0"
            ],
            "trucks": [
                "truck_0",
                "truck_1"
            ],
            "airplanes": [
                "airplane_0"
            ],
            "packages": [
                "package_0",
                "package_1"
            ],
            "initial_facts": [
                "location_0_0 is an airport",
                "location_1_0 is an airport",
                "airplane_0 is at location_1_0",
                "package_0 is at location_1_0",
                "package_1 is at location_1_0",
                "truck_0 is at location_0_0",
                "truck_1 is at location_1_0",
                "location_0_0 is in city_0",
                "location_1_0 is in city_1",
                "There is exactly one truck per city",
                "Each city has exactly one airport location"
            ]
        },
        "public_information": [
            "Locations within a city are directly connected by truck movement",
            "Cities are directly connected by airplane flights between their airports",
            "Loading into a vehicle requires the package and vehicle to be in the same location",
            "After loading into a vehicle the package is no longer at the location and is in the vehicle",
            "After unloading from a vehicle the package is no longer in the vehicle and is at the vehicle location",
            "Driving a truck between two locations is allowed only when both locations belong to the same city",
            "Flying an airplane between two airports moves the airplane from the source airport to the destination airport"
        ]
    },
    "workflow": {
        "truck_operator": {
            "model": {
                "input": [],
                "output": "truck_model",
                "system_prompt": "You are an expert in formal action modeling for logistical domains with trucks. Produce a precise structured description of truck-related domain elements including action schemas, parameters, preconditions, effects, relevant fluents, and instance declarations. Do not emit PDDL; instead provide a clear machine-readable sketch of the truck part of the domain that an integrator can transform into PDDL.",
                "prompt": "Your name is truck_operator. You have the following public information: {environment->public_information}. You have the following private information: {agents->truck_operator->private_information}. Use the initial facts {environment->init->initial_facts} and the global goal that package_0 and package_1 should be at location_0_0 to produce a structured description of truck actions and instances. Describe action schemas for loading a package into a truck, unloading a package from a truck, and driving a truck between locations in the same city. For each action provide parameters, precise preconditions, and precise effects, and list any required typing or invariants. If some information is missing, state what is missing instead of assuming it."
            }
        },
        "airplane_operator": {
            "model": {
                "input": [],
                "output": "airplane_model",
                "system_prompt": "You are an expert in formal action modeling for logistical domains with airplanes. Produce a precise structured description of airplane-related domain elements including action schemas, parameters, preconditions, effects, relevant fluents, and instance declarations. Do not emit PDDL; instead provide a clear machine-readable sketch of the airplane part of the domain that an integrator can transform into PDDL.",
                "prompt": "Your name is airplane_operator. You have the following public information: {environment->public_information}. You have the following private information: {agents->airplane_operator->private_information}. Use the initial facts {environment->init->initial_facts} and the global goal that package_0 and package_1 should be at location_0_0 to produce a structured description of airplane actions and instances. Describe action schemas for loading a package into an airplane, unloading a package from an airplane, and flying an airplane between airport locations in different cities. For each action provide parameters, precise preconditions, and precise effects, and list any required typing or invariants. If some information is missing, state what is missing instead of assuming it."
            }
        },
        "auditor": {
            "audit": {
                "input": [],
                "output": "audit_report",
                "system_prompt": "You are an expert auditor of multi-agent domain models. Your job is to verify temporal and causal consistency, detect and remove bookkeeping shortcuts, and provide a list of corrections, required clarifications, and additional constraints that make the models safe for automated planning. Produce a concise audit report enumerating issues and recommended fixes.",
                "prompt": "Your name is auditor. You have the following public information: {environment->public_information}. You have the following private information: {agents->auditor->private_information}. Inspect the expected kinds of model fragments the other agents will produce for truck and airplane actions. Identify temporal or causal inconsistencies such as implicit simultaneous moves, missing effects that break invariants, implicit capacity assumptions, or reliance on bookkeeping tokens. Provide a prioritized list of corrections and explicit statements to be incorporated into the final model. If you require clarifications, list precise questions."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "truck_model",
                    "airplane_model",
                    "audit_report"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in multi-agent PDDL modeling and integration. Your final output must be a complete PDDL domain and a PDDL problem targeting the FastDownwards planner. Enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags. Keep actions contributed by different agents distinct by prefixing action names or grouping them. Apply the auditor recommendations to remove shortcuts and ensure causal and temporal correctness. Validate that initial facts and goal state match the provided initial facts and global goal.",
                "prompt": "You are the orchestrator. Integrate the following inputs: the truck model {truck_model}, the airplane model {airplane_model}, and the audit report {audit_report}. Use the environment public information {environment->public_information} and initial facts {environment->init->initial_facts}. Produce a single coherent PDDL domain and a single PDDL problem suitable for FastDownwards such that the goal package_0 at location_0_0 and package_1 at location_0_0 is achievable. Keep actions of trucks and airplanes distinct. If some inputs are incomplete or ambiguous, resolve them explicitly and document each resolution as comments in the problem preface before emitting the PDDL."
            }
        },
        "constraints": [
            "truck_operator.model->orchestrator.pddl",
            "airplane_operator.model->orchestrator.pddl",
            "auditor.audit->orchestrator.pddl"
        ]
    }
}