{
    "name": "TripPlanningExample0",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "traveler",
            "flight_checker",
            "orchestrator"
        ],
        "traveler": {
            "private_information": [
                "I will travel for exactly 14 consecutive days (days 1 through 14).",
                "I would like to spend 6 days in Florence.",
                "I would like to spend 5 days in Barcelona.",
                "I would like to spend 5 days in Helsinki.",
                "I want to meet a friend in Florence on a day between day 9 and day 14 (inclusive).",
                "I will only take direct flights between cities."
            ],
            "goal": "Find a feasible 14-day trip plan that visits Florence, Barcelona, and Helsinki using only direct flights, ensures a meeting in Florence between day 9 and day 14, and satisfies as many of the desired city-stay durations as possible."
        },
        "flight_checker": {
            "private_information": [
                "Direct flights exist between Barcelona and Florence.",
                "Direct flights exist between Helsinki and Barcelona.",
                "There is no direct flight between Florence and Helsinki."
            ],
            "goal": "Identify feasible city visitation orders and transfer patterns that respect direct-flight connectivity for a 14-day trip visiting Florence, Barcelona, and Helsinki."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate preferences and route feasibility into a single consistent planning model and produce a PDDL domain and problem suitable for the FastDownwards solver that yields a 14-day trip plan meeting the hard constraints."
        }
    },
    "environment": {
        "init": {
            "total_days": 14,
            "day_index_start": 1,
            "day_index_end": 14,
            "cities": [
                "Florence",
                "Barcelona",
                "Helsinki"
            ],
            "direct_flights": [
                [
                    "Barcelona",
                    "Florence"
                ],
                [
                    "Florence",
                    "Barcelona"
                ],
                [
                    "Helsinki",
                    "Barcelona"
                ],
                [
                    "Barcelona",
                    "Helsinki"
                ]
            ],
            "time_unit": "day"
        },
        "public_information": [
            "The trip lasts exactly 14 consecutive days, labeled day 1 through day 14.",
            "The cities to visit are Florence, Barcelona, and Helsinki.",
            "Direct flights exist between Barcelona and Florence, and between Helsinki and Barcelona.",
            "There is no direct flight between Florence and Helsinki.",
            "The traveler would like to spend 6 days in Florence, 5 days in Barcelona, and 5 days in Helsinki; these desires may conflict with the 14-day total and should be treated as soft preferences if necessary.",
            "The traveler must meet a friend in Florence on a day between day 9 and day 14 inclusive while staying in Florence.",
            "Only direct flights are allowed between cities."
        ]
    },
    "workflow": {
        "traveler": {
            "state_preferences": {
                "input": [],
                "output": "preferences_doc",
                "system_prompt": "You are a trip preference analyst. Produce a concise JSON object that separates hard constraints from soft preferences, clarifies the meeting window in Florence, and states the total 14-day requirement.",
                "prompt": "Your name is traveler. Using the public information {environment->public_information} and your knowledge {agents->traveler->private_information}, transform the requirements into a compact JSON with fields: hard_constraints, soft_preferences, meeting_window, city_set, total_days. Hard constraints must include exactly 14 total days, direct flights only, and meeting in Florence between day 9 and day 14. Soft preferences should capture the desired day counts per city with indicative weights."
            }
        },
        "flight_checker": {
            "build_graph": {
                "input": [],
                "output": "flight_graph",
                "system_prompt": "You are a connectivity and routing specialist. Summarize the flight graph and implications for feasible inter-city sequences without assuming any specific day allocations.",
                "prompt": "Your name is flight_checker. Based on the public information {environment->public_information} and your knowledge {agents->flight_checker->private_information}, produce a JSON object with fields: cities, edges (bidirectional direct flights), notes (e.g., no direct flight between Florence and Helsinki implies Barcelona must be used to transfer)."
            },
            "enumerate_routes": {
                "input": [
                    "flight_graph"
                ],
                "output": "route_templates",
                "system_prompt": "Enumerate city visitation orders consistent with the flight graph, including variants that either do not revisit cities or that allow revisiting Barcelona as a transfer hub when moving between Florence and Helsinki.",
                "prompt": "Using the flight graph {flight_graph}, output a JSON list named templates of candidate city sequences covering all three cities while respecting direct flights. Include at least these variants: [Florence, Barcelona, Helsinki] and [Helsinki, Barcelona, Florence]. Also include transfer-hub variants that revisit Barcelona if needed, while noting that any stay in Barcelona can be contiguous or split across two visits."
            }
        },
        "orchestrator": {
            "synthesize_pddl": {
                "input": [
                    "preferences_doc",
                    "route_templates"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in multi-constraint trip planning and PDDL modeling targeting the FastDownwards solver (Fast Downward). You must produce a PDDL domain and a PDDL problem that together can be solved by FastDownwards. Model days and cities explicitly, enforce exactly 14 total day assignments, allow only flights along direct-flight edges, ensure the meeting occurs in Florence on a day between 9 and 14 while staying in Florence, and treat desired city-day counts as soft preferences via action costs with :metric minimize (total-cost). Encode stay and fly actions with appropriate preconditions and effects and include a total-cost function; ensure the model supports both single-visit and Barcelona-revisit templates. Always enclose the PDDL domain between <domain></domain> and the PDDL problem between <problem></problem> tags.",
                "prompt": "Integrate these elements: public context {environment->public_information}, traveler preferences {preferences_doc}, and route templates {route_templates}. Produce a coherent PDDL domain and problem that can be solved with FastDownwards, includes all days (1..14) and cities as objects, uses action costs to penalize deviations from preferred city stay counts, forbids non-direct flights, and enforces the Florence meeting between day 9 and day 14 while the agent is in Florence. Output only the PDDL domain and problem wrapped in the specified tags."
            }
        },
        "constraints": [
            "flight_checker.build_graph->flight_checker.enumerate_routes",
            "traveler.state_preferences->orchestrator.synthesize_pddl",
            "flight_checker.enumerate_routes->orchestrator.synthesize_pddl"
        ]
    }
}