{
    "name": "TripPlanningExample1",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "preference_agent",
            "flight_agent",
            "orchestrator"
        ],
        "preference_agent": {
            "private_information": [
                "Requested stays: Split 6 days, Manchester 4 days, Riga 7 days.",
                "Total trip length is 15 days.",
                "Sum of requested stays equals 17 days, which exceeds the total by 2 days."
            ],
            "goal": "Normalize the requested stay durations into a feasible 15-day allocation while keeping deviations from the requests as small as possible and maintaining integer, non-negative day counts per city."
        },
        "flight_agent": {
            "private_information": [
                "Direct flights are available between Riga and Manchester (both directions).",
                "A direct flight exists from Manchester to Split.",
                "There is no known direct flight from Split to Manchester, nor between Riga and Split."
            ],
            "goal": "Represent the direct-flight network and identify feasible city visit orders that use only direct flights and visit all three cities."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Coordinate preference and flight analyses and compile a final PDDL domain and problem for Fast Downward that yields a 15-day itinerary using only direct flights and a reconciled allocation of days per city."
        }
    },
    "environment": {
        "init": {
            "planning_horizon_days": 15,
            "cities": [
                "Split",
                "Manchester",
                "Riga"
            ],
            "must_use_direct_flights": true
        },
        "public_information": [
            "You will visit exactly three European cities: Split, Manchester, and Riga.",
            "The total trip duration is 15 days.",
            "You only take direct flights to commute between cities.",
            "Requested stays are: Split 6 days, Manchester 4 days, Riga 7 days.",
            "Known direct flights: Riga <-> Manchester; Manchester -> Split.",
            "There is no stated direct flight Split -> Manchester or any direct flight between Riga and Split.",
            "The requested stays sum to 17 days, which conflicts with the 15-day total and requires reconciliation.",
            "The starting city is not specified; any start consistent with direct flights is acceptable.",
            "Stays may be in contiguous blocks or split across multiple visits if needed, provided total per city matches the reconciled allocation and all travel uses direct flights."
        ]
    },
    "workflow": {
        "preference_agent": {
            "analyze_preferences": {
                "input": [],
                "output": "stay_requirements",
                "system_prompt": "You are a travel-constraint analyst. Your task is to reconcile requested city stays with a fixed total trip length. Identify inconsistencies and propose one or more feasible integer allocations that sum exactly to the total days with minimal deviation from the requested days.",
                "prompt": "Your name is preference_agent. Public information: {environment->public_information}. Private knowledge: {agents->preference_agent->private_information}. Produce a concise JSON summary with keys: requested_days (object with keys split, manchester, riga), total_days (integer), feasibility (boolean), notes (string), feasible_allocations (array of objects each with city_days and deviation metrics such as l1 and l2), and recommended_allocation (object city_days) that sums to {environment->init->planning_horizon_days}. Do not produce PDDL."
            }
        },
        "flight_agent": {
            "analyze_connectivity": {
                "input": [],
                "output": "flight_connectivity",
                "system_prompt": "You are a flight network analyst. Convert textual flight availability into a clear directed graph and suggest feasible city visit orders that use only direct flights and cover all three cities.",
                "prompt": "Your name is flight_agent. Public information: {environment->public_information}. Private knowledge: {agents->flight_agent->private_information}. Return a concise JSON with keys: cities (array), directed_edges (array of [from,to] pairs), undirected_pairs (array of [a,b] pairs treated as bidirectional), forbidden_edges (array of [from,to] pairs not permitted), connectivity_notes (string), and feasible_orders (array of city sequences visiting all cities using only direct flights; sequences may repeat a hub if required). Do not produce PDDL."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "stay_requirements",
                    "flight_connectivity"
                ],
                "output": "final_pddl",
                "system_prompt": "You are an expert planner who compiles analyses into a solvable PDDL domain and problem for the Fast Downward planner. Use classical STRIPS-compatible PDDL with typing and avoid numeric fluents. Encode cities and a finite day timeline. The plan must use only allowed direct flights. Model days as discrete objects d0 ... dN with a next relation. Represent a per-day city requirement that enforces the reconciled allocation and any chosen feasible visit order. Provide a minimal domain with predicates: at(?c - city), day(?d - day), next(?d - day ?d2 - day), needs_city(?c - city ?d - day), allowed(?from - city ?to - city). Provide actions: move(?from ?to ?d) that changes location without advancing the day and is only allowed if allowed(?from ?to) and needs_city(?to ?d) hold; tick(?c ?d ?d2) that consumes day d to d2 when at the required city. Initial state includes at(start_city), day d0, the next chain, allowed edges from the flight analysis, and needs_city facts for each day according to the recommended allocation and chosen feasible order. The goal is to have day at the final day object with all needs_city facts consumed. Ensure the domain and problem are valid PDDL for Fast Downward.",
                "prompt": "Inputs: stay requirements JSON -> {stay_requirements}; flight connectivity JSON -> {flight_connectivity}. 1) Choose the recommended allocation that sums to {environment->init->planning_horizon_days}. 2) Choose a feasible city order from the connectivity analysis that uses only direct flights. 3) Expand the allocation into a day-by-day needs_city schedule consistent with the chosen order. 4) Produce a final PDDL domain and problem enclosed in <domain></domain> and <problem></problem> tags. The problem must declare: objects for cities and days d0..d{environment->init->planning_horizon_days}, initial at for the first required city, day d0, next chain, allowed flight edges as facts, and needs_city facts for each day. The goal requires being at the last day with all needs_city facts achieved. Keep the PDDL concise and syntactically correct for Fast Downward."
            }
        },
        "constraints": [
            "preference_agent.analyze_preferences->orchestrator.pddl",
            "flight_agent.analyze_connectivity->orchestrator.pddl"
        ]
    }
}