{
    "name": "TripPlanningExample15",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "traveler",
            "flight_planner",
            "calendarizer",
            "orchestrator"
        ],
        "traveler": {
            "private_information": [
                "Hard constraints: total trip length is 11 consecutive days; only direct flights may be taken; exactly one city per day; wedding requires being in Porto on days 10 and 11; at most one flight between consecutive days",
                "Soft preferences: stay in Berlin for 6 days in total; stay in Porto for 2 days; stay in Krakow for 5 days",
                "Preference trade-off: if all soft preferences cannot be satisfied simultaneously, prioritize meeting the wedding constraint and total length, then maximize total days in Berlin and Krakow with minimal deviation and minimal number of flights"
            ],
            "goal": "Find a valid 11-day trip across Berlin, Krakow, and Porto using only direct flights, attending the wedding in Porto on days 10 and 11, and maximizing satisfaction of desired stay lengths."
        },
        "flight_planner": {
            "private_information": [
                "Direct flight graph (bidirectional): Berlin <-> Porto; Berlin <-> Krakow",
                "No direct flights exist between Porto and Krakow",
                "All city changes must be achieved via a direct flight; therefore any Porto-Krakow transition requires passing through Berlin on a different day if needed"
            ],
            "goal": "Provide the direct flight graph and implications for feasible inter-city sequences using only direct flights."
        },
        "calendarizer": {
            "private_information": [
                "Days are indexed 1 through 11",
                "Wedding occurs in Porto on days 10 and 11 and requires presence in Porto on those days",
                "Desired stays: Berlin 6 days, Porto 2 days, Krakow 5 days; these sum to 13 and therefore conflict with the 11-day total, so some soft preferences may need relaxation"
            ],
            "goal": "Convert constraints and preferences into day-indexed temporal rules and propose feasible skeleton itineraries that satisfy all hard constraints while indicating which soft preferences are unmet."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate preferences, flight connectivity, and calendar constraints to produce a final PDDL domain and problem for Fast Downward that encodes the 11-day trip with only direct flights, ensures Porto on days 10 and 11, and yields a concrete feasible itinerary."
        }
    },
    "environment": {
        "init": {
            "days": 11,
            "visibility": 1,
            "cities": [
                "Berlin",
                "Porto",
                "Krakow"
            ],
            "direct_only": true
        },
        "public_information": [
            "Trip duration is 11 days (days are indexed 1 through 11).",
            "Cities to visit: Berlin, Porto, Krakow.",
            "Direct flights exist between Berlin and Porto, and between Berlin and Krakow (both directions).",
            "There are no direct flights between Porto and Krakow.",
            "Only direct flights may be taken between cities, and you may only change cities at a day boundary.",
            "You would like to stay in Berlin for 6 days.",
            "You plan to stay in Porto for 2 days.",
            "A wedding takes place in Porto during day 10 and day 11; you must be in Porto on those days.",
            "You plan to stay in Krakow for 5 days.",
            "Exactly one city is occupied per day.",
            "Objective: Find a consistent 11-day itinerary that satisfies all hard constraints and uses only direct flights; when soft preferences conflict, choose a best-effort itinerary that minimizes deviations and unnecessary flights."
        ]
    },
    "workflow": {
        "traveler": {
            "context": {
                "input": [],
                "output": "preferences_summary",
                "system_prompt": "You are a trip-preferences analyst. Given the public information and your private information, produce a concise structured summary that clearly separates hard constraints and soft preferences, assigns priorities to each soft preference, and states tie-breaking rules such as minimizing total flights and avoiding unnecessary city switches. Do not output PDDL.",
                "prompt": "Your name is traveler. Public information: {environment->public_information} Private information: {agents->traveler->private_information} Global goal: {agents->traveler->goal} Produce a compact ranked list of hard constraints, soft preferences with priorities, and tie-breakers that an orchestrator can use to finalize a feasible itinerary."
            }
        },
        "flight_planner": {
            "context": {
                "input": [],
                "output": "flight_graph",
                "system_prompt": "You are a flight graph specialist. Using the public information, return the directed flight graph, its adjacency list, and the implications this has on feasible city sequences, including the necessity to use Berlin as a hub between Porto and Krakow. Do not output PDDL.",
                "prompt": "Your name is flight_planner. Public information: {environment->public_information} Private information: {agents->flight_planner->private_information} Goal: {agents->flight_planner->goal} Provide a clear adjacency list of direct flights, indicate forbidden edges, and list connectivity rules implied by the graph such as the need to route between Porto and Krakow via Berlin."
            }
        },
        "calendarizer": {
            "draft": {
                "input": [
                    "preferences_summary",
                    "flight_graph"
                ],
                "output": "calendar_constraints",
                "system_prompt": "You are a temporal allocator. Translate constraints and preferences into day-indexed rules for days 1 through 11, explicitly encoding the requirement to be in Porto on days 10 and 11, the one-city-per-day rule, direct-flight-only transitions, and at most one flight between consecutive days. Propose at least one feasible skeleton itinerary that satisfies all hard constraints; if soft preferences conflict with the 11-day total, clearly state which preferences are unmet and why. Do not output PDDL.",
                "prompt": "Your name is calendarizer. Public information: {environment->public_information} Inputs from traveler and flight planner: {preferences_summary} {flight_graph} Goal: {agents->calendarizer->goal} Return a set of day-indexed constraints and one or two feasible skeleton itineraries that obey all hard rules and use only allowed flights, noting any soft-preference deviations."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "preferences_summary",
                    "flight_graph",
                    "calendar_constraints"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in multi-agent PDDL modeling for the Fast Downward solver. Produce a complete PDDL domain and PDDL problem that encode days 1..11, cities Berlin, Porto, and Krakow, a single-city-per-day occupancy model, and flight transitions only along allowed direct edges. Enforce being in Porto on days 10 and 11 and ensure the plan spans exactly 11 days. If soft preferences cannot all be satisfied, choose a consistent concrete itinerary that best fits the provided preferences and minimizes unnecessary flights, and reflect that choice in the problem goals. Always enclose the PDDL domain between <domain></domain> and the PDDL problem between <problem></problem> tags.",
                "prompt": "Integrate the following to produce the final PDDL for Fast Downward: public information: {environment->public_information} traveler preferences: {preferences_summary} flight graph: {flight_graph} calendar constraints and candidate skeletons: {calendar_constraints} Provide a valid PDDL domain and problem that model days and locations, restrict flights to the allowed direct connections, respect being in Porto on days 10 and 11, and yield a feasible 11-day itinerary. Keep the actions well-defined for Fast Downward and output only the PDDL domain and problem within the specified tags."
            }
        },
        "constraints": [
            "traveler.context->calendarizer.draft",
            "flight_planner.context->calendarizer.draft",
            "traveler.context->orchestrator.pddl",
            "flight_planner.context->orchestrator.pddl",
            "calendarizer.draft->orchestrator.pddl"
        ]
    }
}