{
    "name": "TripPlanningExample17",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "traveler",
            "flight_planner",
            "calendar_manager",
            "orchestrator"
        ],
        "traveler": {
            "private_information": [
                "Preference ranking: Copenhagen is highest priority; Vienna and Lyon are secondary but desirable.",
                "If the 4-day stays in both Vienna and Lyon cannot fit within the 11-day limit after spending 5 days in Copenhagen, accept fewer days in Vienna and Lyon while keeping the total trip length at 11 days.",
                "Willing to take only direct flights between cities as listed in the public information."
            ],
            "goal": "Provide a clear set of hard constraints, soft preferences, and acceptable relaxations for the 11-day trip through Copenhagen, Vienna, and Lyon."
        },
        "flight_planner": {
            "private_information": [
                "Direct flights exist between Copenhagen and Vienna.",
                "Direct flights exist between Vienna and Lyon.",
                "There are no direct flights between Copenhagen and Lyon."
            ],
            "goal": "Provide direct flight connectivity and feasible inter-city hops consistent with only direct flights."
        },
        "calendar_manager": {
            "private_information": [
                "The trip spans 11 consecutive days labeled D1 through D11.",
                "Mandatory presence in Copenhagen on D1 and D5 for a conference.",
                "Exactly one city must be assigned per day.",
                "At most one flight can be taken on any given day."
            ],
            "goal": "Provide a day-indexed constraint skeleton describing variables, day succession, hard constraints, and how to count city-day allocations."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate inputs from the other agents and produce a PDDL domain and problem suitable for the FastDownward planner that enforce all hard constraints and optimize soft preferences."
        }
    },
    "environment": {
        "init": {
            "days": 11,
            "cities": 3,
            "start_city": "copenhagen"
        },
        "public_information": [
            "You plan to visit Copenhagen, Vienna, and Lyon over 11 consecutive days labeled D1 through D11.",
            "You only take direct flights between cities you visit.",
            "Direct flights exist between Copenhagen and Vienna, and between Vienna and Lyon.",
            "There are no direct flights between Copenhagen and Lyon.",
            "You must be in Copenhagen on day 1 and day 5 to attend a conference.",
            "You would like to spend 5 days total in Copenhagen.",
            "You would like to spend 4 days in Vienna and 4 days in Lyon, but the total trip length is 11 days. After allocating 5 days to Copenhagen, only 6 days remain for Vienna and Lyon combined. If the preferred totals do not fit, minimize the shortfall across Vienna and Lyon while strictly satisfying the mandatory Copenhagen requirements and total length.",
            "You must be in exactly one city per day, and at most one flight can be taken per day.",
            "The initial location on D1 is Copenhagen to meet the conference requirement."
        ]
    },
    "workflow": {
        "traveler": {
            "constraints": {
                "input": [],
                "output": "traveler_constraints",
                "system_prompt": "You are the Traveler. Summarize hard constraints and soft preferences for the 11-day multi-city trip. State acceptable relaxations if preferred days cannot all fit. Do not write PDDL.",
                "prompt": "Your name is traveler. Consider the following public information: {environment->public_information}. Your private knowledge: {agents->traveler->private_information}. Your goal: {agents->traveler->goal}. Produce a concise, structured description with sections Hard constraints, Soft preferences, and Acceptable relaxations, using short bullet points. Do not use PDDL or code."
            }
        },
        "flight_planner": {
            "routes": {
                "input": [],
                "output": "flight_graph",
                "system_prompt": "You are the Flight Planner. Provide a clear description of direct flight connectivity and allowed inter-city moves as an undirected edge list. Do not write PDDL.",
                "prompt": "Your name is flight_planner. Consider the following public information: {environment->public_information}. Your private knowledge: {agents->flight_planner->private_information}. Your goal: {agents->flight_planner->goal}. Output a short list describing the direct-flight edges and examples of legal city-to-city moves that respect these edges only. Keep it concise and non-PDDL."
            }
        },
        "calendar_manager": {
            "calendar": {
                "input": [],
                "output": "calendar_spec",
                "system_prompt": "You are the Calendar Manager. Provide a day-indexed constraint skeleton for 11 days with a clear successor relation and exactly-one-city-per-day and at-most-one-flight-per-day rules, plus the mandatory presence in Copenhagen on D1 and D5. Do not write PDDL.",
                "prompt": "Your name is calendar_manager. Consider the following public information: {environment->public_information}. Your private knowledge: {agents->calendar_manager->private_information}. Your goal: {agents->calendar_manager->goal}. Describe the variables per day, a successor relation over days D1..D11, and the hard constraints including conference days, exactly-one-city-per-day, and at-most-one-flight-per-day. Provide a concise and self-contained specification in plain text or simple bullet points, not PDDL."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "traveler_constraints",
                    "flight_graph",
                    "calendar_spec"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in classical PDDL for the FastDownward planner. You must produce a PDDL domain and PDDL problem that model an 11-day itinerary over Copenhagen, Vienna, and Lyon with hard constraints and soft preferences. Enclose the domain between <domain></domain> and the problem between <problem></problem>. Use STRIPS-style predicates and action costs with (:metric minimize (total-cost)) to handle soft preferences. Model days as objects D1..D11 and cities as objects copenhagen, vienna, lyon. Include a day successor relation to ensure a complete 11-day schedule. Provide actions to stay and to fly, enforcing that flights are allowed only between directly connected cities and at most one flight can occur per day. Enforce hard constraints that the traveler is in Copenhagen on D1 and D5 and spends exactly 5 days total in Copenhagen. Encode soft preferences to aim for 4 days in Vienna and 4 days in Lyon by introducing costed penalty mechanisms for any shortfall while keeping the model compatible with FastDownward features. Do not rely on PDDL 3 preferences or unsupported constructs; stick to features supported by FastDownward such as action costs and a total-cost metric. Ensure the initial state begins in Copenhagen on D1, and the goal requires a fully assigned 11-day itinerary.",
                "prompt": "Integrate the following inputs to build the final planning model: Traveler constraints: {traveler_constraints}. Flight connectivity: {flight_graph}. Calendar specification: {calendar_spec}. Produce the final PDDL domain and PDDL problem targeting the FastDownward planner as specified."
            }
        },
        "constraints": [
            "traveler.constraints->orchestrator.pddl",
            "flight_planner.routes->orchestrator.pddl",
            "calendar_manager.calendar->orchestrator.pddl"
        ]
    }
}