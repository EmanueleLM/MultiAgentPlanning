{
    "name": "TripPlanningExample20",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "preferences_agent",
            "flight_analyst",
            "orchestrator"
        ],
        "preferences_agent": {
            "private_information": [
                "Total available days: 12",
                "Desired stay: Istanbul 5 days",
                "Desired stay: Budapest 6 days",
                "Desired stay: Dubrovnik 3 days"
            ],
            "goal": "Summarize trip preferences and hard constraints so they can be used by a planner to produce a 12-day itinerary that stays as close as possible to the desired city durations."
        },
        "flight_analyst": {
            "private_information": [
                "Direct flights include a bidirectional link between Istanbul and Budapest",
                "There is a direct flight from Dubrovnik to Istanbul",
                "No other direct flights are available unless explicitly stated"
            ],
            "goal": "Provide normalized directed connectivity facts for all direct flights among the cities so the planner can restrict moves to these arcs only."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate preferences and direct-flight connectivity to produce a feasible 12-day itinerary that visits Istanbul, Budapest, and Dubrovnik, uses only direct flights between legs, and stays as close as possible to the desired durations."
        }
    },
    "environment": {
        "init": {
            "total_days": 12,
            "cities": [
                "Istanbul",
                "Budapest",
                "Dubrovnik"
            ],
            "solver": "FastDownward"
        },
        "public_information": [
            "You plan to visit 3 European cities for a total of 12 days.",
            "Cities: Istanbul, Budapest, Dubrovnik.",
            "Desired stays: Istanbul 5 days; Budapest 6 days; Dubrovnik 3 days.",
            "Direct flights: Istanbul <-> Budapest (both directions).",
            "Direct flight: Dubrovnik -> Istanbul (one-way).",
            "Assume no other direct flights.",
            "The itinerary should only use direct flights for intercity moves."
        ]
    },
    "workflow": {
        "preferences_agent": {
            "preferences": {
                "input": [],
                "output": "prefs_facts",
                "system_prompt": "You collect and structure travel preference facts for planning and do not produce PDDL; output concise normalized facts and hard constraints that a downstream planner can consume.",
                "prompt": "Your name is preferences_agent. Public information: {environment->public_information}. Your private preferences: {agents->preferences_agent->private_information}. Objective: {agents->preferences_agent->goal}. Provide a normalized list of simple, unambiguous facts such as TOTAL_DAYS(12); CITY(Istanbul); CITY(Budapest); CITY(Dubrovnik); DESIRED_STAY(Istanbul,5); DESIRED_STAY(Budapest,6); DESIRED_STAY(Dubrovnik,3); HARD_CONSTRAINT(SUM_STAY_EQUALS_TOTAL_DAYS). If desired stays conflict with the total days, mark the total-days constraint as HARD and the city-specific durations as SOFT so that a planner may minimize deviation."
            }
        },
        "flight_analyst": {
            "connectivity": {
                "input": [],
                "output": "flight_graph",
                "system_prompt": "You provide normalized directed connectivity facts for direct flights only and do not produce PDDL.",
                "prompt": "Your name is flight_analyst. Public information: {environment->public_information}. Your private knowledge: {agents->flight_analyst->private_information}. Objective: {agents->flight_analyst->goal}. Output a normalized set of facts like CITY(Istanbul); CITY(Budapest); CITY(Dubrovnik); DIRECT(Istanbul,Budapest); DIRECT(Budapest,Istanbul); DIRECT(Dubrovnik,Istanbul); and explicitly note the absence of other direct arcs with statements like NO_DIRECT(Budapest,Dubrovnik) and NO_DIRECT(Istanbul,Dubrovnik) if they are not listed as direct."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "prefs_facts",
                    "flight_graph"
                ],
                "output": "pddl_itinerary",
                "system_prompt": "You are an expert with multi-agent PDDL problems who targets the FastDownward planner. You must output a complete PDDL domain and a PDDL problem that together encode a 12-day trip planning task with only direct flights allowed, visiting the listed cities, and minimizing deviation from desired per-city stays. Enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags. Model travel as moving along DIRECT arcs only, and allocate exactly 12 daily stay steps across cities. Encode desired stays as soft constraints using action costs or numeric fluents with a metric to minimize total deviation while respecting the hard total-days constraint. The result must be solvable by FastDownward.",
                "prompt": "You will integrate two inputs. Preference facts: {prefs_facts}. Flight connectivity facts: {flight_graph}. Task: {agents->orchestrator->goal}. Requirements: (1) Exactly 12 stay-days across all cities; (2) Only move along DIRECT arcs; (3) Visit all three cities at least once; (4) If a city cannot be reached by direct flights from others, you may start there; (5) Minimize deviation from DESIRED_STAY per city using a numeric metric. Guidance: Provide a domain with actions such as fly(c1,c2) allowed only if DIRECT(c1,c2) holds, and stay-one-day(c) to count days; track current day and per-city accumulated stays with numeric fluents; include an initial location and a day counter; add a goal requiring day == 12 and visited-all cities; add a metric to minimize the sum over cities of absolute deviations from desired stays (you may compile absolute deviation into helper fluents and cost increments). Output only the PDDL domain and problem inside the required tags."
            }
        },
        "constraints": [
            "preferences_agent.preferences->orchestrator.pddl",
            "flight_analyst.connectivity->orchestrator.pddl"
        ]
    }
}