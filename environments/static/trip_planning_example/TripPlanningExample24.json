{
    "name": "TripPlanningExample24",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "traveler",
            "flight_mapper",
            "calendar_manager",
            "orchestrator"
        ],
        "traveler": {
            "private_information": [
                "I will be traveling alone",
                "I prefer to maximize time in Amsterdam, then Riga",
                "I can only take direct flights"
            ],
            "goal": "Summarize mandatory constraints and soft preferences for a 13-day trip across Florence, Amsterdam, and Riga."
        },
        "flight_mapper": {
            "private_information": [
                "Direct flights are available between Florence and Amsterdam",
                "Direct flights are available between Amsterdam and Riga",
                "Flights are bidirectional"
            ],
            "goal": "Provide a clear representation of the direct-flight network among the cities."
        },
        "calendar_manager": {
            "private_information": [
                "The trip spans exactly 13 consecutive days, labeled day1 through day13",
                "A workshop must be attended in Florence on days 1 through 4 inclusive"
            ],
            "goal": "Provide a clean day-indexed model and hard calendar constraints for the trip."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate preferences, calendar constraints, and flight connectivity into a single PDDL domain and problem that can be solved by the FastDownward planner to yield a valid 13-day itinerary."
        }
    },
    "environment": {
        "init": {
            "total_days": 13,
            "cities": [
                "Florence",
                "Amsterdam",
                "Riga"
            ],
            "time_scale": "days",
            "start_day": "day1"
        },
        "public_information": [
            "Total trip duration is 13 days.",
            "Cities to visit: Florence, Amsterdam, Riga.",
            "Mandatory stay: 4 days in Florence.",
            "A workshop must be attended in Florence between day 1 and day 4 inclusive.",
            "Direct flights exist between Florence and Amsterdam; and between Amsterdam and Riga.",
            "Only direct flights can be taken between cities.",
            "Goal: Find a 13-day itinerary visiting all three cities and commuting only via direct flights."
        ]
    },
    "workflow": {
        "traveler": {
            "preferences": {
                "input": [],
                "output": "prefs_traveler",
                "system_prompt": "You are a travel preference summarizer. Read the public constraints and the traveler's private notes, then produce a concise and machine-readable summary of mandatory and soft preferences for the trip. Do not generate PDDL. Keep the output compact and unambiguous.",
                "prompt": "Your name is traveler. Public information: {environment->public_information}. Your private notes: {agents->traveler->private_information}. Your goal: {agents->traveler->goal}. Produce a single JSON object with these keys: total_days (integer), mandatory_stays (object mapping city to exact required days), soft_stays (object mapping city to desired days), must_visit (array of cities to include at least one day), mobility (object with direct_flights_only: true). Do not invent additional cities; use exactly Florence, Amsterdam, Riga. If the desired days do not fit the total, leave them as soft_stays and do not attempt to resolve; the orchestrator will handle trade-offs."
            }
        },
        "flight_mapper": {
            "graph": {
                "input": [],
                "output": "flight_graph",
                "system_prompt": "You are a flight connectivity mapper. Your task is to provide a minimal, machine-readable representation of direct flight connections between the given cities. Do not generate PDDL.",
                "prompt": "Your name is flight_mapper. Public information: {environment->public_information}. Your private notes: {agents->flight_mapper->private_information}. Your goal: {agents->flight_mapper->goal}. Output a single JSON object with keys: cities (array), direct_edges (array of 2-item arrays [from, to] for each directed edge). Include both directions for each bidirectional route (Florence<->Amsterdam and Amsterdam<->Riga)."
            }
        },
        "calendar_manager": {
            "calendar": {
                "input": [],
                "output": "calendar_model",
                "system_prompt": "You are a travel calendar modeler. Provide a precise day-indexed structure and hard constraints. Do not generate PDDL.",
                "prompt": "Your name is calendar_manager. Public information: {environment->public_information}. Your private notes: {agents->calendar_manager->private_information}. Your goal: {agents->calendar_manager->goal}. Output a single JSON object with keys: days (array listing day1 through day13), next (array of 2-item arrays [d, d_next] forming a successor chain), hard_constraints (object) where hard_constraints includes: workshop_window with city: 'Florence' and days: ['day1','day2','day3','day4'], and exact_stay with {'Florence': 4}. Do not include soft preferences here."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "prefs_traveler",
                    "flight_graph",
                    "calendar_model"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert with multi-agent PDDL modeling for the FastDownward solver. You will produce a PDDL domain and a PDDL problem that model a 13-day city-assignment schedule with day-to-day transitions restricted to staying in the same city or moving via a direct flight edge. You must enclose the PDDL domain between <domain></domain> tags and the PDDL problem between <problem></problem> tags. Use classical STRIPS/ADL compatible with FastDownward (types, predicates, actions).",
                "prompt": "Integrate the following inputs to construct a solvable planning model: Preferences: {prefs_traveler}. Flight graph: {flight_graph}. Calendar model: {calendar_model}. Requirements: (1) The trip spans exactly 13 consecutive days (day1..day13 with next relations). (2) The traveler must be in Florence on days 1..4 inclusive to satisfy the workshop window, resulting in exactly 4 total days in Florence. (3) Only direct flights may be used to switch cities between consecutive days; if the city changes from day d to day d+1, the pair must be an edge in the flight graph. (4) Soft preferences (e.g., 6 days in Amsterdam and 5 days in Riga) may be inconsistent with the total days; prioritize all hard constraints first and, if necessary, choose a feasible distribution that sums to the remaining 9 days after Florence and stays as close as possible to the soft preferences. Modeling guidance: Define types (city, day), predicates for next, assigned(?d ?c), decided(?d), at-first(?d), and optionally last-day. Provide actions to assign the first day to Florence subject to the workshop window, and to assign each subsequent day with preconditions that either remain in the same city or follow a direct flight between the previous day's city and the new city. The initial state should include the full day chain and no assignments yet. The goal should require that all days are assigned and that the count of assigned days to Florence is exactly 4. Include comments indicating the chosen target counts for Amsterdam and Riga that fit the 13-day horizon while respecting all hard constraints (for example, Amsterdam 6 and Riga 3). Enclose the PDDL domain in <domain></domain> and the PDDL problem in <problem></problem>."
            }
        },
        "constraints": [
            "traveler.preferences->orchestrator.pddl",
            "flight_mapper.graph->orchestrator.pddl",
            "calendar_manager.calendar->orchestrator.pddl"
        ]
    }
}