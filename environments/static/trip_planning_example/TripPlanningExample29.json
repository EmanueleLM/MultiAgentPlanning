{
    "name": "TripPlanningExample29",
    "author": "Human",
    "agents": {
        "number": 3,
        "names": [
            "route_planner",
            "scheduler",
            "orchestrator"
        ],
        "route_planner": {
            "private_information": [
                "I represent air routes as an undirected graph and only allow edges that are explicitly listed as direct flights.",
                "I check reachability and propose city sequences that respect direct-flight connectivity.",
                "I avoid proposing multi-leg connections within a single day."
            ],
            "goal": "Derive the feasible connectivity between the three cities using only direct flights and suggest at least one city-visit order that can be scheduled over 10 days."
        },
        "scheduler": {
            "private_information": [
                "Hard constraints have priority over soft ones.",
                "Hard constraints: total length is 10 days; be in Krakow on days 9 and 10; spend exactly 2 days in Krakow; spend exactly 7 days in Dubrovnik; use only direct flights between consecutive days.",
                "Soft constraint: prefer 3 days in Frankfurt, but relax this if it conflicts with the 10-day limit and hard constraints.",
                "Tie-breakers: minimize number of flight legs, prefer contiguous stays."
            ],
            "goal": "Using the connectivity from the route planner, construct a day-by-day 10-day itinerary that satisfies all hard constraints and deviates as little as possible from the Frankfurt preference."
        },
        "orchestrator": {
            "private_information": [
                "I must produce a final PDDL domain and problem formatted for the FastDownward planner.",
                "I encode days and cities, a next-day relation, and restrict flight actions to the direct-flight edges provided.",
                "I will enforce hard constraints in the problem goals and initial facts and ensure the 10-day itinerary is achievable."
            ],
            "goal": "Integrate the flight graph and the proposed itinerary into a single consistent planning model and produce a PDDL domain and problem compatible with FastDownward that captures the 10-day plan, direct-flight constraints, and the requirements for Dubrovnik and Krakow."
        }
    },
    "environment": {
        "init": {
            "total_days": 10,
            "cities": [
                "Krakow",
                "Frankfurt",
                "Dubrovnik"
            ],
            "direct_flights": [
                [
                    "Frankfurt",
                    "Krakow"
                ],
                [
                    "Dubrovnik",
                    "Frankfurt"
                ]
            ],
            "day_index_base": 1,
            "max_flights_per_day": 1
        },
        "public_information": [
            "Total trip length is 10 days.",
            "Cities considered: Krakow (KRK), Frankfurt (FRA), Dubrovnik (DBV).",
            "Direct flights exist between Frankfurt and Krakow, and between Dubrovnik and Frankfurt; no other direct routes are allowed.",
            "Travel must use only direct flights between consecutive days.",
            "You want to spend exactly 2 days in Krakow.",
            "You will attend a wedding in Krakow on day 9 and day 10, so you must be in Krakow on those days.",
            "You plan to stay in Dubrovnik for exactly 7 days.",
            "You would like to visit Frankfurt for 3 days, which is a preference that can be relaxed to satisfy the 10-day total and hard constraints.",
            "Find a feasible 10-day itinerary that respects direct-flight connectivity."
        ]
    },
    "workflow": {
        "route_planner": {
            "feasibility": {
                "input": [],
                "output": "flight_graph",
                "system_prompt": "You analyze transportation graphs and compute feasible multi-city sequences constrained to direct flights only. You clearly state the connectivity limits and produce example city orders that could be scheduled over a fixed horizon.",
                "prompt": "Your name is route_planner. Public information: {environment->public_information}. Your private knowledge: {agents->route_planner->private_information}. Goal: {agents->route_planner->goal}. Tasks: 1) Build an undirected adjacency list of direct flights among the three cities. 2) Explain any missing direct edge and its implication (for example Dubrovnik to Krakow requires routing via Frankfurt). 3) Provide at least one feasible city order that visits Dubrovnik, Frankfurt, and Krakow in some sequence that can be scheduled over 10 days, assuming at most one flight between consecutive days. Output a concise summary including the adjacency list and a short rationale."
            }
        },
        "scheduler": {
            "itinerary": {
                "input": [
                    "flight_graph"
                ],
                "output": "candidate_itinerary",
                "system_prompt": "You are a trip scheduler that assigns cities to days under hard and soft constraints, using only allowed direct-flight transitions between days.",
                "prompt": "Your name is scheduler. Public information: {environment->public_information}. Your private knowledge: {agents->scheduler->private_information}. You also receive the flight connectivity analysis: {flight_graph}. Goal: {agents->scheduler->goal}. Produce a compact 10-day itinerary mapping day 1 to day 10 to a city, guaranteeing that days 9 and 10 are Krakow, exactly 2 total days are spent in Krakow, exactly 7 total days are spent in Dubrovnik, and every move between consecutive days is either staying in the same city or a single direct flight. Treat the request for 3 days in Frankfurt as a soft preference and minimize its violation if it conflicts with the hard constraints. Provide the itinerary, the list of flight legs, and a short explanation of why it is feasible."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "flight_graph",
                    "candidate_itinerary"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You produce final PDDL models for FastDownward. Always output a valid PDDL domain and a PDDL problem enclosed in <domain></domain> and <problem></problem> tags. The domain should model days, cities, a next-day relation, staying in place, and flying only along allowed direct-flight edges. The problem should include the 10-day horizon, initial city for day 1 according to the candidate itinerary, facts for next-day ordering, allowed direct flights, and goals that enforce the day-by-day city assignments, the requirement to be in Krakow on days 9 and 10, exactly 2 days in Krakow, exactly 7 days in Dubrovnik, and only one move per day. Ensure the PDDL is compatible with FastDownward (classical STRIPS or simple ADL) and can be solved to validate the itinerary.",
                "prompt": "You are the orchestrator integrating planning artifacts. Public information: {environment->public_information}. Your private knowledge: {agents->orchestrator->private_information}. Your goal: {agents->orchestrator->goal}. You receive the flight graph and the proposed itinerary from the other agents: Flight graph: {flight_graph} Candidate itinerary: {candidate_itinerary} Tasks: 1) Consolidate a single consistent 10-day plan using the candidate itinerary; if multiple options are present, choose the one that satisfies all hard constraints and uses only direct flights. 2) Generate a PDDL domain and problem that encode days, cities, next-day ordering, staying and flying actions limited to the allowed direct flights, and goals that enforce the day-by-day city assignment and hard constraints. 3) Output only the PDDL domain and problem enclosed within <domain></domain> and <problem></problem>."
            }
        },
        "constraints": [
            "route_planner.feasibility->scheduler.itinerary",
            "scheduler.itinerary->orchestrator.pddl"
        ]
    }
}