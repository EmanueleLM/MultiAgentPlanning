{
    "name": "TripPlanningExample4",
    "author": "Human",
    "agents": {
        "number": 4,
        "names": [
            "preferences_agent",
            "flight_agent",
            "calendar_agent",
            "orchestrator"
        ],
        "preferences_agent": {
            "private_information": [
                "Preference priorities from strongest to weakest: Hard > Planned > Would-like.",
                "Hard constraints: total trip length is exactly 12 days; only direct flights are allowed.",
                "Planned stay: Munich for 5 days (treat as stronger than would-like).",
                "Would-like stays: Seville for 7 days, Tallinn for 2 days.",
                "The meeting with a friend in Tallinn must occur between day 11 and day 12 inclusive; this implies the Tallinn segment should be placed at the end of the trip.",
                "If total desired days exceed 12, adjust soft would-like preferences first, then keep the planned and hard constraints intact."
            ],
            "goal": "Normalize the trip preferences into concrete per-city stay targets that sum to 12, specify an ordered 3-city sequence consistent with direct flights, and list any compromises required to satisfy the hard constraints."
        },
        "flight_agent": {
            "private_information": [
                "Direct flights are bidirectional (Seville <-> Munich, Munich <-> Tallinn).",
                "No direct flight connects Seville and Tallinn.",
                "Only one flight can occur between consecutive city segments, and you may only move between directly connected cities.",
                "Feasible 3-city orders that respect direct flights and end in Tallinn are constrained to: Seville -> Munich -> Tallinn or Munich -> Tallinn -> (cannot go elsewhere because only 3 cities to visit).",
                "Starting in Seville enables the full chain Seville -> Munich -> Tallinn without violating the direct-flight rule."
            ],
            "goal": "Summarize connectivity as an undirected graph, enumerate feasible ordered 3-city sequences starting in Seville and ending in Tallinn, and provide adjacency needed for planning."
        },
        "calendar_agent": {
            "private_information": [
                "The friend meeting must occur in Tallinn between day 11 and day 12 inclusive.",
                "Tallinn must be scheduled as the final city so that days 11 and 12 are both in Tallinn.",
                "The remaining days 1 through 10 must be allocated to Seville and Munich subject to their preferences and connectivity.",
                "A single flight day boundary separates Seville and Munich, and another separates Munich and Tallinn; place flight transitions between consecutive days."
            ],
            "goal": "Extract temporal constraints and required placements: Tallinn must occupy days 11-12; Munich must immediately precede Tallinn due to direct flight constraints; Seville must precede Munich. Provide a clean window allocation template."
        },
        "orchestrator": {
            "private_information": [],
            "goal": "Integrate the agents' summaries to produce a consistent 12-day itinerary across Seville, Munich, and Tallinn with direct flights only, meeting the friend in Tallinn on days 11-12, prioritizing hard and planned constraints, and output a final PDDL domain and problem suitable for the FastDownward solver."
        }
    },
    "environment": {
        "init": {
            "total_days": 12,
            "cities": [
                "Seville",
                "Munich",
                "Tallinn"
            ],
            "start_city": "Seville",
            "meeting_window": [
                11,
                12
            ],
            "direct_flights": [
                [
                    "Seville",
                    "Munich"
                ],
                [
                    "Munich",
                    "Tallinn"
                ]
            ],
            "max_flights_per_day": 1,
            "time_unit": "day"
        },
        "public_information": [
            "The trip lasts exactly 12 days labeled 1 through 12.",
            "Cities to visit: Seville (would-like 7 days), Munich (planned 5 days), Tallinn (would-like 2 days).",
            "Only direct flights are allowed to move between cities.",
            "Direct flights exist between Seville and Munich, and between Munich and Tallinn; there is no direct flight between Seville and Tallinn.",
            "You want to meet a friend in Tallinn between day 11 and day 12 inclusive.",
            "Assume the trip starts in Seville on day 1 to satisfy connectivity and end in Tallinn for days 11 and 12."
        ]
    },
    "workflow": {
        "preferences_agent": {
            "analyze_preferences": {
                "input": [],
                "output": "preferences_summary",
                "system_prompt": "You are a travel requirements analyst. Produce a concise JSON summary that reconciles would-like and planned stays into concrete targets that sum to 12 days while respecting hard constraints and connectivity. Include keys: cities, total_days, preference_levels (hard, planned, would_like), target_stays_by_city with rationale, ordered_city_sequence consistent with direct flights and ending in Tallinn, and compromises detailing deviations from soft preferences. Do not emit PDDL.",
                "prompt": "Your name is preferences_agent. Public info: {environment->public_information}. Your knowledge: {agents->preferences_agent->private_information}. Goal: {agents->preferences_agent->goal}. Return a single compact JSON object as specified."
            }
        },
        "flight_agent": {
            "build_connectivity": {
                "input": [],
                "output": "flight_graph",
                "system_prompt": "You are a flight connectivity modeler. Output a compact JSON with keys: nodes (cities), edges (bidirectional direct flights), feasible_orders (ordered 3-city sequences that start in Seville and end in Tallinn), and notes describing any connectivity limitations. Do not emit PDDL.",
                "prompt": "Your name is flight_agent. Public info: {environment->public_information}. Your knowledge: {agents->flight_agent->private_information}. Goal: {agents->flight_agent->goal}. Return a single compact JSON object as specified."
            }
        },
        "calendar_agent": {
            "extract_windows": {
                "input": [],
                "output": "calendar_constraints",
                "system_prompt": "You are a temporal constraints analyst. Output a compact JSON with keys: meeting_city, meeting_window_days, placement_rules (e.g., Tallinn occupies days 11-12), sequence_rules (Munich must precede Tallinn; Seville must precede Munich), and segment_boundaries describing where flights occur between segments. Do not emit PDDL.",
                "prompt": "Your name is calendar_agent. Public info: {environment->public_information}. Your knowledge: {agents->calendar_agent->private_information}. Goal: {agents->calendar_agent->goal}. Return a single compact JSON object as specified."
            }
        },
        "orchestrator": {
            "pddl": {
                "input": [
                    "preferences_summary",
                    "flight_graph",
                    "calendar_constraints"
                ],
                "output": "pddl_orchestrator",
                "system_prompt": "You are an expert in multi-agent integration and PDDL. Always produce a PDDL domain and a PDDL problem targeting the FastDownward solver. Enclose the domain between <domain></domain> and the problem between <problem></problem>. Use a classical STRIPS-like formulation with discrete day objects (day1..day12) and city objects (seville munich tallinn), actions for flying between directly connected cities and staying to advance days, and predicates to ensure the agent is in exactly one city per day. Encode hard constraints: total length is 12 days; only direct flights according to the provided graph; Tallinn must be scheduled on days 11 and 12; the trip starts in Seville on day 1; visit exactly these three cities in a valid order compatible with the inputs. Respect planned and would-like preferences by setting target stays that sum to 12 and prefer to keep Munich=5 and Tallinn=2, adjusting Seville if needed. The plan should naturally be Seville then Munich then Tallinn given connectivity. Provide an initial state, goal conditions, and objects consistent with the inputs.",
                "prompt": "Integrate the agents' inputs to produce a final plan for a 12-day trip across Seville, Munich, and Tallinn using only direct flights. Public info: {environment->public_information}. Preferences summary: {preferences_summary}. Flight graph: {flight_graph}. Calendar constraints: {calendar_constraints}. Task: Produce a coherent PDDL domain and problem for FastDownward that yields an itinerary where Tallinn occupies days 11-12, Munich precedes Tallinn, Seville precedes Munich, the trip starts in Seville on day 1, and total days sum to 12. When preferences conflict with the 12-day limit, prioritize hard constraints and the planned Munich 5-day stay; keep Tallinn at 2 days to meet the friend; allocate remaining days to Seville. Enclose the PDDL domain in <domain></domain> and the PDDL problem in <problem></problem>."
            }
        },
        "constraints": [
            "preferences_agent.analyze_preferences->orchestrator.pddl",
            "flight_agent.build_connectivity->orchestrator.pddl",
            "calendar_agent.extract_windows->orchestrator.pddl"
        ]
    }
}