(define (domain meeting-scheduling-multiagent)
  (:requirements :typing :strips :negative-preconditions)
  (:types person timeslot day)

  (:predicates
    (participant ?p - person)
    (is-timeslot ?t - timeslot)
    (is-day ?d - day)
    (on-day ?t - timeslot ?d - day)
    (within-workhours ?t - timeslot)
    (next ?t1 - timeslot ?t2 - timeslot)
    (available ?p - person ?t - timeslot)
    (proposed-by ?p - person ?t - timeslot)
    (meeting-unscheduled)
    (meeting-scheduled ?t - timeslot)
    (meeting-starts ?t - timeslot)
  )

  (:action propose
    :parameters (?p - person ?t - timeslot ?d - day)
    :precondition (and
      (participant ?p)
      (is-timeslot ?t)
      (is-day ?d)
      (on-day ?t ?d)
      (within-workhours ?t)
      (available ?p ?t)
      (not (proposed-by ?p ?t))
      (meeting-unscheduled)
    )
    :effect (proposed-by ?p ?t)
  )

  (:action orchestrator_schedule
    :parameters (?t - timeslot ?tnext - timeslot ?d - day ?p1 - person ?p2 - person ?p3 - person)
    :precondition (and
      (is-timeslot ?t)
      (is-timeslot ?tnext)
      (is-day ?d)
      (on-day ?t ?d)
      (on-day ?tnext ?d)
      (within-workhours ?t)
      (within-workhours ?tnext)
      (next ?t ?tnext)
      (participant ?p1) (participant ?p2) (participant ?p3)
      (available ?p1 ?t) (available ?p1 ?tnext)
      (available ?p2 ?t) (available ?p2 ?tnext)
      (available ?p3 ?t) (available ?p3 ?tnext)
      (meeting-unscheduled)
      (not (meeting-scheduled ?t))
    )
    :effect (and
      (not (meeting-unscheduled))
      (meeting-scheduled ?t)
      (meeting-starts ?t)
    )
  )
)