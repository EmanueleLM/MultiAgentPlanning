(define (domain integrated-meeting-scheduling)
  (:requirements :typing :negative-preconditions :equality)
  (:types participant slot)

  (:predicates
    (busy ?p - participant ?s - slot)
    (occupied ?s - slot)
    (unscheduled)
    (scheduled)
    (meeting-scheduled ?p1 - participant ?p2 - participant ?s - slot)
    (meeting-with ?p - participant)
    (meeting-at ?s - slot)
    (preferred ?p - participant ?s - slot)
    (early ?s - slot)
  )

  (:action schedule_three
    :parameters (?s - slot ?p1 - participant ?p2 - participant ?p3 - participant)
    :precondition (and
      (unscheduled)
      (not (occupied ?s))
      (not (busy ?p1 ?s))
      (not (busy ?p2 ?s))
      (not (busy ?p3 ?s))
    )
    :effect (and
      (occupied ?s)
      (meeting-at ?s)
      (meeting-with ?p1) (meeting-with ?p2) (meeting-with ?p3)
      (meeting-scheduled ?p1 ?p2 ?s)
      (meeting-scheduled ?p1 ?p3 ?s)
      (meeting-scheduled ?p2 ?p3 ?s)
      (scheduled)
      (not (unscheduled))
    )
  )

  (:action schedule_preferred
    :parameters (?s - slot ?p1 - participant ?p2 - participant ?p3 - participant ?pref - participant)
    :precondition (and
      (unscheduled)
      (not (occupied ?s))
      (preferred ?pref ?s)
      (not (busy ?p1 ?s))
      (not (busy ?p2 ?s))
      (not (busy ?p3 ?s))
    )
    :effect (and
      (occupied ?s)
      (meeting-at ?s)
      (meeting-with ?p1) (meeting-with ?p2) (meeting-with ?p3)
      (meeting-scheduled ?p1 ?p2 ?s)
      (meeting-scheduled ?p1 ?p3 ?s)
      (meeting-scheduled ?p2 ?p3 ?s)
      (scheduled)
      (not (unscheduled))
    )
  )

  (:action schedule_early
    :parameters (?s - slot ?p1 - participant ?p2 - participant ?p3 - participant)
    :precondition (and
      (unscheduled)
      (early ?s)
      (not (occupied ?s))
      (not (busy ?p1 ?s))
      (not (busy ?p2 ?s))
      (not (busy ?p3 ?s))
    )
    :effect (and
      (occupied ?s)
      (meeting-at ?s)
      (meeting-with ?p1) (meeting-with ?p2) (meeting-with ?p3)
      (meeting-scheduled ?p1 ?p2 ?s)
      (meeting-scheduled ?p1 ?p3 ?s)
      (meeting-scheduled ?p2 ?p3 ?s)
      (scheduled)
      (not (unscheduled))
    )
  )
)