(define (problem hanoi-7-problem)
  (:domain hanoi-7)

  (:objects
    a b c d e f g - disk
    left middle right - peg
    ;; steps s1..s127
    s1 s2 s3 s4 s5 s6 s7 s8 s9 s10
    s11 s12 s13 s14 s15 s16 s17 s18 s19 s20
    s21 s22 s23 s24 s25 s26 s27 s28 s29 s30
    s31 s32 s33 s34 s35 s36 s37 s38 s39 s40
    s41 s42 s43 s44 s45 s46 s47 s48 s49 s50
    s51 s52 s53 s54 s55 s56 s57 s58 s59 s60
    s61 s62 s63 s64 s65 s66 s67 s68 s69 s70
    s71 s72 s73 s74 s75 s76 s77 s78 s79 s80
    s81 s82 s83 s84 s85 s86 s87 s88 s89 s90
    s91 s92 s93 s94 s95 s96 s97 s98 s99 s100
    s101 s102 s103 s104 s105 s106 s107 s108 s109 s110
    s111 s112 s113 s114 s115 s116 s117 s118 s119 s120
    s121 s122 s123 s124 s125 s126 s127 - step
  )

  (:init
    ;; typing hierarchy mapping (declare disk and peg as supports)
    ;; PDDL typing implies disk and peg are distinct types; supports are represented by using both types where needed.

    ;; size ordering (smaller x y means x is smaller than y)
    (smaller a b) (smaller a c) (smaller a d) (smaller a e) (smaller a f) (smaller a g)
    (smaller b c) (smaller b d) (smaller b e) (smaller b f) (smaller b g)
    (smaller c d) (smaller c e) (smaller c f) (smaller c g)
    (smaller d e) (smaller d f) (smaller d g)
    (smaller e f) (smaller e g)
    (smaller f g)

    ;; initial direct-on chain on right peg (top to bottom: a b c d e f g)
    (on a b)
    (on b c)
    (on c d)
    (on d e)
    (on e f)
    (on f g)
    (on g right)

    ;; base peg mapping: all disks initially on right peg
    (onpeg a right)
    (onpeg b right)
    (onpeg c right)
    (onpeg d right)
    (onpeg e right)
    (onpeg f right)
    (onpeg g right)

    ;; clear markers: top disk a has nothing on top; left and middle pegs empty
    (clear a)
    (clear left)
    (clear middle)

    ;; step ordering chain s1..s127
    (next-step s1 s2) (next-step s2 s3) (next-step s3 s4) (next-step s4 s5) (next-step s5 s6)
    (next-step s6 s7) (next-step s7 s8) (next-step s8 s9) (next-step s9 s10) (next-step s10 s11)
    (next-step s11 s12) (next-step s12 s13) (next-step s13 s14) (next-step s14 s15) (next-step s15 s16)
    (next-step s16 s17) (next-step s17 s18) (next-step s18 s19) (next-step s19 s20) (next-step s20 s21)
    (next-step s21 s22) (next-step s22 s23) (next-step s23 s24) (next-step s24 s25) (next-step s25 s26)
    (next-step s26 s27) (next-step s27 s28) (next-step s28 s29) (next-step s29 s30) (next-step s30 s31)
    (next-step s31 s32) (next-step s32 s33) (next-step s33 s34) (next-step s34 s35) (next-step s35 s36)
    (next-step s36 s37) (next-step s37 s38) (next-step s38 s39) (next-step s39 s40) (next-step s40 s41)
    (next-step s41 s42) (next-step s42 s43) (next-step s43 s44) (next-step s44 s45) (next-step s45 s46)
    (next-step s46 s47) (next-step s47 s48) (next-step s48 s49) (next-step s49 s50) (next-step s50 s51)
    (next-step s51 s52) (next-step s52 s53) (next-step s53 s54) (next-step s54 s55) (next-step s55 s56)
    (next-step s56 s57) (next-step s57 s58) (next-step s58 s59) (next-step s59 s60) (next-step s60 s61)
    (next-step s61 s62) (next-step s62 s63) (next-step s63 s64) (next-step s64 s65) (next-step s65 s66)
    (next-step s66 s67) (next-step s67 s68) (next-step s68 s69) (next-step s69 s70) (next-step s70 s71)
    (next-step s71 s72) (next-step s72 s73) (next-step s73 s74) (next-step s74 s75) (next-step s75 s76)
    (next-step s76 s77) (next-step s77 s78) (next-step s78 s79) (next-step s79 s80) (next-step s80 s81)
    (next-step s81 s82) (next-step s82 s83) (next-step s83 s84) (next-step s84 s85) (next-step s85 s86)
    (next-step s86 s87) (next-step s87 s88) (next-step s88 s89) (next-step s89 s90) (next-step s90 s91)
    (next-step s91 s92) (next-step s92 s93) (next-step s93 s94) (next-step s94 s95) (next-step s95 s96)
    (next-step s96 s97) (next-step s97 s98) (next-step s98 s99) (next-step s99 s100) (next-step s100 s101)
    (next-step s101 s102) (next-step s102 s103) (next-step s103 s104) (next-step s104 s105) (next-step s105 s106)
    (next-step s106 s107) (next-step s107 s108) (next-step s108 s109) (next-step s109 s110) (next-step s110 s111)
    (next-step s111 s112) (next-step s112 s113) (next-step s113 s114) (next-step s114 s115) (next-step s115 s116)
    (next-step s116 s117) (next-step s117 s118) (next-step s118 s119) (next-step s119 s120) (next-step s120 s121)
    (next-step s121 s122) (next-step s122 s123) (next-step s123 s124) (next-step s124 s125) (next-step s125 s126)
    (next-step s126 s127)

    ;; planned-move facts: canonical 127-step Tower of Hanoi solution (lowercase peg and disk names)
    (planned-move s1 a right left)
    (planned-move s2 b right middle)
    (planned-move s3 a left middle)
    (planned-move s4 c right left)
    (planned-move s5 a middle right)
    (planned-move s6 b middle left)
    (planned-move s7 a right left)
    (planned-move s8 d right middle)
    (planned-move s9 a left middle)
    (planned-move s10 b left right)
    (planned-move s11 a middle right)
    (planned-move s12 c left middle)
    (planned-move s13 a right left)
    (planned-move s14 b right middle)
    (planned-move s15 a left middle)
    (planned-move s16 e right left)
    (planned-move s17 a middle right)
    (planned-move s18 b middle left)
    (planned-move s19 a right left)
    (planned-move s20 c middle right)
    (planned-move s21 a left middle)
    (planned-move s22 b left right)
    (planned-move s23 a middle right)
    (planned-move s24 d middle left)
    (planned-move s25 a right left)
    (planned-move s26 b right middle)
    (planned-move s27 a left middle)
    (planned-move s28 c right left)
    (planned-move s29 a middle right)
    (planned-move s30 b middle left)
    (planned-move s31 a right left)
    (planned-move s32 f right middle)
    (planned-move s33 a left middle)
    (planned-move s34 b left right)
    (planned-move s35 a middle right)
    (planned-move s36 c left middle)
    (planned-move s37 a right left)
    (planned-move s38 b right middle)
    (planned-move s39 a left middle)
    (planned-move s40 d left right)
    (planned-move s41 a middle right)
    (planned-move s42 b middle left)
    (planned-move s43 a right left)
    (planned-move s44 c middle right)
    (planned-move s45 a left middle)
    (planned-move s46 b left right)
    (planned-move s47 a middle right)
    (planned-move s48 e left middle)
    (planned-move s49 a right left)
    (planned-move s50 b right middle)
    (planned-move s51 a left middle)
    (planned-move s52 c right left)
    (planned-move s53 a middle right)
    (planned-move s54 b middle left)
    (planned-move s55 a right left)
    (planned-move s56 d right middle)
    (planned-move s57 a left middle)
    (planned-move s58 b left right)
    (planned-move s59 a middle right)
    (planned-move s60 c left middle)
    (planned-move s61 a right left)
    (planned-move s62 b right middle)
    (planned-move s63 a left middle)
    (planned-move s64 g right left)
    (planned-move s65 a middle right)
    (planned-move s66 b middle left)
    (planned-move s67 a right left)
    (planned-move s68 c middle right)
    (planned-move s69 a left middle)
    (planned-move s70 b left right)
    (planned-move s71 a middle right)
    (planned-move s72 d middle left)
    (planned-move s73 a right left)
    (planned-move s74 b right middle)
    (planned-move s75 a left middle)
    (planned-move s76 c right left)
    (planned-move s77 a middle right)
    (planned-move s78 b middle left)
    (planned-move s79 a right left)
    (planned-move s80 e middle right)
    (planned-move s81 a left middle)
    (planned-move s82 b left right)
    (planned-move s83 a middle right)
    (planned-move s84 c left middle)
    (planned-move s85 a right left)
    (planned-move s86 b right middle)
    (planned-move s87 a left middle)
    (planned-move s88 d left right)
    (planned-move s89 a middle right)
    (planned-move s90 b middle left)
    (planned-move s91 a right left)
    (planned-move s92 c middle right)
    (planned-move s93 a left middle)
    (planned-move s94 b left right)
    (planned-move s95 a middle right)
    (planned-move s96 f middle left)
    (planned-move s97 a right left)
    (planned-move s98 b right middle)
    (planned-move s99 a left middle)
    (planned-move s100 c right left)
    (planned-move s101 a middle right)
    (planned-move s102 b middle left)
    (planned-move s103 a right left)
    (planned-move s104 d right middle)
    (planned-move s105 a left middle)
    (planned-move s106 b left right)
    (planned-move s107 a middle right)
    (planned-move s108 c middle left)
    (planned-move s109 a left right)
    (planned-move s110 b left middle)
    (planned-move s111 a middle right)
    (planned-move s112 e right left)
    (planned-move s113 a middle right)
    (planned-move s114 b middle left)
    (planned-move s115 a right left)
    (planned-move s116 c middle right)
    (planned-move s117 a left middle)
    (planned-move s118 b left right)
    (planned-move s119 a middle right)
    (planned-move s120 d middle left)
    (planned-move s121 a right left)
    (planned-move s122 b right middle)
    (planned-move s123 a left middle)
    (planned-move s124 c right left)
    (planned-move s125 a middle right)
    (planned-move s126 b middle left)
    (planned-move s127 a right left)

    ;; initial enabled first step
    (enabled s1)
  )

  (:goal (and
    ;; final full stack on left (top to bottom a..g)
    (on a b)
    (on b c)
    (on c d)
    (on d e)
    (on e f)
    (on f g)
    (on g left)

    ;; base mapping to left peg for all disks
    (onpeg a left)
    (onpeg b left)
    (onpeg c left)
    (onpeg d left)
    (onpeg e left)
    (onpeg f left)
    (onpeg g left)

    ;; ensure middle and right pegs empty at the end
    (clear middle)
    (clear right)

    ;; top disk clear
    (clear a)

    ;; all steps executed
    (done s1) (done s2) (done s3) (done s4) (done s5) (done s6) (done s7) (done s8) (done s9) (done s10)
    (done s11) (done s12) (done s13) (done s14) (done s15) (done s16) (done s17) (done s18) (done s19) (done s20)
    (done s21) (done s22) (done s23) (done s24) (done s25) (done s26) (done s27) (done s28) (done s29) (done s30)
    (done s31) (done s32) (done s33) (done s34) (done s35) (done s36) (done s37) (done s38) (done s39) (done s40)
    (done s41) (done s42) (done s43) (done s44) (done s45) (done s46) (done s47) (done s48) (done s49) (done s50)
    (done s51) (done s52) (done s53) (done s54) (done s55) (done s56) (done s57) (done s58) (done s59) (done s60)
    (done s61) (done s62) (done s63) (done s64) (done s65) (done s66) (done s67) (done s68) (done s69) (done s70)
    (done s71) (done s72) (done s73) (done s74) (done s75) (done s76) (done s77) (done s78) (done s79) (done s80)
    (done s81) (done s82) (done s83) (done s84) (done s85) (done s86) (done s87) (done s88) (done s89) (done s90)
    (done s91) (done s92) (done s93) (done s94) (done s95) (done s96) (done s97) (done s98) (done s99) (done s100)
    (done s101) (done s102) (done s103) (done s104) (done s105) (done s106) (done s107) (done s108) (done s109) (done s110)
    (done s111) (done s112) (done s113) (done s114) (done s115) (done s116) (done s117) (done s118) (done s119) (done s120)
    (done s121) (done s122) (done s123) (done s124) (done s125) (done s126) (done s127)
  ))