(define (domain meeting-scheduling)
  (:requirements :strips :typing :negative-preconditions)
  (:types person slot)

  (:predicates
    (free ?p - person ?s - slot)            ; participant is free at slot
    (attends ?p - person ?s - slot)         ; participant has agreed to attend at slot
    (allfree ?s - slot)                     ; all required participants are free at slot (precomputed)
    (meeting-scheduled)                     ; a meeting has been scheduled
    (meeting-at ?s - slot)                  ; meeting is scheduled at slot
  )

  ;; Attend actions are distinct per participant (parameterized by slot)
  (:action attend-jesse
    :parameters (?s - slot)
    :precondition (free jesse ?s)
    :effect (attends jesse ?s)
  )

  (:action attend-megan
    :parameters (?s - slot)
    :precondition (free megan ?s)
    :effect (attends megan ?s)
  )

  (:action attend-organizer
    :parameters (?s - slot)
    :precondition (free organizer ?s)
    :effect (attends organizer ?s)
  )

  ;; Schedule actions: one per slot. Each requires that all participants have executed their attend actions
  ;; and that this slot is marked allfree. To enforce "earliest feasible slot", each schedule-slotK action
  ;; has negative preconditions forbidding any earlier slot that is marked allfree.
  ;; (This forces the planner to choose the earliest slot among those precomputed as allfree.)
  (:action schedule-slot1
    :parameters ()
    :precondition (and
      (attends jesse slot1)
      (attends megan slot1)
      (attends organizer slot1)
      (allfree slot1)
    )
    :effect (and (meeting-scheduled) (meeting-at slot1))
  )

  (:action schedule-slot2
    :parameters ()
    :precondition (and
      (attends jesse slot2)
      (attends megan slot2)
      (attends organizer slot2)
      (allfree slot2)
      (not (allfree slot1))
    )
    :effect (and (meeting-scheduled) (meeting-at slot2))
  )

  (:action schedule-slot3
    :parameters ()
    :precondition (and
      (attends jesse slot3)
      (attends megan slot3)
      (attends organizer slot3)
      (allfree slot3)
      (not (allfree slot1))
      (not (allfree slot2))
    )
    :effect (and (meeting-scheduled) (meeting-at slot3))
  )

  (:action schedule-slot4
    :parameters ()
    :precondition (and
      (attends jesse slot4)
      (attends megan slot4)
      (attends organizer slot4)
      (allfree slot4)
      (not (allfree slot1))
      (not (allfree slot2))
      (not (allfree slot3))
    )
    :effect (and (meeting-scheduled) (meeting-at slot4))
  )

  (:action schedule-slot5
    :parameters ()
    :precondition (and
      (attends jesse slot5)
      (attends megan slot5)
      (attends organizer slot5)
      (allfree slot5)
      (not (allfree slot1))
      (not (allfree slot2))
      (not (allfree slot3))
      (not (allfree slot4))
    )
    :effect (and (meeting-scheduled) (meeting-at slot5))
  )

  (:action schedule-slot6
    :parameters ()
    :precondition (and
      (attends jesse slot6)
      (attends megan slot6)
      (attends organizer slot6)
      (allfree slot6)
      (not (allfree slot1))
      (not (allfree slot2))
      (not (allfree slot3))
      (not (allfree slot4))
      (not (allfree slot5))
    )
    :effect (and (meeting-scheduled) (meeting-at slot6))
  )

  (:action schedule-slot7
    :parameters ()
    :precondition (and
      (attends jesse slot7)
      (attends megan slot7)
      (attends organizer slot7)
      (allfree slot7)
      (not (allfree slot1))
      (not (allfree slot2))
      (not (allfree slot3))
      (not (allfree slot4))
      (not (allfree slot5))
      (not (allfree slot6))
    )
    :effect (and (meeting-scheduled) (meeting-at slot7))
  )

  (:action schedule-slot8
    :parameters ()
    :precondition (and
      (attends jesse slot8)
      (attends megan slot8)
      (attends organizer slot8)
      (allfree slot8)
      (not (allfree slot1))
      (not (allfree slot2))
      (not (allfree slot3))
      (not (allfree slot4))
      (not (allfree slot5))
      (not (allfree slot6))
      (not (allfree slot7))
    )
    :effect (and (meeting-scheduled) (meeting-at slot8))
  )

  (:action schedule-slot9
    :parameters ()
    :precondition (and
      (attends jesse slot9)
      (attends megan slot9)
      (attends organizer slot9)
      (allfree slot9)
      (not (allfree slot1))
      (not (allfree slot2))
      (not (allfree slot3))
      (not (allfree slot4))
      (not (allfree slot5))
      (not (allfree slot6))
      (not (allfree slot7))
      (not (allfree slot8))
    )
    :effect (and (meeting-scheduled) (meeting-at slot9))
  )

  (:action schedule-slot10
    :parameters ()
    :precondition (and
      (attends jesse slot10)
      (attends megan slot10)
      (attends organizer slot10)
      (allfree slot10)
      (not (allfree slot1))
      (not (allfree slot2))
      (not (allfree slot3))
      (not (allfree slot4))
      (not (allfree slot5))
      (not (allfree slot6))
      (not (allfree slot7))
      (not (allfree slot8))
      (not (allfree slot9))
    )
    :effect (and (meeting-scheduled) (meeting-at slot10))
  )

  (:action schedule-slot11
    :parameters ()
    :precondition (and
      (attends jesse slot11)
      (attends megan slot11)
      (attends organizer slot11)
      (allfree slot11)
      (not (allfree slot1))
      (not (allfree slot2))
      (not (allfree slot3))
      (not (allfree slot4))
      (not (allfree slot5))
      (not (allfree slot6))
      (not (allfree slot7))
      (not (allfree slot8))
      (not (allfree slot9))
      (not (allfree slot10))
    )
    :effect (and (meeting-scheduled) (meeting-at slot11))
  )

  (:action schedule-slot12
    :parameters ()
    :precondition (and
      (attends jesse slot12)
      (attends megan slot12)
      (attends organizer slot12)
      (allfree slot12)
      (not (allfree slot1))
      (not (allfree slot2))
      (not (allfree slot3))
      (not (allfree slot4))
      (not (allfree slot5))
      (not (allfree slot6))
      (not (allfree slot7))
      (not (allfree slot8))
      (not (allfree slot9))
      (not (allfree slot10))
      (not (allfree slot11))
    )
    :effect (and (meeting-scheduled) (meeting-at slot12))
  )

  (:action schedule-slot13
    :parameters ()
    :precondition (and
      (attends jesse slot13)
      (attends megan slot13)
      (attends organizer slot13)
      (allfree slot13)
      (not (allfree slot1))
      (not (allfree slot2))
      (not (allfree slot3))
      (not (allfree slot4))
      (not (allfree slot5))
      (not (allfree slot6))
      (not (allfree slot7))
      (not (allfree slot8))
      (not (allfree slot9))
      (not (allfree slot10))
      (not (allfree slot11))
      (not (allfree slot12))
    )
    :effect (and (meeting-scheduled) (meeting-at slot13))
  )

  (:action schedule-slot14
    :parameters ()
    :precondition (and
      (attends jesse slot14)
      (attends megan slot14)
      (attends organizer slot14)
      (allfree slot14)
      (not (allfree slot1))
      (not (allfree slot2))
      (not (allfree slot3))
      (not (allfree slot4))
      (not (allfree slot5))
      (not (allfree slot6))
      (not (allfree slot7))
      (not (allfree slot8))
      (not (allfree slot9))
      (not (allfree slot10))
      (not (allfree slot11))
      (not (allfree slot12))
      (not (allfree slot13))
    )
    :effect (and (meeting-scheduled) (meeting-at slot14))
  )

  (:action schedule-slot15
    :parameters ()
    :precondition (and
      (attends jesse slot15)
      (attends megan slot15)
      (attends organizer slot15)
      (allfree slot15)
      (not (allfree slot1))
      (not (allfree slot2))
      (not (allfree slot3))
      (not (allfree slot4))
      (not (allfree slot5))
      (not (allfree slot6))
      (not (allfree slot7))
      (not (allfree slot8))
      (not (allfree slot9))
      (not (allfree slot10))
      (not (allfree slot11))
      (not (allfree slot12))
      (not (allfree slot13))
      (not (allfree slot14))
    )
    :effect (and (meeting-scheduled) (meeting-at slot15))
  )

  (:action schedule-slot16
    :parameters ()
    :precondition (and
      (attends jesse slot16)
      (attends megan slot16)
      (attends organizer slot16)
      (allfree slot16)
      (not (allfree slot1))
      (not (allfree slot2))
      (not (allfree slot3))
      (not (allfree slot4))
      (not (allfree slot5))
      (not (allfree slot6))
      (not (allfree slot7))
      (not (allfree slot8))
      (not (allfree slot9))
      (not (allfree slot10))
      (not (allfree slot11))
      (not (allfree slot12))
      (not (allfree slot13))
      (not (allfree slot14))
      (not (allfree slot15))
    )
    :effect (and (meeting-scheduled) (meeting-at slot16))
  )

)