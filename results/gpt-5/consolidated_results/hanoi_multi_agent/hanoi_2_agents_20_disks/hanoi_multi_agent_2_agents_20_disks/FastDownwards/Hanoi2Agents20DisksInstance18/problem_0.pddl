(define (problem two-agent-hanoi-20-ordered-4-prob)
  (:domain two-agent-hanoi-20-ordered-4)
  (:objects
    agent_1 agent_2 - agent
    left middle right - peg
    a b c d e f g h i j k l m n o p q r s t - disk
    s1 s2 s3 s4 s5 - step
  )
  (:init
    ; initial stack: a on b ... s on t, t on left
    (on a b)
    (on b c)
    (on c d)
    (on d e)
    (on e f)
    (on f g)
    (on g h)
    (on h i)
    (on i j)
    (on j k)
    (on k l)
    (on l m)
    (on m n)
    (on n o)
    (on o p)
    (on p q)
    (on q r)
    (on r s)
    (on s t)
    (on t left)
    (clear a)
    (clear middle)
    (clear right)

    ; agent movement restrictions (agent_1: A-J, agent_2: K-T)
    (can-move agent_1 a)
    (can-move agent_1 b)
    (can-move agent_1 c)
    (can-move agent_1 d)
    (can-move agent_1 e)
    (can-move agent_1 f)
    (can-move agent_1 g)
    (can-move agent_1 h)
    (can-move agent_1 i)
    (can-move agent_1 j)
    (can-move agent_2 k)
    (can-move agent_2 l)
    (can-move agent_2 m)
    (can-move agent_2 n)
    (can-move agent_2 o)
    (can-move agent_2 p)
    (can-move agent_2 q)
    (can-move agent_2 r)
    (can-move agent_2 s)
    (can-move agent_2 t)

    ; ordered-step control
    (next s1 s2)
    (next s2 s3)
    (next s3 s4)
    (next s4 s5)
    (at-step s1)

    ; only these four moves are allowed, in order
    ; 1) agent_1: A from on B to middle
    (allowed-move s1 agent_1 a b middle)
    ; 2) agent_1: B from on C to right
    (allowed-move s2 agent_1 b c right)
    ; 3) agent_1: A from on middle to on B
    (allowed-move s3 agent_1 a middle b)
    ; 4) agent_1: C from on D to middle
    (allowed-move s4 agent_1 c d middle)

    ; static legality: a disk may be placed on any peg or on a larger disk
    (legal-target a left)
    (legal-target a middle)
    (legal-target a right)
    (legal-target a b)
    (legal-target a c)
    (legal-target a d)
    (legal-target a e)
    (legal-target a f)
    (legal-target a g)
    (legal-target a h)
    (legal-target a i)
    (legal-target a j)
    (legal-target a k)
    (legal-target a l)
    (legal-target a m)
    (legal-target a n)
    (legal-target a o)
    (legal-target a p)
    (legal-target a q)
    (legal-target a r)
    (legal-target a s)
    (legal-target a t)

    (legal-target b left)
    (legal-target b middle)
    (legal-target b right)
    (legal-target b c)
    (legal-target b d)
    (legal-target b e)
    (legal-target b f)
    (legal-target b g)
    (legal-target b h)
    (legal-target b i)
    (legal-target b j)
    (legal-target b k)
    (legal-target b l)
    (legal-target b m)
    (legal-target b n)
    (legal-target b o)
    (legal-target b p)
    (legal-target b q)
    (legal-target b r)
    (legal-target b s)
    (legal-target b t)

    (legal-target c left)
    (legal-target c middle)
    (legal-target c right)
    (legal-target c d)
    (legal-target c e)
    (legal-target c f)
    (legal-target c g)
    (legal-target c h)
    (legal-target c i)
    (legal-target c j)
    (legal-target c k)
    (legal-target c l)
    (legal-target c m)
    (legal-target c n)
    (legal-target c o)
    (legal-target c p)
    (legal-target c q)
    (legal-target c r)
    (legal-target c s)
    (legal-target c t)

    (legal-target d left)
    (legal-target d middle)
    (legal-target d right)
    (legal-target d e)
    (legal-target d f)
    (legal-target d g)
    (legal-target d h)
    (legal-target d i)
    (legal-target d j)
    (legal-target d k)
    (legal-target d l)
    (legal-target d m)
    (legal-target d n)
    (legal-target d o)
    (legal-target d p)
    (legal-target d q)
    (legal-target d r)
    (legal-target d s)
    (legal-target d t)

    (legal-target e left)
    (legal-target e middle)
    (legal-target e right)
    (legal-target e f)
    (legal-target e g)
    (legal-target e h)
    (legal-target e i)
    (legal-target e j)
    (legal-target e k)
    (legal-target e l)
    (legal-target e m)
    (legal-target e n)
    (legal-target e o)
    (legal-target e p)
    (legal-target e q)
    (legal-target e r)
    (legal-target e s)
    (legal-target e t)

    (legal-target f left)
    (legal-target f middle)
    (legal-target f right)
    (legal-target f g)
    (legal-target f h)
    (legal-target f i)
    (legal-target f j)
    (legal-target f k)
    (legal-target f l)
    (legal-target f m)
    (legal-target f n)
    (legal-target f o)
    (legal-target f p)
    (legal-target f q)
    (legal-target f r)
    (legal-target f s)
    (legal-target f t)

    (legal-target g left)
    (legal-target g middle)
    (legal-target g right)
    (legal-target g h)
    (legal-target g i)
    (legal-target g j)
    (legal-target g k)
    (legal-target g l)
    (legal-target g m)
    (legal-target g n)
    (legal-target g o)
    (legal-target g p)
    (legal-target g q)
    (legal-target g r)
    (legal-target g s)
    (legal-target g t)

    (legal-target h left)
    (legal-target h middle)
    (legal-target h right)
    (legal-target h i)
    (legal-target h j)
    (legal-target h k)
    (legal-target h l)
    (legal-target h m)
    (legal-target h n)
    (legal-target h o)
    (legal-target h p)
    (legal-target h q)
    (legal-target h r)
    (legal-target h s)
    (legal-target h t)

    (legal-target i left)
    (legal-target i middle)
    (legal-target i right)
    (legal-target i j)
    (legal-target i k)
    (legal-target i l)
    (legal-target i m)
    (legal-target i n)
    (legal-target i o)
    (legal-target i p)
    (legal-target i q)
    (legal-target i r)
    (legal-target i s)
    (legal-target i t)

    (legal-target j left)
    (legal-target j middle)
    (legal-target j right)
    (legal-target j k)
    (legal-target j l)
    (legal-target j m)
    (legal-target j n)
    (legal-target j o)
    (legal-target j p)
    (legal-target j q)
    (legal-target j r)
    (legal-target j s)
    (legal-target j t)

    (legal-target k left)
    (legal-target k middle)
    (legal-target k right)
    (legal-target k l)
    (legal-target k m)
    (legal-target k n)
    (legal-target k o)
    (legal-target k p)
    (legal-target k q)
    (legal-target k r)
    (legal-target k s)
    (legal-target k t)

    (legal-target l left)
    (legal-target l middle)
    (legal-target l right)
    (legal-target l m)
    (legal-target l n)
    (legal-target l o)
    (legal-target l p)
    (legal-target l q)
    (legal-target l r)
    (legal-target l s)
    (legal-target l t)

    (legal-target m left)
    (legal-target m middle)
    (legal-target m right)
    (legal-target m n)
    (legal-target m o)
    (legal-target m p)
    (legal-target m q)
    (legal-target m r)
    (legal-target m s)
    (legal-target m t)

    (legal-target n left)
    (legal-target n middle)
    (legal-target n right)
    (legal-target n o)
    (legal-target n p)
    (legal-target n q)
    (legal-target n r)
    (legal-target n s)
    (legal-target n t)

    (legal-target o left)
    (legal-target o middle)
    (legal-target o right)
    (legal-target o p)
    (legal-target o q)
    (legal-target o r)
    (legal-target o s)
    (legal-target o t)

    (legal-target p left)
    (legal-target p middle)
    (legal-target p right)
    (legal-target p q)
    (legal-target p r)
    (legal-target p s)
    (legal-target p t)

    (legal-target q left)
    (legal-target q middle)
    (legal-target q right)
    (legal-target q r)
    (legal-target q s)
    (legal-target q t)

    (legal-target r left)
    (legal-target r middle)
    (legal-target r right)
    (legal-target r s)
    (legal-target r t)

    (legal-target s left)
    (legal-target s middle)
    (legal-target s right)
    (legal-target s t)

    (legal-target t left)
    (legal-target t middle)
    (legal-target t right)
  )
  (:goal
    (and
      (at-step s5)

      ; right peg has A on B (top->bottom A, B)
      (on a b)
      (on b right)
      (clear a)

      ; middle peg has C alone
      (on c middle)
      (clear c)

      ; left peg has D..T (top->bottom D..T)
      (on d e)
      (on e f)
      (on f g)
      (on g h)
      (on h i)
      (on i j)
      (on j k)
      (on k l)
      (on l m)
      (on m n)
      (on n o)
      (on o p)
      (on p q)
      (on q r)
      (on r s)
      (on s t)
      (on t left)
      (clear d)
    )
  )
)