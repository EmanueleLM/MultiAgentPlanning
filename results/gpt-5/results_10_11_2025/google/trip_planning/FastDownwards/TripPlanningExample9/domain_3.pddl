(define (domain tripplanningexample9)
  (:requirements :strips :typing :negative-preconditions)
  (:types day city)
  (:constants frankfurt bucharest stuttgart - city)

  (:predicates
    (current ?d - day)
    (next ?d1 - day ?d2 - day)
    (first ?d - day)
    (last ?d - day)
    (assigned ?d - day)
    (at ?d - day ?c - city)
    (last-bucharest)
    (last-frankfurt)
    (last-stuttgart)
    (edge ?c1 - city ?c2 - city)
    (in-window ?d - day)
    (workshop-done)
    (rem-b-0) (rem-b-1) (rem-b-2) (rem-b-3)
    (rem-f-0) (rem-f-1) (rem-f-2) (rem-f-3)
    (rem-s-0) (rem-s-1) (rem-s-2) (rem-s-3) (rem-s-4)
  )

  ;; First-day assignments (consume one unit of the chosen city's remaining quota)
  (:action assign-first-to-b-3
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (first ?d) (next ?d ?e) (not (assigned ?d)) (rem-b-3))
    :effect (and
      (assigned ?d)
      (at ?d bucharest)
      (not (first ?d))
      (not (current ?d))
      (current ?e)
      (last-bucharest)
      (not (last-frankfurt))
      (not (last-stuttgart))
      (not (rem-b-3)) (rem-b-2)
    )
  )

  (:action assign-first-to-f-3
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (first ?d) (next ?d ?e) (not (assigned ?d)) (rem-f-3))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (first ?d))
      (not (current ?d))
      (current ?e)
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-3)) (rem-f-2)
    )
  )

  (:action assign-first-to-s-4-nowin
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (first ?d) (next ?d ?e) (not (assigned ?d)) (rem-s-4) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (first ?d))
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-4)) (rem-s-3)
    )
  )

  (:action assign-first-to-s-4-win
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (first ?d) (next ?d ?e) (not (assigned ?d)) (rem-s-4) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (first ?d))
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-4)) (rem-s-3)
      (workshop-done)
    )
  )

  ;; Non-last day: stay actions (consume one unit from the same city)
  (:action stay-b-nonlast-3
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e) (last-bucharest) (not (assigned ?d)) (rem-b-3))
    :effect (and
      (assigned ?d)
      (at ?d bucharest)
      (not (current ?d))
      (current ?e)
      (last-bucharest)
      (not (last-frankfurt))
      (not (last-stuttgart))
      (not (rem-b-3)) (rem-b-2)
    )
  )
  (:action stay-b-nonlast-2
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e) (last-bucharest) (not (assigned ?d)) (rem-b-2))
    :effect (and
      (assigned ?d)
      (at ?d bucharest)
      (not (current ?d))
      (current ?e)
      (last-bucharest)
      (not (last-frankfurt))
      (not (last-stuttgart))
      (not (rem-b-2)) (rem-b-1)
    )
  )
  (:action stay-b-nonlast-1
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e) (last-bucharest) (not (assigned ?d)) (rem-b-1))
    :effect (and
      (assigned ?d)
      (at ?d bucharest)
      (not (current ?d))
      (current ?e)
      (last-bucharest)
      (not (last-frankfurt))
      (not (last-stuttgart))
      (not (rem-b-1)) (rem-b-0)
    )
  )

  (:action stay-f-nonlast-3
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e) (last-frankfurt) (not (assigned ?d)) (rem-f-3))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (current ?e)
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-3)) (rem-f-2)
    )
  )
  (:action stay-f-nonlast-2
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e) (last-frankfurt) (not (assigned ?d)) (rem-f-2))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (current ?e)
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-2)) (rem-f-1)
    )
  )
  (:action stay-f-nonlast-1
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e) (last-frankfurt) (not (assigned ?d)) (rem-f-1))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (current ?e)
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-1)) (rem-f-0)
    )
  )

  (:action stay-s-nonlast-4-nowin
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e) (last-stuttgart) (not (assigned ?d)) (rem-s-4) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-4)) (rem-s-3)
    )
  )
  (:action stay-s-nonlast-4-win
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e) (last-stuttgart) (not (assigned ?d)) (rem-s-4) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-4)) (rem-s-3)
      (workshop-done)
    )
  )
  (:action stay-s-nonlast-3-nowin
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e) (last-stuttgart) (not (assigned ?d)) (rem-s-3) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-3)) (rem-s-2)
    )
  )
  (:action stay-s-nonlast-3-win
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e) (last-stuttgart) (not (assigned ?d)) (rem-s-3) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-3)) (rem-s-2)
      (workshop-done)
    )
  )
  (:action stay-s-nonlast-2-nowin
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e) (last-stuttgart) (not (assigned ?d)) (rem-s-2) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-2)) (rem-s-1)
    )
  )
  (:action stay-s-nonlast-2-win
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e) (last-stuttgart) (not (assigned ?d)) (rem-s-2) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-2)) (rem-s-1)
      (workshop-done)
    )
  )
  (:action stay-s-nonlast-1-nowin
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e) (last-stuttgart) (not (assigned ?d)) (rem-s-1) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-1)) (rem-s-0)
    )
  )
  (:action stay-s-nonlast-1-win
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e) (last-stuttgart) (not (assigned ?d)) (rem-s-1) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-1)) (rem-s-0)
      (workshop-done)
    )
  )

  ;; Non-last day: moves along direct edges (consume one unit from the target city's remaining quota)
  (:action move-b-to-f-nonlast-3
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-bucharest) (edge bucharest frankfurt)
                       (not (assigned ?d)) (rem-f-3))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (current ?e)
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-3)) (rem-f-2)
    )
  )
  (:action move-b-to-f-nonlast-2
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-bucharest) (edge bucharest frankfurt)
                       (not (assigned ?d)) (rem-f-2))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (current ?e)
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-2)) (rem-f-1)
    )
  )
  (:action move-b-to-f-nonlast-1
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-bucharest) (edge bucharest frankfurt)
                       (not (assigned ?d)) (rem-f-1))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (current ?e)
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-1)) (rem-f-0)
    )
  )

  (:action move-f-to-b-nonlast-3
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-frankfurt) (edge frankfurt bucharest)
                       (not (assigned ?d)) (rem-b-3))
    :effect (and
      (assigned ?d)
      (at ?d bucharest)
      (not (current ?d))
      (current ?e)
      (last-bucharest)
      (not (last-frankfurt))
      (not (last-stuttgart))
      (not (rem-b-3)) (rem-b-2)
    )
  )
  (:action move-f-to-b-nonlast-2
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-frankfurt) (edge frankfurt bucharest)
                       (not (assigned ?d)) (rem-b-2))
    :effect (and
      (assigned ?d)
      (at ?d bucharest)
      (not (current ?d))
      (current ?e)
      (last-bucharest)
      (not (last-frankfurt))
      (not (last-stuttgart))
      (not (rem-b-2)) (rem-b-1)
    )
  )
  (:action move-f-to-b-nonlast-1
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-frankfurt) (edge frankfurt bucharest)
                       (not (assigned ?d)) (rem-b-1))
    :effect (and
      (assigned ?d)
      (at ?d bucharest)
      (not (current ?d))
      (current ?e)
      (last-bucharest)
      (not (last-frankfurt))
      (not (last-stuttgart))
      (not (rem-b-1)) (rem-b-0)
    )
  )

  (:action move-f-to-s-nonlast-4-nowin
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-4) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-4)) (rem-s-3)
    )
  )
  (:action move-f-to-s-nonlast-4-win
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-4) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-4)) (rem-s-3)
      (workshop-done)
    )
  )
  (:action move-f-to-s-nonlast-3-nowin
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-3) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-3)) (rem-s-2)
    )
  )
  (:action move-f-to-s-nonlast-3-win
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-3) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-3)) (rem-s-2)
      (workshop-done)
    )
  )
  (:action move-f-to-s-nonlast-2-nowin
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-2) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-2)) (rem-s-1)
    )
  )
  (:action move-f-to-s-nonlast-2-win
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-2) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-2)) (rem-s-1)
      (workshop-done)
    )
  )
  (:action move-f-to-s-nonlast-1-nowin
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-1) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-1)) (rem-s-0)
    )
  )
  (:action move-f-to-s-nonlast-1-win
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-1) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (current ?e)
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-1)) (rem-s-0)
      (workshop-done)
    )
  )

  (:action move-s-to-f-nonlast-3
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-stuttgart) (edge stuttgart frankfurt)
                       (not (assigned ?d)) (rem-f-3))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (current ?e)
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-3)) (rem-f-2)
    )
  )
  (:action move-s-to-f-nonlast-2
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-stuttgart) (edge stuttgart frankfurt)
                       (not (assigned ?d)) (rem-f-2))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (current ?e)
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-2)) (rem-f-1)
    )
  )
  (:action move-s-to-f-nonlast-1
    :parameters (?d - day ?e - day)
    :precondition (and (current ?d) (not (first ?d)) (next ?d ?e)
                       (last-stuttgart) (edge stuttgart frankfurt)
                       (not (assigned ?d)) (rem-f-1))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (current ?e)
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-1)) (rem-f-0)
    )
  )

  ;; Last-day variants (no successor; consume one unit of the target city's remaining quota)
  (:action stay-b-last-3
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d)) (last-bucharest) (not (assigned ?d)) (rem-b-3))
    :effect (and
      (assigned ?d)
      (at ?d bucharest)
      (not (current ?d))
      (last-bucharest)
      (not (last-frankfurt))
      (not (last-stuttgart))
      (not (rem-b-3)) (rem-b-2)
    )
  )
  (:action stay-b-last-2
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d)) (last-bucharest) (not (assigned ?d)) (rem-b-2))
    :effect (and
      (assigned ?d)
      (at ?d bucharest)
      (not (current ?d))
      (last-bucharest)
      (not (last-frankfurt))
      (not (last-stuttgart))
      (not (rem-b-2)) (rem-b-1)
    )
  )
  (:action stay-b-last-1
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d)) (last-bucharest) (not (assigned ?d)) (rem-b-1))
    :effect (and
      (assigned ?d)
      (at ?d bucharest)
      (not (current ?d))
      (last-bucharest)
      (not (last-frankfurt))
      (not (last-stuttgart))
      (not (rem-b-1)) (rem-b-0)
    )
  )

  (:action stay-f-last-3
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d)) (last-frankfurt) (not (assigned ?d)) (rem-f-3))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-3)) (rem-f-2)
    )
  )
  (:action stay-f-last-2
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d)) (last-frankfurt) (not (assigned ?d)) (rem-f-2))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-2)) (rem-f-1)
    )
  )
  (:action stay-f-last-1
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d)) (last-frankfurt) (not (assigned ?d)) (rem-f-1))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-1)) (rem-f-0)
    )
  )

  (:action stay-s-last-4-nowin
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d)) (last-stuttgart) (not (assigned ?d)) (rem-s-4) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-4)) (rem-s-3)
    )
  )
  (:action stay-s-last-4-win
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d)) (last-stuttgart) (not (assigned ?d)) (rem-s-4) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-4)) (rem-s-3)
      (workshop-done)
    )
  )
  (:action stay-s-last-3-nowin
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d)) (last-stuttgart) (not (assigned ?d)) (rem-s-3) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-3)) (rem-s-2)
    )
  )
  (:action stay-s-last-3-win
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d)) (last-stuttgart) (not (assigned ?d)) (rem-s-3) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-3)) (rem-s-2)
      (workshop-done)
    )
  )
  (:action stay-s-last-2-nowin
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d)) (last-stuttgart) (not (assigned ?d)) (rem-s-2) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-2)) (rem-s-1)
    )
  )
  (:action stay-s-last-2-win
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d)) (last-stuttgart) (not (assigned ?d)) (rem-s-2) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-2)) (rem-s-1)
      (workshop-done)
    )
  )
  (:action stay-s-last-1-nowin
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d)) (last-stuttgart) (not (assigned ?d)) (rem-s-1) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-1)) (rem-s-0)
    )
  )
  (:action stay-s-last-1-win
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d)) (last-stuttgart) (not (assigned ?d)) (rem-s-1) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-1)) (rem-s-0)
      (workshop-done)
    )
  )

  (:action move-b-to-f-last-3
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-bucharest) (edge bucharest frankfurt)
                       (not (assigned ?d)) (rem-f-3))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-3)) (rem-f-2)
    )
  )
  (:action move-b-to-f-last-2
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-bucharest) (edge bucharest frankfurt)
                       (not (assigned ?d)) (rem-f-2))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-2)) (rem-f-1)
    )
  )
  (:action move-b-to-f-last-1
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-bucharest) (edge bucharest frankfurt)
                       (not (assigned ?d)) (rem-f-1))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-1)) (rem-f-0)
    )
  )

  (:action move-f-to-b-last-3
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-frankfurt) (edge frankfurt bucharest)
                       (not (assigned ?d)) (rem-b-3))
    :effect (and
      (assigned ?d)
      (at ?d bucharest)
      (not (current ?d))
      (last-bucharest)
      (not (last-frankfurt))
      (not (last-stuttgart))
      (not (rem-b-3)) (rem-b-2)
    )
  )
  (:action move-f-to-b-last-2
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-frankfurt) (edge frankfurt bucharest)
                       (not (assigned ?d)) (rem-b-2))
    :effect (and
      (assigned ?d)
      (at ?d bucharest)
      (not (current ?d))
      (last-bucharest)
      (not (last-frankfurt))
      (not (last-stuttgart))
      (not (rem-b-2)) (rem-b-1)
    )
  )
  (:action move-f-to-b-last-1
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-frankfurt) (edge frankfurt bucharest)
                       (not (assigned ?d)) (rem-b-1))
    :effect (and
      (assigned ?d)
      (at ?d bucharest)
      (not (current ?d))
      (last-bucharest)
      (not (last-frankfurt))
      (not (last-stuttgart))
      (not (rem-b-1)) (rem-b-0)
    )
  )

  (:action move-f-to-s-last-4-nowin
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-4) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-4)) (rem-s-3)
    )
  )
  (:action move-f-to-s-last-4-win
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-4) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-4)) (rem-s-3)
      (workshop-done)
    )
  )
  (:action move-f-to-s-last-3-nowin
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-3) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-3)) (rem-s-2)
    )
  )
  (:action move-f-to-s-last-3-win
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-3) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-3)) (rem-s-2)
      (workshop-done)
    )
  )
  (:action move-f-to-s-last-2-nowin
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-2) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-2)) (rem-s-1)
    )
  )
  (:action move-f-to-s-last-2-win
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-2) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-2)) (rem-s-1)
      (workshop-done)
    )
  )
  (:action move-f-to-s-last-1-nowin
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-1) (not (in-window ?d)))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-1)) (rem-s-0)
    )
  )
  (:action move-f-to-s-last-1-win
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-frankfurt) (edge frankfurt stuttgart)
                       (not (assigned ?d)) (rem-s-1) (in-window ?d))
    :effect (and
      (assigned ?d)
      (at ?d stuttgart)
      (not (current ?d))
      (last-stuttgart)
      (not (last-bucharest))
      (not (last-frankfurt))
      (not (rem-s-1)) (rem-s-0)
      (workshop-done)
    )
  )

  (:action move-s-to-f-last-3
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-stuttgart) (edge stuttgart frankfurt)
                       (not (assigned ?d)) (rem-f-3))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-3)) (rem-f-2)
    )
  )
  (:action move-s-to-f-last-2
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-stuttgart) (edge stuttgart frankfurt)
                       (not (assigned ?d)) (rem-f-2))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-2)) (rem-f-1)
    )
  )
  (:action move-s-to-f-last-1
    :parameters (?d - day)
    :precondition (and (current ?d) (last ?d) (not (first ?d))
                       (last-stuttgart) (edge stuttgart frankfurt)
                       (not (assigned ?d)) (rem-f-1))
    :effect (and
      (assigned ?d)
      (at ?d frankfurt)
      (not (current ?d))
      (last-frankfurt)
      (not (last-bucharest))
      (not (last-stuttgart))
      (not (rem-f-1)) (rem-f-0)
    )
  )
)