(define (domain hanoi_two_agent_staged_strict)
  (:requirements :strips :typing :negative-preconditions)
  (:types
    support
    peg disk - support
    step
  )
  (:predicates
    (on ?d - disk ?s - support)
    (clear ?s - support)
    (smaller ?x - disk ?y - disk)
    (top ?d - disk)
    (cap-agent1 ?d - disk)
    (cap-agent2 ?d - disk)
    (at-step ?s - step)
    (succ ?s1 - step ?s2 - step)
  )

  (:action a1-move-from-disk-to-peg
    :parameters (?d - disk ?u - disk ?p - peg ?s1 - step ?s2 - step)
    :precondition (and
      (cap-agent1 ?d)
      (on ?d ?u)
      (top ?d)
      (clear ?p)
      (at-step ?s1)
      (succ ?s1 ?s2)
    )
    :effect (and
      (not (on ?d ?u))
      (on ?d ?p)
      (clear ?u)
      (top ?u)
      (not (clear ?p))
      (clear ?d)
      (top ?d)
      (not (at-step ?s1))
      (at-step ?s2)
    )
  )

  (:action a1-move-from-peg-to-peg
    :parameters (?d - disk ?pf - peg ?pt - peg ?s1 - step ?s2 - step)
    :precondition (and
      (cap-agent1 ?d)
      (on ?d ?pf)
      (not (on ?d ?pt))
      (top ?d)
      (clear ?pt)
      (at-step ?s1)
      (succ ?s1 ?s2)
    )
    :effect (and
      (not (on ?d ?pf))
      (on ?d ?pt)
      (clear ?pf)
      (not (clear ?pt))
      (clear ?d)
      (top ?d)
      (not (at-step ?s1))
      (at-step ?s2)
    )
  )

  (:action a1-move-from-disk-to-disk
    :parameters (?d - disk ?u - disk ?v - disk ?s1 - step ?s2 - step)
    :precondition (and
      (cap-agent1 ?d)
      (on ?d ?u)
      (not (on ?d ?v))
      (top ?d)
      (top ?v)
      (smaller ?d ?v)
      (at-step ?s1)
      (succ ?s1 ?s2)
    )
    :effect (and
      (not (on ?d ?u))
      (on ?d ?v)
      (clear ?u)
      (top ?u)
      (not (clear ?v))
      (not (top ?v))
      (clear ?d)
      (top ?d)
      (not (at-step ?s1))
      (at-step ?s2)
    )
  )

  (:action a1-move-from-peg-to-disk
    :parameters (?d - disk ?pf - peg ?v - disk ?s1 - step ?s2 - step)
    :precondition (and
      (cap-agent1 ?d)
      (on ?d ?pf)
      (not (on ?d ?v))
      (top ?d)
      (top ?v)
      (smaller ?d ?v)
      (at-step ?s1)
      (succ ?s1 ?s2)
    )
    :effect (and
      (not (on ?d ?pf))
      (on ?d ?v)
      (clear ?pf)
      (not (clear ?v))
      (not (top ?v))
      (clear ?d)
      (top ?d)
      (not (at-step ?s1))
      (at-step ?s2)
    )
  )

  (:action a2-move-from-disk-to-peg
    :parameters (?d - disk ?u - disk ?p - peg ?s1 - step ?s2 - step)
    :precondition (and
      (cap-agent2 ?d)
      (on ?d ?u)
      (top ?d)
      (clear ?p)
      (at-step ?s1)
      (succ ?s1 ?s2)
    )
    :effect (and
      (not (on ?d ?u))
      (on ?d ?p)
      (clear ?u)
      (top ?u)
      (not (clear ?p))
      (clear ?d)
      (top ?d)
      (not (at-step ?s1))
      (at-step ?s2)
    )
  )

  (:action a2-move-from-peg-to-peg
    :parameters (?d - disk ?pf - peg ?pt - peg ?s1 - step ?s2 - step)
    :precondition (and
      (cap-agent2 ?d)
      (on ?d ?pf)
      (not (on ?d ?pt))
      (top ?d)
      (clear ?pt)
      (at-step ?s1)
      (succ ?s1 ?s2)
    )
    :effect (and
      (not (on ?d ?pf))
      (on ?d ?pt)
      (clear ?pf)
      (not (clear ?pt))
      (clear ?d)
      (top ?d)
      (not (at-step ?s1))
      (at-step ?s2)
    )
  )

  (:action a2-move-from-disk-to-disk
    :parameters (?d - disk ?u - disk ?v - disk ?s1 - step ?s2 - step)
    :precondition (and
      (cap-agent2 ?d)
      (on ?d ?u)
      (not (on ?d ?v))
      (top ?d)
      (top ?v)
      (smaller ?d ?v)
      (at-step ?s1)
      (succ ?s1 ?s2)
    )
    :effect (and
      (not (on ?d ?u))
      (on ?d ?v)
      (clear ?u)
      (top ?u)
      (not (clear ?v))
      (not (top ?v))
      (clear ?d)
      (top ?d)
      (not (at-step ?s1))
      (at-step ?s2)
    )
  )

  (:action a2-move-from-peg-to-disk
    :parameters (?d - disk ?pf - peg ?v - disk ?s1 - step ?s2 - step)
    :precondition (and
      (cap-agent2 ?d)
      (on ?d ?pf)
      (not (on ?d ?v))
      (top ?d)
      (top ?v)
      (smaller ?d ?v)
      (at-step ?s1)
      (succ ?s1 ?s2)
    )
    :effect (and
      (not (on ?d ?pf))
      (on ?d ?v)
      (clear ?pf)
      (not (clear ?v))
      (not (top ?v))
      (clear ?d)
      (top ?d)
      (not (at-step ?s1))
      (at-step ?s2)
    )
  )
)