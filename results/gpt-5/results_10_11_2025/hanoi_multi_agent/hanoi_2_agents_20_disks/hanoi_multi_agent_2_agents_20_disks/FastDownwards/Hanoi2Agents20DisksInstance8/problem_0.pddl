(define (problem hanoi-20)
  (:domain hanoi-single-move)
  (:objects
    A B C D E F G H I J K L M N O P Q R S T - disk
    left middle right - peg
  )
  (:init
    ; static peg self-mapping
    (at-peg left left)
    (at-peg middle middle)
    (at-peg right right)

    ; initial membership: all disks on left
    (on A left) (at-peg A left)
    (on B left) (at-peg B left)
    (on C left) (at-peg C left)
    (on D left) (at-peg D left)
    (on E left) (at-peg E left)
    (on F left) (at-peg F left)
    (on G left) (at-peg G left)
    (on H left) (at-peg H left)
    (on I left) (at-peg I left)
    (on J left) (at-peg J left)
    (on K left) (at-peg K left)
    (on L left) (at-peg L left)
    (on M left) (at-peg M left)
    (on N left) (at-peg N left)
    (on O left) (at-peg O left)
    (on P left) (at-peg P left)
    (on Q left) (at-peg Q left)
    (on R left) (at-peg R left)
    (on S left) (at-peg S left)
    (on T left) (at-peg T left)

    ; initial direct-support chain on left peg (top to bottom)
    (above A B)
    (above B C)
    (above C D)
    (above D E)
    (above E F)
    (above F G)
    (above G H)
    (above H I)
    (above I J)
    (above J K)
    (above K L)
    (above L M)
    (above M N)
    (above N O)
    (above O P)
    (above P Q)
    (above Q R)
    (above R S)
    (above S T)
    (above T left)

    ; free supports initially
    (free A)
    (free middle)
    (free right)

    ; requested clear/clear-peg/top bookkeeping in the initial state
    (clear A)
    (top A)
    (clear-peg middle)
    (clear-peg right)

    ; full strict size ordering: A < B < ... < T
    (smaller A B) (smaller A C) (smaller A D) (smaller A E) (smaller A F) (smaller A G) (smaller A H) (smaller A I) (smaller A J) (smaller A K) (smaller A L) (smaller A M) (smaller A N) (smaller A O) (smaller A P) (smaller A Q) (smaller A R) (smaller A S) (smaller A T)
    (smaller B C) (smaller B D) (smaller B E) (smaller B F) (smaller B G) (smaller B H) (smaller B I) (smaller B J) (smaller B K) (smaller B L) (smaller B M) (smaller B N) (smaller B O) (smaller B P) (smaller B Q) (smaller B R) (smaller B S) (smaller B T)
    (smaller C D) (smaller C E) (smaller C F) (smaller C G) (smaller C H) (smaller C I) (smaller C J) (smaller C K) (smaller C L) (smaller C M) (smaller C N) (smaller C O) (smaller C P) (smaller C Q) (smaller C R) (smaller C S) (smaller C T)
    (smaller D E) (smaller D F) (smaller D G) (smaller D H) (smaller D I) (smaller D J) (smaller D K) (smaller D L) (smaller D M) (smaller D N) (smaller D O) (smaller D P) (smaller D Q) (smaller D R) (smaller D S) (smaller D T)
    (smaller E F) (smaller E G) (smaller E H) (smaller E I) (smaller E J) (smaller E K) (smaller E L) (smaller E M) (smaller E N) (smaller E O) (smaller E P) (smaller E Q) (smaller E R) (smaller E S) (smaller E T)
    (smaller F G) (smaller F H) (smaller F I) (smaller F J) (smaller F K) (smaller F L) (smaller F M) (smaller F N) (smaller F O) (smaller F P) (smaller F Q) (smaller F R) (smaller F S) (smaller F T)
    (smaller G H) (smaller G I) (smaller G J) (smaller G K) (smaller G L) (smaller G M) (smaller G N) (smaller G O) (smaller G P) (smaller G Q) (smaller G R) (smaller G S) (smaller G T)
    (smaller H I) (smaller H J) (smaller H K) (smaller H L) (smaller H M) (smaller H N) (smaller H O) (smaller H P) (smaller H Q) (smaller H R) (smaller H S) (smaller H T)
    (smaller I J) (smaller I K) (smaller I L) (smaller I M) (smaller I N) (smaller I O) (smaller I P) (smaller I Q) (smaller I R) (smaller I S) (smaller I T)
    (smaller J K) (smaller J L) (smaller J M) (smaller J N) (smaller J O) (smaller J P) (smaller J Q) (smaller J R) (smaller J S) (smaller J T)
    (smaller K L) (smaller K M) (smaller K N) (smaller K O) (smaller K P) (smaller K Q) (smaller K R) (smaller K S) (smaller K T)
    (smaller L M) (smaller L N) (smaller L O) (smaller L P) (smaller L Q) (smaller L R) (smaller L S) (smaller L T)
    (smaller M N) (smaller M O) (smaller M P) (smaller M Q) (smaller M R) (smaller M S) (smaller M T)
    (smaller N O) (smaller N P) (smaller N Q) (smaller N R) (smaller N S) (smaller N T)
    (smaller O P) (smaller O Q) (smaller O R) (smaller O S) (smaller O T)
    (smaller P Q) (smaller P R) (smaller P S) (smaller P T)
    (smaller Q R) (smaller Q S) (smaller Q T)
    (smaller R S) (smaller R T)
    (smaller S T)

    ; permissible destinations: any peg, or a larger disk
    ; peg destinations (always ok)
    (okdest A left) (okdest A middle) (okdest A right)
    (okdest B left) (okdest B middle) (okdest B right)
    (okdest C left) (okdest C middle) (okdest C right)
    (okdest D left) (okdest D middle) (okdest D right)
    (okdest E left) (okdest E middle) (okdest E right)
    (okdest F left) (okdest F middle) (okdest F right)
    (okdest G left) (okdest G middle) (okdest G right)
    (okdest H left) (okdest H middle) (okdest H right)
    (okdest I left) (okdest I middle) (okdest I right)
    (okdest J left) (okdest J middle) (okdest J right)
    (okdest K left) (okdest K middle) (okdest K right)
    (okdest L left) (okdest L middle) (okdest L right)
    (okdest M left) (okdest M middle) (okdest M right)
    (okdest N left) (okdest N middle) (okdest N right)
    (okdest O left) (okdest O middle) (okdest O right)
    (okdest P left) (okdest P middle) (okdest P right)
    (okdest Q left) (okdest Q middle) (okdest Q right)
    (okdest R left) (okdest R middle) (okdest R right)
    (okdest S left) (okdest S middle) (okdest S right)
    (okdest T left) (okdest T middle) (okdest T right)

    ; disk destinations (only if larger than moving disk)
    (okdest A B) (okdest A C) (okdest A D) (okdest A E) (okdest A F) (okdest A G) (okdest A H) (okdest A I) (okdest A J) (okdest A K) (okdest A L) (okdest A M) (okdest A N) (okdest A O) (okdest A P) (okdest A Q) (okdest A R) (okdest A S) (okdest A T)
    (okdest B C) (okdest B D) (okdest B E) (okdest B F) (okdest B G) (okdest B H) (okdest B I) (okdest B J) (okdest B K) (okdest B L) (okdest B M) (okdest B N) (okdest B O) (okdest B P) (okdest B Q) (okdest B R) (okdest B S) (okdest B T)
    (okdest C D) (okdest C E) (okdest C F) (okdest C G) (okdest C H) (okdest C I) (okdest C J) (okdest C K) (okdest C L) (okdest C M) (okdest C N) (okdest C O) (okdest C P) (okdest C Q) (okdest C R) (okdest C S) (okdest C T)
    (okdest D E) (okdest D F) (okdest D G) (okdest D H) (okdest D I) (okdest D J) (okdest D K) (okdest D L) (okdest D M) (okdest D N) (okdest D O) (okdest D P) (okdest D Q) (okdest D R) (okdest D S) (okdest D T)
    (okdest E F) (okdest E G) (okdest E H) (okdest E I) (okdest E J) (okdest E K) (okdest E L) (okdest E M) (okdest E N) (okdest E O) (okdest E P) (okdest E Q) (okdest E R) (okdest E S) (okdest E T)
    (okdest F G) (okdest F H) (okdest F I) (okdest F J) (okdest F K) (okdest F L) (okdest F M) (okdest F N) (okdest F O) (okdest F P) (okdest F Q) (okdest F R) (okdest F S) (okdest F T)
    (okdest G H) (okdest G I) (okdest G J) (okdest G K) (okdest G L) (okdest G M) (okdest G N) (okdest G O) (okdest G P) (okdest G Q) (okdest G R) (okdest G S) (okdest G T)
    (okdest H I) (okdest H J) (okdest H K) (okdest H L) (okdest H M) (okdest H N) (okdest H O) (okdest H P) (okdest H Q) (okdest H R) (okdest H S) (okdest H T)
    (okdest I J) (okdest I K) (okdest I L) (okdest I M) (okdest I N) (okdest I O) (okdest I P) (okdest I Q) (okdest I R) (okdest I S) (okdest I T)
    (okdest J K) (okdest J L) (okdest J M) (okdest J N) (okdest J O) (okdest J P) (okdest J Q) (okdest J R) (okdest J S) (okdest J T)
    (okdest K L) (okdest K M) (okdest K N) (okdest K O) (okdest K P) (okdest K Q) (okdest K R) (okdest K S) (okdest K T)
    (okdest L M) (okdest L N) (okdest L O) (okdest L P) (okdest L Q) (okdest L R) (okdest L S) (okdest L T)
    (okdest M N) (okdest M O) (okdest M P) (okdest M Q) (okdest M R) (okdest M S) (okdest M T)
    (okdest N O) (okdest N P) (okdest N Q) (okdest N R) (okdest N S) (okdest N T)
    (okdest O P) (okdest O Q) (okdest O R) (okdest O S) (okdest O T)
    (okdest P Q) (okdest P R) (okdest P S) (okdest P T)
    (okdest Q R) (okdest Q S) (okdest Q T)
    (okdest R S) (okdest R T)
    (okdest S T)
  )

  (:goal
    (and
      ; final membership by peg
      (on A left)
      (on C left)
      (on E left)
      (on F left)
      (on G left)
      (on H left)
      (on I left)
      (on J left)
      (on K left)
      (on L left)
      (on M left)
      (on N left)
      (on O left)
      (on P left)
      (on Q left)
      (on R left)
      (on S left)
      (on T left)
      (on D middle)
      (on B right)

      ; exact final stacking order (top to bottom) for each peg
      (above A C)
      (above C E)
      (above E F)
      (above F G)
      (above G H)
      (above H I)
      (above I J)
      (above J K)
      (above K L)
      (above L M)
      (above M N)
      (above N O)
      (above O P)
      (above P Q)
      (above Q R)
      (above R S)
      (above S T)
      (above T left)

      (above D middle)
      (above B right)

      ; the three top disks
      (free A)
      (free D)
      (free B)
    )
  )
)