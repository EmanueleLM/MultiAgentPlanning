(define (domain integrated-schedule-meeting)
  (:requirements :typing :negative-preconditions)
  (:types person hour halfslot meeting)

  (:constants david debra kevin - person)

  (:predicates
    (free_hour ?p - person ?h - hour)
    (unscheduled ?m - meeting)
    (free_half ?p - person ?s - halfslot)
    (slot-next ?s1 - halfslot ?s2 - halfslot)
    (meeting-available)
    (available_hour ?p - person ?h - hour)
    (slot ?h - hour)
    (within-window ?h - hour)
    (hour-starts ?h - hour ?s - halfslot)
    (meeting-free)
    (meeting-scheduled-global ?m - meeting)
    (scheduled-at ?m - meeting ?h - hour)
    (meeting-start-at-half ?s - halfslot)
    (attends ?p - person ?m - meeting)
    (free_hour_agg ?p - person ?h - hour)
  )

  (:action schedule-by-agent1
    :parameters (?m - meeting ?h - hour)
    :precondition (and
                    (unscheduled ?m)
                    (meeting-free)
                    (free_hour david ?h) (free_hour debra ?h) (free_hour kevin ?h)
                    (free_hour_agg david ?h) (free_hour_agg debra ?h) (free_hour_agg kevin ?h)
                  )
    :effect (and
              (meeting-scheduled-global ?m)
              (scheduled-at ?m ?h)
              (attends david ?m) (attends debra ?m) (attends kevin ?m)
              (not (unscheduled ?m))
              (not (meeting-free))
              (not (free_hour david ?h)) (not (free_hour debra ?h)) (not (free_hour kevin ?h))
            )
  )

  (:action schedule-by-agent2
    :parameters (?m - meeting ?s1 - halfslot ?s2 - halfslot ?h - hour)
    :precondition (and
                    (slot-next ?s1 ?s2)
                    (hour-starts ?h ?s1)
                    (meeting-available)
                    (meeting-free)
                    (free_half david ?s1) (free_half david ?s2)
                    (free_half debra ?s1) (free_half debra ?s2)
                    (free_half kevin ?s1) (free_half kevin ?s2)
                    (free_hour_agg david ?h) (free_hour_agg debra ?h) (free_hour_agg kevin ?h)
                  )
    :effect (and
              (not (meeting-available))
              (meeting-scheduled-global ?m)
              (meeting-start-at-half ?s1)
              (scheduled-at ?m ?h)
              (attends david ?m) (attends debra ?m) (attends kevin ?m)
              (not (free_half david ?s1)) (not (free_half david ?s2))
              (not (free_half debra ?s1)) (not (free_half debra ?s2))
              (not (free_half kevin ?s1)) (not (free_half kevin ?s2))
              (not (meeting-free))
            )
  )

  (:action schedule-by-agent3
    :parameters (?m - meeting ?h - hour)
    :precondition (and
                    (slot ?h)
                    (within-window ?h)
                    (meeting-free)
                    (available_hour david ?h) (available_hour debra ?h) (available_hour kevin ?h)
                    (free_hour_agg david ?h) (free_hour_agg debra ?h) (free_hour_agg kevin ?h)
                  )
    :effect (and
              (meeting-scheduled-global ?m)
              (scheduled-at ?m ?h)
              (attends david ?m) (attends debra ?m) (attends kevin ?m)
              (not (meeting-free))
            )
  )
)